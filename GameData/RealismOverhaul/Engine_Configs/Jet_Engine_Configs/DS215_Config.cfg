//	==================================================
//	Engine: DS-215
//
//	Manufacturer: Schubeler
//
//	=================================================================================
//	DS-215
//	2024?
//
//	Dry Mass: 3.4 kg + 0.6 kg motor ESC
//	Power: 16.3			// HP, 15.6 kW peak at 78% eff for 12.17 kW mechanical
//	Compression: N/A	// max
//	BSFC: 6.41E-5		// kg/W-s
//	minRPM: 1400		// guess
//	maxRPM: 14000		//
//	gearratio: 1		// reduction ratio from engine to propeller
//	exhaustThrust: 0	//
//	propName: DS-215	//
//	=================================================================================

//	Sources:

//	https://www.schubeler.com/product/ds-215-dia-hst/?v=0b3b97fa6688
//	https://www.turbines-rc.com/en/schubeler/2117-schubeler-ds-215-dia-hst-195mm-carbon-edf-ducted-fan-motor.html

//	Used by:

//	Notes:

//	==================================================
@PART[*]:HAS[#engineType[DS215]]:FOR[RealismOverhaulEngines]
{

	%title = #roDS215Title	//DS-215 Electric Ducted Fan
	%manufacturer = Schubeler
	%description = #roDS215Desc

	@tags ^= :$: germany europe schubeler ds-215 ds215 electric ducted fan propeller

	%specLevel = operational	//operational, prototype, concept, speculative, altHist, sciFi

	@MODULE[ModuleEngines*]
	{
		@name = ModuleEnginesAJEPropeller
		//%EngineType = Turbine
		@PROPELLANT[LiquidFuel]
		{
			@name = ElectricCharge
		}
	}

	!MODULE[ModuleGimbal]{}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEnginesAJEPropeller
		configuration = DS-215
		modded = false
		origMass = 0.004

		CONFIG
		{
			name = DS-215
			description = Very powerful electric ducted fan. Optimized for 80 m/s airspeed.
			specLevel = operational
			massMult = 1.00
			
			IspMultiplier = 1
			useOxygen = false
			
			power = 16.3
			BSFC = 6.41E-5
			maxRPM = 14000
			minRPM = 1400
			gearratio = 1.0
			//ramAir = 1
			//exhaustThrust = 2.78
			//meredithEffect = 0.001
			propName = DS215

			maxThrust = 0.250	//Just to let MEC know thrust

			PROPELLANT
			{
				name = ElectricCharge
				ratio = 1
				DrawGauge = True
			}
			PROPELLANT
			{
				name = FSCoolant
				ratio = 0.01
			}
		}
		CONFIG
		{
			name = DS-215-Static
			description = Very powerful electric ducted fan. Optimized for static thrust
			specLevel = operational
			massMult = 1.00
			
			IspMultiplier = 1
			useOxygen = false
			
			power = 16.3
			BSFC = 6.41E-5
			maxRPM = 14000
			minRPM = 1400
			gearratio = 1.0
			//ramAir = 1
			//exhaustThrust = 2.78
			//meredithEffect = 0.001
			propName = DS215-Static

			maxThrust = 0.500	//Just to let MEC know thrust

			PROPELLANT
			{
				name = ElectricCharge
				ratio = 1
				DrawGauge = True
			}
			PROPELLANT
			{
				name = FSCoolant
				ratio = 0.01
			}
		}
	}
}
//propeller definition
//default fixed-pitch propeller. Very aggressive pitch, optimized for a speed of ~84 m/s
PROPELLER
{
	name = DS215
	// Based on GriffonProp, slightly swept, 5 bladed version of P-51 prop
	ixxFTLB = 0.01		//tiny carbon fiber fan, basically nothing
	diameter = 0.195 // 195 mm
	numblades = 11
	
	//minpitch = 48	//very aggressive fixed pitch blades. 48 degrees?
	//maxpitch = 53
	constspeed = 0
	
	// using P-51H prop for now, with scaleup
	// We need a lot of modifiers because this prop model is not a good fit
	ct_factor = 16.4
	cp_factor = 5.62
	
	cThrustFP
	{
		key = 0.0 0.186000
		key = 0.1 0.141446
		key = 0.2 0.149519
		key = 0.3 0.159398
		key = 0.4 0.167513
		key = 0.5 0.174928
		key = 0.6 0.182990
		key = 0.7 0.190852
		key = 0.8 0.198784
		key = 0.9 0.206843
		key = 1.0 0.214560
		key = 1.1 0.220190
		key = 1.2 0.224925
		key = 1.3 0.229996
		key = 1.4 0.235829
		key = 1.5 0.236100
		key = 1.6 0.234365
		key = 1.7 0.230955
		key = 1.8 0.225598
		key = 1.9 0.215349
		key = 2.0 0.201650
		key = 2.1 0.187718
		key = 2.2 0.173641
		key = 2.3 0.159291
		key = 2.4 0.144771
		key = 2.5 0.129987
		key = 2.6 0.115019
		key = 2.7 0.099844
		key = 2.8 0.084564
		key = 2.9 0.068743
		key = 3.0 0.052866
		key = 3.1 0.036769
		key = 3.2 0.020413
		key = 3.3 0.003797
		key = 3.4 -0.013020
		key = 3.5 -0.029838
		key = 3.6 -0.046655
		key = 3.7 -0.063473
		key = 3.8 -0.080290
		key = 3.9 -0.097107
		key = 4.0 -0.113925
		key = 4.1 -0.130742
		key = 4.2 -0.147560
		key = 4.3 -0.164377
		key = 4.4 -0.181194
		key = 4.5 -0.198012
		key = 4.6 -0.214829
		key = 4.7 -0.231647
		key = 4.8 -0.248464
		key = 4.9 -0.265281
		key = 5.0 -0.282099
		key = 5.1 -0.298916
		key = 5.2 -0.315734
		key = 5.3 -0.332551
		key = 5.4 -0.349368
		key = 5.5 -0.366186
	}
	cPowerFP
	{
		key = 0.0 0.560034
		key = 0.1 0.471014
		key = 0.2 0.489547
		key = 0.3 0.501981
		key = 0.4 0.509451
		key = 0.5 0.505633
		key = 0.6 0.491981
		key = 0.7 0.479943
		key = 0.8 0.471560
		key = 0.9 0.467518
		key = 1.0 0.468679
		key = 1.1 0.471874
		key = 1.2 0.474439
		key = 1.3 0.472195
		key = 1.4 0.463494
		key = 1.5 0.460563
		key = 1.6 0.479747
		key = 1.7 0.496906
		key = 1.8 0.511329
		key = 1.9 0.515582
		key = 2.0 0.510041
		key = 2.1 0.501235
		key = 2.2 0.489202
		key = 2.3 0.473408
		key = 2.4 0.453943
		key = 2.5 0.430347
		key = 2.6 0.402645
		key = 2.7 0.370588
		key = 2.8 0.334313
		key = 2.9 0.292202
		key = 3.0 0.245630
		key = 3.1 0.193862
		key = 3.2 0.136569
		key = 3.3 0.073539
		key = 3.4 0.004818
		key = 3.5 -0.065860
		key = 3.6 -0.138495
		key = 3.7 -0.213086
		key = 3.8 -0.289635
		key = 3.9 -0.368140
		key = 4.0 -0.448602
		key = 4.1 -0.531021
		key = 4.2 -0.615396
		key = 4.3 -0.701729
		key = 4.4 -0.790018
		key = 4.5 -0.880264
		key = 4.6 -0.972466
		key = 4.7 -1.066626
		key = 4.8 -1.162742
		key = 4.9 -1.260815
		key = 5.0 -1.360845
		key = 5.1 -1.462832
		key = 5.2 -1.566775
		key = 5.3 -1.672676
		key = 5.4 -1.780533
		key = 5.5 -1.890347
	}
	// slight sweep to blades
	CtMach
	{
		key = 0.00	0.884580047806676	0	0.00184547124087849
		key = 0.05	0.884856868492807	0.00370663055501856	0.00370663055501856
		key = 0.10	0.885692036973181	0.00747686254424377	0.00747686254424377
		key = 0.15	0.887099927256081	0.0113777901664595	0.0113777901664595
		key = 0.20	0.889105374023119	0.0154838968585476	0.0154838968585476
		key = 0.25	0.891745096313645	0.0198818406280806	0.0198818406280806
		key = 0.30	0.895069926211543	0.0246768021000062	0.0246768021000062
		key = 0.35	0.899148136943647	0.0300014288008454	0.0300014288008454
		key = 0.40	0.904070354851797	0.0212503962343561	0.0212503962343561
		key = 0.45	0.905523255813954	0.0145329256878087	0.0145329256878087
		key = 0.50	0.908430232558139	0.0193798449612404	0.0193798449612404
		key = 0.55	0.911337209302326	0.0242248062015504	0.0242248062015504
		key = 0.60	0.915697674418605	0.0387596899224803	0.0387596899224803
		key = 0.65	0.92296511627907	0.0484496124031008	0.0484496124031008
		key = 0.70	0.930232558139535	0.109011627906977	0.109011627906977
		key = 0.75	0.955668604651163	0.169573643410853	0.169573643410853
		key = 0.80	0.981104651162791	0.116279069767442	0.116279069767442
		key = 0.85	0.990552325581395	0.0629844961240307	0.0629844961240307
		key = 0.90	1	0	0
		key = 0.95	0.999	-0.0166666666666668	-0.0166666666666668
		key = 1.00	0.995	-0.0966666666666667	-0.0966666666666667
		key = 1.05	0.97	-0.145576183312777	-0.145576183312777
		key = 1.10	0.951327145006167	-0.445187363106952	-0.445187363106952
		key = 1.15	0.836443791067914	-0.631061806837112	-0.631061806837112
		key = 1.20	0.762008602955033	-0.428549897453373	-0.428549897453373
		key = 1.25	0.707878821831902	-0.3207098592504	-0.3207098592504
		key = 1.30	0.665795645179913	-0.254200764902862	-0.254200764902862
		key = 1.35	0.631618592361044	-0.209332723206108	-0.209332723206108
		key = 1.40	0.602995828218081	-0.143905359030401	-0.143905359030401
		key = 2.00	0.42840970542419	-0.0484961452205253	0
	}
	CpMach
	{
		key = 0.00	1.15853658536585	0	-0.189701897018971
		key = 0.05	1.13008130081301	-0.18970189701897	-0.18970189701897
		key = 0.10	1.10162601626016	-0.169376693766938	-0.169376693766938
		key = 0.15	1.07926829268293	-0.149051490514905	-0.149051490514905
		key = 0.20	1.05691056910569	-0.176151761517615	-0.176151761517615
		key = 0.25	1.02642276422764	-0.203252032520325	-0.203252032520325
		key = 0.30	0.995934959349594	-0.18970189701897	-0.18970189701897
		key = 0.35	0.969512195121951	-0.176151761517616	-0.176151761517616
		key = 0.40	0.943089430894309	-0.115176151761518	-0.115176151761518
		key = 0.45	0.934959349593496	-0.0542005420054196	-0.0542005420054196
		key = 0.50	0.926829268292683	-0.0474254742547424	-0.0474254742547424
		key = 0.55	0.920731707317073	-0.0406504065040654	-0.0406504065040654
		key = 0.60	0.914634146341463	-0.003387533875339	-0.003387533875339
		key = 0.65	0.919715447154472	0.0338753387533878	0.0338753387533878
		key = 0.70	0.92479674796748	0.0474254742547423	0.0474254742547423
		key = 0.75	0.933943089430894	0.0609756097560972	0.0609756097560972
		key = 0.80	0.943089430894309	0.125338753387534	0.125338753387534
		key = 0.85	0.971544715447154	0.18970189701897	0.18970189701897
		key = 0.90	1	0.228184281842819	0.228184281842819
		key = 0.95	1.04	0.333333333333335	0.333333333333335
		key = 1.00	1.1	0.433333333333334	0.433333333333334
		key = 1.05	1.17	0.333333333333333	0.333333333333333
		key = 1.10	1.2	0.217209686243199	0.217209686243199
		key = 1.15	1.23516290587296	-0.0324587975549136	-0.0324587975549136
		key = 1.20	1.19026236073353	-0.252594301627814	-0.252594301627814
		key = 1.25	1.15938461538462	-0.179415547292234	-0.179415547292234
		key = 1.30	1.13643769654586	-0.136289067614557	-0.136289067614557
		key = 1.35	1.11849789510025	-0.108251256929301	-0.108251256929301
		key = 1.40	1.10396231946707	-0.0702744643511854	-0.0702744643511854
		key = 2.00	1.02540115540099	-0.0218225455739092	0
	}
	MachDrag
	{
		key = 0.00	0.0	0.0	0.0
		key = 0.55	0.0	0.0	0.0
		key = 0.70	0.671544715447154	0.18970189701897	0.18970189701897
		key = 0.75	0.7					0.318428184281844	0.318428184281844
		key = 0.80	0.76707317073171	0.447154471544717	0.447154471544717
		key = 0.85	0.83414634146341	0.535230352303524	0.535230352303524
		key = 0.90	0.92764227642276	0.62330623306233	0.62330623306233
		key = 0.95	1.02113821138211	0.259381511205548	0.0
		key = 1.05	1.02113821138211	0.0					0.0
		key = 1.10	1.00545672978443	-0.210457807713866	-0.210457807713866
		key = 1.15	0.95800086906795	0.0					0.0
	}
}

//alternate propeller, optimized for static thrust for people who want to build drones
PROPELLER
{
	name = DS215-Static
	// Based on GriffonProp, slightly swept, 5 bladed version of P-51 prop
	ixxFTLB = 0.01		//tiny carbon fiber fan, basically nothing
	diameter = 0.195 // 195 mm
	numblades = 11
	
	//minpitch = 23	//very aggressive fixed pitch blades. 23 degrees?
	//maxpitch = 58
	constspeed = 0
	
	// using P-51H prop for now, with scaleup
	// We need a lot of modifiers because this prop model is not a good fit
	ct_factor = 10.9
	cp_factor = 6.82
	
	cThrustFP
	{
		key = 0.0 0.299030
		key = 0.1 0.301213
		key = 0.2 0.288216
		key = 0.3 0.263037
		key = 0.4 0.266089
		key = 0.5 0.250565
		key = 0.6 0.228691
		key = 0.7 0.200849
		key = 0.8 0.170138
		key = 0.9 0.138625
		key = 1.0 0.105451
		key = 1.1 0.070812
		key = 1.2 0.035081
		key = 1.3 -0.001705
		key = 1.4 -0.038491
		key = 1.5 -0.075277
		key = 1.6 -0.112064
		key = 1.7 -0.148850
		key = 1.8 -0.185636
		key = 1.9 -0.222422
		key = 2.0 -0.259208
		key = 2.1 -0.295994
		key = 2.2 -0.332780
		key = 2.3 -0.369567
		key = 2.4 -0.406353
		key = 2.5 -0.443139
		key = 2.6 -0.479925
		key = 2.7 -0.516711
		key = 2.8 -0.553497
		key = 2.9 -0.590283
		key = 3.0 -0.627070
		key = 3.1 -0.663856
		key = 3.2 -0.700642
		key = 3.3 -0.737428
		key = 3.4 -0.774214
		key = 3.5 -0.811000
		key = 3.6 -0.847787
		key = 3.7 -0.884573
		key = 3.8 -0.921359
		key = 3.9 -0.958145
		key = 4.0 -0.994931
		key = 4.1 -1.031717
		key = 4.2 -1.068503
		key = 4.3 -1.105290
		key = 4.4 -1.142076
		key = 4.5 -1.178862
		key = 4.6 -1.215648
		key = 4.7 -1.252434
		key = 4.8 -1.289220
		key = 4.9 -1.326006
		key = 5.0 -1.362793
		key = 5.1 -1.399579
		key = 5.2 -1.436365
		key = 5.3 -1.473151
		key = 5.4 -1.509937
		key = 5.5 -1.546723
	}
	cPowerFP
	{
		key = 0.0 0.187957
		key = 0.1 0.177418
		key = 0.2 0.188284
		key = 0.3 0.180741
		key = 0.4 0.184970
		key = 0.5 0.180683
		key = 0.6 0.172309
		key = 0.7 0.158093
		key = 0.8 0.140159
		key = 0.9 0.119570
		key = 1.0 0.095949
		key = 1.1 0.069437
		key = 1.2 0.040417
		key = 1.3 0.009142
		key = 1.4 -0.020156
		key = 1.5 -0.047478
		key = 1.6 -0.076929
		key = 1.7 -0.107451
		key = 1.8 -0.139045
		key = 1.9 -0.171709
		key = 2.0 -0.205444
		key = 2.1 -0.240250
		key = 2.2 -0.276127
		key = 2.3 -0.313075
		key = 2.4 -0.351093
		key = 2.5 -0.390183
		key = 2.6 -0.430344
		key = 2.7 -0.471575
		key = 2.8 -0.513877
		key = 2.9 -0.557251
		key = 3.0 -0.601695
		key = 3.1 -0.647210
		key = 3.2 -0.693796
		key = 3.3 -0.741453
		key = 3.4 -0.790181
		key = 3.5 -0.839979
		key = 3.6 -0.890849
		key = 3.7 -0.942789
		key = 3.8 -0.995801
		key = 3.9 -1.049883
		key = 4.0 -1.105036
		key = 4.1 -1.161261
		key = 4.2 -1.218556
		key = 4.3 -1.276922
		key = 4.4 -1.336358
		key = 4.5 -1.396866
		key = 4.6 -1.458445
		key = 4.7 -1.521095
		key = 4.8 -1.584815
		key = 4.9 -1.649606
		key = 5.0 -1.715469
		key = 5.1 -1.782402
		key = 5.2 -1.850406
		key = 5.3 -1.919481
		key = 5.4 -1.989627
		key = 5.5 -2.060844
	}
	// slight sweep to blades
	CtMach
	{
		key = 0.00	0.884580047806676	0	0.00184547124087849
		key = 0.05	0.884856868492807	0.00370663055501856	0.00370663055501856
		key = 0.10	0.885692036973181	0.00747686254424377	0.00747686254424377
		key = 0.15	0.887099927256081	0.0113777901664595	0.0113777901664595
		key = 0.20	0.889105374023119	0.0154838968585476	0.0154838968585476
		key = 0.25	0.891745096313645	0.0198818406280806	0.0198818406280806
		key = 0.30	0.895069926211543	0.0246768021000062	0.0246768021000062
		key = 0.35	0.899148136943647	0.0300014288008454	0.0300014288008454
		key = 0.40	0.904070354851797	0.0212503962343561	0.0212503962343561
		key = 0.45	0.905523255813954	0.0145329256878087	0.0145329256878087
		key = 0.50	0.908430232558139	0.0193798449612404	0.0193798449612404
		key = 0.55	0.911337209302326	0.0242248062015504	0.0242248062015504
		key = 0.60	0.915697674418605	0.0387596899224803	0.0387596899224803
		key = 0.65	0.92296511627907	0.0484496124031008	0.0484496124031008
		key = 0.70	0.930232558139535	0.109011627906977	0.109011627906977
		key = 0.75	0.955668604651163	0.169573643410853	0.169573643410853
		key = 0.80	0.981104651162791	0.116279069767442	0.116279069767442
		key = 0.85	0.990552325581395	0.0629844961240307	0.0629844961240307
		key = 0.90	1	0	0
		key = 0.95	0.999	-0.0166666666666668	-0.0166666666666668
		key = 1.00	0.995	-0.0966666666666667	-0.0966666666666667
		key = 1.05	0.97	-0.145576183312777	-0.145576183312777
		key = 1.10	0.951327145006167	-0.445187363106952	-0.445187363106952
		key = 1.15	0.836443791067914	-0.631061806837112	-0.631061806837112
		key = 1.20	0.762008602955033	-0.428549897453373	-0.428549897453373
		key = 1.25	0.707878821831902	-0.3207098592504	-0.3207098592504
		key = 1.30	0.665795645179913	-0.254200764902862	-0.254200764902862
		key = 1.35	0.631618592361044	-0.209332723206108	-0.209332723206108
		key = 1.40	0.602995828218081	-0.143905359030401	-0.143905359030401
		key = 2.00	0.42840970542419	-0.0484961452205253	0
	}
	CpMach
	{
		key = 0.00	1.15853658536585	0	-0.189701897018971
		key = 0.05	1.13008130081301	-0.18970189701897	-0.18970189701897
		key = 0.10	1.10162601626016	-0.169376693766938	-0.169376693766938
		key = 0.15	1.07926829268293	-0.149051490514905	-0.149051490514905
		key = 0.20	1.05691056910569	-0.176151761517615	-0.176151761517615
		key = 0.25	1.02642276422764	-0.203252032520325	-0.203252032520325
		key = 0.30	0.995934959349594	-0.18970189701897	-0.18970189701897
		key = 0.35	0.969512195121951	-0.176151761517616	-0.176151761517616
		key = 0.40	0.943089430894309	-0.115176151761518	-0.115176151761518
		key = 0.45	0.934959349593496	-0.0542005420054196	-0.0542005420054196
		key = 0.50	0.926829268292683	-0.0474254742547424	-0.0474254742547424
		key = 0.55	0.920731707317073	-0.0406504065040654	-0.0406504065040654
		key = 0.60	0.914634146341463	-0.003387533875339	-0.003387533875339
		key = 0.65	0.919715447154472	0.0338753387533878	0.0338753387533878
		key = 0.70	0.92479674796748	0.0474254742547423	0.0474254742547423
		key = 0.75	0.933943089430894	0.0609756097560972	0.0609756097560972
		key = 0.80	0.943089430894309	0.125338753387534	0.125338753387534
		key = 0.85	0.971544715447154	0.18970189701897	0.18970189701897
		key = 0.90	1	0.228184281842819	0.228184281842819
		key = 0.95	1.04	0.333333333333335	0.333333333333335
		key = 1.00	1.1	0.433333333333334	0.433333333333334
		key = 1.05	1.17	0.333333333333333	0.333333333333333
		key = 1.10	1.2	0.217209686243199	0.217209686243199
		key = 1.15	1.23516290587296	-0.0324587975549136	-0.0324587975549136
		key = 1.20	1.19026236073353	-0.252594301627814	-0.252594301627814
		key = 1.25	1.15938461538462	-0.179415547292234	-0.179415547292234
		key = 1.30	1.13643769654586	-0.136289067614557	-0.136289067614557
		key = 1.35	1.11849789510025	-0.108251256929301	-0.108251256929301
		key = 1.40	1.10396231946707	-0.0702744643511854	-0.0702744643511854
		key = 2.00	1.02540115540099	-0.0218225455739092	0
	}
	MachDrag
	{
		key = 0.00	0.0	0.0	0.0
		key = 0.55	0.0	0.0	0.0
		key = 0.70	0.671544715447154	0.18970189701897	0.18970189701897
		key = 0.75	0.7					0.318428184281844	0.318428184281844
		key = 0.80	0.76707317073171	0.447154471544717	0.447154471544717
		key = 0.85	0.83414634146341	0.535230352303524	0.535230352303524
		key = 0.90	0.92764227642276	0.62330623306233	0.62330623306233
		key = 0.95	1.02113821138211	0.259381511205548	0.0
		key = 1.05	1.02113821138211	0.0					0.0
		key = 1.10	1.00545672978443	-0.210457807713866	-0.210457807713866
		key = 1.15	0.95800086906795	0.0					0.0
	}
}
