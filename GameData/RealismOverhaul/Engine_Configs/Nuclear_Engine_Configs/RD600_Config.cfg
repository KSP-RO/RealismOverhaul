//	==================================================
//	RD-600
//
//	Manufacturer: Lewis Research Center
//
//	=================================================================================
//	RD-600
//	
//
//	Dry Mass: 17000 kg		calls for wildly optimistic 100kg/tf. Using 1000kg/tf instead
//	Thrust (SL): ??? kN
//	Thrust (Vac): 166.71 kN		17 tf, because 600 tf from earlier design is unusably large
//	ISP: 1438 SL / 2000 Vac
//	Burn Time: 3600
//	Chamber Pressure: 49.03 MPa
//	Chamber Temp: ~8000 K
//	Propellant: LH2
//	Prop Ratio: N/A
//	Throttle: N/A
//	Nozzle Ratio: 500?
//	Ignitions: ???
//	=================================================================================

//	Sources:

//	https://www.projectrho.com/public_html/rocket/enginelist2.php
//	http://engine.aviaport.ru/issues/06/page12.html
//	http://engine.aviaport.ru/issues/05/page41.html

//	Used by:

//	Notes:

//	Claimed performance of 100kg/tf is very high, and exceeds that of any other gas core NTR proposal
//	Use 1000 kg/tf instead, which reduces TWR to levels similar to lightbulb and various NASA vortex cores

//	Lithium dopant used to improve heat transfer and to let MHD easily pull power from propellant.
//	Mass flow unknown, assume same as Lightbulb seed mass flow (~3.9%)

//	Using the seemingly newer proposal for a 17 tf engine, because the original proposal for a 600 tf engine
//	is unusably large (although I'm sure some will disagree)

//	Assume ~same fuel loss rate as liquid cores
//	==================================================

@PART[*]:HAS[#engineType[RD600]]:FOR[RealismOverhaulEngines]
{
	%category = Engine
	%title = #roRD600Title	//RD-600 Open Cycle Gas Core Atomic Rocket Motor
	%manufacturer = #roMfrKBEnergomash
	%description = #roRD600Desc

	@tags ^= :$: ussr glushko energomash rd-600 nuclear pump upper lqdhydrogen

	%specLevel = concept

	@MODULE[ModuleEngines*]
	{
		%EngineType = LiquidFuel
	}

	@MODULE[ModuleGimbal]
	{
		%gimbalRange = 3.0
		%useGimbalResponseSpeed = True
		%gimbalResponseSpeed = 16
	}

	!MODULE[Module*EngineConfigs],*{}
	!MODULE[ModuleAlternator],*{}
	!MODULE[ModuleResourceConverter],*{}
	!MODULE[ModuleHybridEngine],*{}
	!RESOURCE,*{}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = RD-600
		modded = False
		origMass = 17.0	//17000 kg - 193.7 kg uranium

		CONFIG
		{
			name = RD-600
			specLevel = concept
			minThrust = 166.71
			maxThrust = 166.71
			massMult = 1.0
			throttleResponseRate = 0.055 // Should be around 30 seconds to ramp up from 0% thrust to 100% thrust.

			ullage = True
			pressureFed = False
			ignitions = 10

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 100.0
			}

			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 1.0
				DrawGauge = True
			}
			PROPELLANT
			{
				name = EnrichedUranium	//1:250 Uranium:Hydrogen flow? Also should be U-233 but oh well
				ratio = 0.00002583
				DrawGauge = True
				//don't ignore for ISP, reactor material in exhaust is limiting factor in performance?
			}

			atmosphereCurve
			{
				key = 0 2000
				key = 1 1438
			}
			%chamberNominalTemp = 8000
			%maxEngineTemp = 10000
			
			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				ratedBurnTime = 3600
				ratedBurnTime = 18000

				explicitDataRate = True
				ignitionReliabilityStart = 0.99
				ignitionReliabilityEnd = 0.999997
				ignitionDynPresFailMultiplier = 0.1
				cycleReliabilityStart = 0.999
				cycleReliabilityEnd = 0.999997
				reliabilityMidV = 0.8
				reliabilityMidH = 0.1
				reliabilityMidTangentWeight = 0
			}
		}
	}

	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Brayton Generator
		StartActionName = Start Brayton Generator
		StopActionName = Stop Brayton Generator
		AlwaysActive = False
		FillAmount = 1.0
		AutoShutdown = False
		GeneratesHeat = True
		TemperatureModifier = 2.0
		UseSpecializationBonus = False
		DefaultShutoffTemp = 0.75

		INPUT_RESOURCE
		{
			ResourceName = UraniumNitride
			Ratio = 2.163e-14
		}

		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 200.0		//20 MW MHD while engine running, 200 kW brayton cycle when engine off.
		}

		OUTPUT_RESOURCE
		{
			ResourceName = DepletedFuel
			Ratio = 2.163e-14
		}
	}

	RESOURCE
	{
		name = EnrichedUranium
		amount = 18.23		//~200 kg
		maxAmount = 18.23
		isTweakable = False
	}
	
	//Allow refueling with NFE
	//LNTRs relatively easy to refuel
	MODULE:NEEDS[NearFutureElectrical]
	{
		name = RadioactiveStorageContainer
		DangerousFuel = DepletedFuel
		SafeFuel = EnrichedUranium
		EngineerLevelForSafe = 1
		EngineerLevelForDangerous = 1
		MaxTempForTransfer = 450
		HeatFluxPerWasteUnit = 5
	}

	//no depleted fuel. Poisons boil out of engine!
}
