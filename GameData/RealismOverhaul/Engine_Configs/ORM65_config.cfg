//	==================================================
//	AJ10 Mid
//
//	Manufacturer: Glushko (NII-3)
//
//	=================================================================================
//	ORM-65
//	
//
//	Dry Mass: 14.3 Kg
//	Thrust (SL): 1.750 kN
//	Thrust (Vac): 1.942 kN
//	ISP: 210 SL / 233 Vac	//calculated with RPA, assuming same combustion efficiency as WAC-Corporal
//	Burn Time: 80
//	Chamber Pressure: 2.53 MPa
//	Propellant: AK20 / Kerosene
//	Prop Ratio: 4.0
//	Throttle: 100% to 28.6% (0.5 kN)
//	Nozzle Ratio: ???
//	Ignitions: 1
//	=================================================================================
//	RDA-1-150
//	RP-318 rocket plane
//
//	Dry Mass: 12.3 Kg
//	Thrust (SL): 1.431 kN
//	Thrust (Vac): 1.588 kN
//	ISP: 210 SL / 233 Vac	//calculated with RPA, assuming same combustion efficiency as WAC-Corporal
//	Burn Time: 200
//	Chamber Pressure: 2.53 MPa
//	Propellant: AK20 / Kerosene
//	Prop Ratio: 4.0
//	Throttle: 100% to 34.2% (0.49 kN)
//	Nozzle Ratio: ???
//	Ignitions: 2
//	=================================================================================
//	RDA-1-300
//	planned upgrade for RP-318 rocket plane
//
//	Dry Mass: 12.3 Kg
//	Thrust (SL): 2.862? kN
//	Thrust (Vac): 3.176 kN
//	ISP: 210 SL / 233 Vac	//calculated with RPA, assuming same combustion efficiency as WAC-Corporal
//	Burn Time: 200
//	Chamber Pressure: 2.53 MPa
//	Propellant: AK20 / Kerosene
//	Prop Ratio: 4.0
//	Throttle: 100% to 34.2?% (0.979? kN)
//	Nozzle Ratio: ???
//	Ignitions: 2
//	=================================================================================

//	Sources:


//	russianspaceweb.com - Cruise missile is born in the midst of "Great terror":			http://www.russianspaceweb.com/212.html
//	mentallandscape.com - The R-7 Missile:													http://mentallandscape.com/S_R7.htm
//	Google Books - History of Liquid Propellant Rocket Engines:								https://books.google.com/books?id=s1C9Oo2I4VYC&pg=PA553&lpg=PA553&dq=ORM65&source=bl&ots=eP7bS4fpKW&sig=ACfU3U0TyKrTXW5kLFPosGw--5ipVSnsVg&hl=en&sa=X&ved=2ahUKEwjr26zI7r3mAhXQdN8KHQcoC5AQ6AEwEXoECAkQAQ#v=onepage&q=ORM65&f=false
//	ram-home.com - RP-318-1 (лалЪ-318-1) by S.P.Korolev and A.V.Pallo:						http://ram-home.com/ram-old/rp-318-1.html

//	Used by:

//	*ROEngines

//	Notes:

//	==================================================
@PART[*]:HAS[#engineType[ORM65]]:FOR[RealismOverhaulEngines]
{
	@title = #roORM65Title	//ORM-65
	%manufacturer = #roMfrNII3
	@description = #roORM65Desc	//A very early Soviet rocket engine, designed by Glushko in 1936 for use on the KR-212 cruise missile, and modified for the rocket aircraft RP-318. It was the first reliable, regeneratively cooled rocket.

	@tags ^= :$: USSR nii3 glushko orm-65 rda-1-150 rda-1-300 liquid pressure-fed spaceplane kerosene nitric acid

	%specLevel = operational

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		modded = false
		configuration = ORM-65
		origMass = 0.0143
		CONFIG
		{
			name = ORM-65
			specLevel = operational
			minThrust = 0.693
			maxThrust = 1.942
			massMult = 1.0
			heatProduction = 100
			autoVariationScale = 2	//stated Isp variance of 210-215 is pretty wide. Handbuilt engines in a shed, poor quality control, lots of variance
			useThrottleIspCurve = true

			//Stated performance is almost certainly at sea level. Since throttling drops chamber pressure, and this thing doesn't have much in the
			//first place, throttling will decrease Isp which will in turn decrease thrust even more
			//As such, we don't actually need 28.5% throttle to reach 28.5% thrust
			//1.942 kN * 0.357 throttle * Isp mult 0.800 * SL mult 0.901 = 0.500
			throttleIspCurve
			{
				key = 0.00 0.80 0 0
				key = 0.357 0.80 0 1
				key = 1.0 1.0 1 0
			}
			//Throttles by shutting off injectors, no injector pressure drop, just less complete combustion from lower pressure
			throttleIspCurveAtmStrength 
			{
				key = 0.0 0.035
				key = 1.0 1.0
			}
			
			//only two throttle settings, low and high (and start, but that wasn't used during flight?)
			throttleCurve
			{
				key = 0.000 0.357 0.00 0.00
				key = 0.500 0.357 0.00 0.00
				key = 0.501 1.000 0.00 0.00
				key = 1.000 1.000 0.00 0.00
			}
			
			PROPELLANT
			{
				name = Kerosene
				ratio = 0.3305
				DrawGauge = True
			}
			PROPELLANT
			{
				name = AK20
				ratio = 0.6695
			}

			PROPELLANT
			{
				name = Nitrogen
				ratio = 37.95
				ignoreForIsp = True
			}

			atmosphereCurve
			{
				key = 0 233
				key = 1 210
			}
			
			%ullage = True
			%pressureFed = True
			%ignitions = 1

			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				//reliability largely copied from aerobee, too few tests of ORM-65 to get accurate reliability info
				ratedBurnTime = 80

				// very early engine, assume linear relationship between throttle and burn time
				thrustModifier
				{
					key = 0.00 0.00 1 1
					key = 1.00 1.00 1 1
				}

				ignitionReliabilityStart = 0.9
				ignitionReliabilityEnd = 0.96
				ignitionDynPresFailMultiplier = 10.0
				cycleReliabilityStart = 0.75
				cycleReliabilityEnd = 0.9
			}
		}
		CONFIG
		{
			name = RDA-1-150
			description = Simplified ORM-65 for the RP-318 rocket planes
			specLevel = operational
			minThrust = 0.649
			maxThrust = 1.588
			massMult = 0.86
			autoVariationScale = 2		//stated Isp variance of 210-215 is pretty wide. Handbuilt engines in a shed, poor quality control, lots of variance
			heatProduction = 100
			//Stated performance is almost certainly at sea level. Since throttling drops chamber pressure, and this thing doesn't have much in the
			//first place, throttling will decrease Isp which will in turn decrease thrust even more
			//As such, we don't actually need 34.2% throttle to reach 34.2% thrust
			//1.588 kN * 0.409 throttle * Isp mult 0.838 * SL mult 0.901 = 0.49
			throttleIspCurve
			{
				key = 0.00 0.838 0 0
				key = 0.409 0.838 0 1
				key = 1.0 1.0 1 0
			}
			//Throttles by shutting off injectors, no injector pressure drop, just less complete combustion from lower pressure
			throttleIspCurveAtmStrength 
			{
				key = 0.0 0.035
				key = 1.0 1.0
			}
			
			//only two throttle settings, low and high (and start, but that wasn't used during flight?)
			throttleCurve
			{
				key = 0.000 0.409 0.00 0.00
				key = 0.500 0.409 0.00 0.00
				key = 0.501 1.000 0.00 0.00
				key = 1.000 1.000 0.00 0.00
			}
			
			PROPELLANT
			{
				name = Kerosene
				ratio = 0.3305
				DrawGauge = True
			}
			PROPELLANT
			{
				name = AK20
				ratio = 0.6695
			}

			PROPELLANT
			{
				name = Nitrogen
				ratio = 37.95
				ignoreForIsp = True
			}

			atmosphereCurve
			{
				key = 0 233
				key = 1 210
			}
			
			%ullage = True
			%pressureFed = True
			%ignitions = 2
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.500
			}

			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				//was man rated and flew several times in rocket glider without major incident
				ratedBurnTime = 200

				// very early engine, assume linear relationship between throttle and burn time
				thrustModifier
				{
					key = 0.00 0.00 1 1
					key = 1.00 1.00 1 1
				}

				ignitionReliabilityStart = 0.92
				ignitionReliabilityEnd = 0.98
				ignitionDynPresFailMultiplier = 10.0
				cycleReliabilityStart = 0.90
				cycleReliabilityEnd = 0.96
				techTransfer = ORM-65:50
			}
		}
		CONFIG
		{
			name = RDA-1-300
			description = Uprated RDA-1-300, to allow the RP-318 to take off under its own power. Test site was overrun by the German army before it could be tested.
			specLevel = prototype
			minThrust = 1.300
			maxThrust = 3.176
			massMult = 0.86
			autoVariationScale = 2		//stated Isp variance of 210-215 is pretty wide. Handbuilt engines in a shed, poor quality control, lots of variance
			heatProduction = 100
			//Stated performance is almost certainly at sea level. Since throttling drops chamber pressure, and this thing doesn't have much in the
			//first place, throttling will decrease Isp which will in turn decrease thrust even more
			//As such, we don't actually need 34.2% throttle to reach 34.2% thrust
			//3.176 kN * 0.409 throttle * Isp mult 0.838 * SL mult 0.901 = 0.979
			throttleIspCurve
			{
				key = 0.00 0.838 0 0
				key = 0.409 0.838 0 1
				key = 1.0 1.0 1 0
			}
			//Throttles by shutting off injectors, no injector pressure drop, just less complete combustion from lower pressure
			throttleIspCurveAtmStrength 
			{
				key = 0.0 0.035
				key = 1.0 1.0
			}
			
			//only two throttle settings, low and high (and start, but that wasn't used during flight?)
			throttleCurve
			{
				key = 0.000 0.409 0.00 0.00
				key = 0.500 0.409 0.00 0.00
				key = 0.501 1.000 0.00 0.00
				key = 1.000 1.000 0.00 0.00
			}
			
			
			PROPELLANT
			{
				name = Kerosene
				ratio = 0.3305
				DrawGauge = True
			}
			PROPELLANT
			{
				name = AK20
				ratio = 0.6695
			}

			PROPELLANT
			{
				name = Nitrogen
				ratio = 37.95
				ignoreForIsp = True
			}

			atmosphereCurve
			{
				key = 0 233
				key = 1 210
			}
			
			%ullage = True
			%pressureFed = True
			%ignitions = 2
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.500
			}

			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				//same as RDA-1-150 due to lack of information
				ratedBurnTime = 200

				// very early engine, assume linear relationship between throttle and burn time
				thrustModifier
				{
					key = 0.00 0.00 1 1
					key = 1.00 1.00 1 1
				}

				ignitionReliabilityStart = 0.92
				ignitionReliabilityEnd = 0.98
				ignitionDynPresFailMultiplier = 10.0
				cycleReliabilityStart = 0.90
				cycleReliabilityEnd = 0.96
				techTransfer = RDA-1-150,ORM-65:50
			}
		}
	}
}
