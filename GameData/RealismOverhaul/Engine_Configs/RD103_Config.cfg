//  ==================================================
//  RD-103 series global engine configuration.

//  Inert Mass: 870 Kg (RD-103), 867 Kg (RD-103M)
//  Throttle Range: N/A
//  O/F Ratio: 1.44
//  Burn Time: 130 s (RD-103), 140 s (RD-103M)

//  Sources:

//  NPO Energomash - Liquid rocket engines list:                    http://www.npoenergomash.ru/encikloped/dvizki/
//  Exponenta Educational Mathematical Site - Aeroengines:          http://www.k204.ru/books/Aviadvigatel2.pdf
//  Alternate Wars - The Development of Rocket Engines in the USSR: http://www.alternatewars.com/BBOW/Space_Engines/Germans_USSR_Engines.pdf
//  Liquid Propellant Rocket Engines - Experimental Engines:        http://www.lpre.de/energomash/ED/index.htm
//  Norbert Br√ºgge - Russian liquid propellant engines:             http://www.b14643.de/Spacerockets/Specials/Russian_Rocket_engines/engines.htm
//  Encyclopedia Astronautica - RD-103 engine:                      http://astronautix.com/r/rd-103.html
//  Encyclopedia Astronautica - RD-103M engine:                     http://astronautix.com/r/rd-103m.html

//  Used by:

//  * Ven Stock Revamp

//  Notes:

//  The gimbal range defined here is not a true value, since the actual engine did not have
//  a mechanical gimbal capability for the engine and/or nozzle. Instead, we simulate the
//  operation of the jet vanes used to steer the engine exhaust products.
//  ==================================================

@PART[*]:HAS[#engineType[RD103]]:FOR[RealismOverhaulEngines]
{
	%category = Engine
	%title = RD-103 Series
	%manufacturer = NPO Energomash
	%description = Early Russian Ethalox booster engine, derived from the V-2 engine. Broadly similar to the (similar pedigree) NAA75-110 engine used on the American Redstone, this engine powered the R-5 'Victory' theater ballistic missile series. Diameter: 1.65 m.

	@MODULE[ModuleEngines*]
	{
		%minThrust = 490.33
		%maxThrust = 490.33
		%heatProduction = 100
		%useThrustCurve = False
		%ullage = True
		%pressureFed = False
		%ignitions = 1

		!IGNITOR_RESOURCE,*{}

		!thrustCurve,*{}
	}

	@MODULE[ModuleGimbal],*
	{
		@gimbalRange = 2.0
		%useGimbalResponseSpeed = True
		%gimbalResponseSpeed = 16
	}

	!MODULE[ModuleEngineConfigs],*{}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = RD-103
		origMass = 0.87

		CONFIG
		{
			name = RD-103
			minThrust = 490.33
			maxThrust = 490.33
			heatProduction = 100
			massMult = 1.0
			ullage = True
			pressureFed = False
			ignitions = 1

			PROPELLANT
			{
				name = Ethanol90
				ratio = 0.4945
				DrawGauge = True
			}

			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5055
				DrawGauge = False
			}

			PROPELLANT
			{
				name = HTP
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
			}

			atmosphereCurve
			{
				key = 0 248
				key = 1 220
			}

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}

		CONFIG
		{
			name = RD-103M
			minThrust = 500.14
			maxThrust = 500.14
			heatProduction = 100
			massMult = 1.0
			ullage = True
			pressureFed = False
			ignitions = 1
			cost = 150
			techRequired = engineering101 // In reality, it should be somewhere in between Basic and General rocketry (1952 - 1955).

			PROPELLANT
			{
				name = Ethanol90
				ratio = 0.4945
				DrawGauge = True
			}

			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5055
				DrawGauge = False
			}

			PROPELLANT
			{
				name = HTP
				ratio = 0.01
				ignoreForIsp = True
				DrawGauge = False
			}

			atmosphereCurve
			{
				key = 0 248
				key = 1 220
			}

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}
		}
	}

	!MODULE[ModuleAlternator],{}

	!RESOURCE,*{}
}

//  ==================================================
//  TestFlight compatibility.
//  ==================================================

@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[RD-103]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
	TESTFLIGHT
	{
		name = RD-103
		ratedBurnTime = 130
		ignitionReliabilityStart = 0.8
		ignitionReliabilityEnd = 0.9
		cycleReliabilityStart = 0.85
		cycleReliabilityEnd = 0.93
		reliabilityDataRateMultiplier = 1
	}
}

@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[RD-103M]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]
{
	TESTFLIGHT
	{
		name = RD-103M
		ratedBurnTime = 140
		ignitionReliabilityStart = 0.85
		ignitionReliabilityEnd = 0.93
		cycleReliabilityStart = 0.87
		cycleReliabilityEnd = 0.96
		techTransfer = RD-103:50
		reliabilityDataRateMultiplier = 1
	}
}
