//	==================================================
//	RD-704
//
//	Manufacturer: NPO Energomash [Glushko]
//
//	=================================================================================
//	RD-704
//	Mode 1
//
//	Dry Mass: 2000 Kg
//	Thrust (SL): 2040 kN
//	Thrust (Vac): 2150.6 kN    // [A] VAC values not given, calculating with assumed ISP
//	ISP: 415 SL / 437.5 Vac    // [A] VAC values not given, assuming halfway between Mode 1 SL and Mode 2 VAC *
//	Burn Time: 440
//	Chamber Pressure: 29.42 MPa
//	Propellant: LOX / Kerosene / Hydrogen
//	Prop Ratio: 81.4% LOX, 12.6% Kerosene, 6% Hydrogen
//	Throttle: 100% to 39%
//	Nozzle Ratio: 133.8
//	Ignitions: 1
//	=================================================================================
//	RD-704
//	Mode 2
//
//	Dry Mass: 2000 Kg
//	Thrust (SL): ??? kN
//	Thrust (Vac): 810 kN
//	ISP: 230.5 SL / 461 Vac    // [A] SL values not given, presumably never intended to be used in atmo. Assuming same value
//                              as Mode 1 reduced by half
//	Burn Time: 440
//	Chamber Pressure: 11.964
//	Propellant: LOX / Hydrogen
//	Prop Ratio: 27.5% LOX, 72.5% Hydrogen
//	Throttle: N/A
//	Nozzle Ratio: 133.8
//	Ignitions: 1
//	=================================================================================

//	Sources:

//		NPO Molniya - RD-701 engine:												http://www.buran.ru/htm/rd-701.htm
//		NPO Energomash - RD-701 engine:												http://www.npoenergomash.ru/eng/news/news_22.html
//		Astronautix - RD-701 engine:												http://www.astronautix.com/r/rd-701.html
//		Astronautix - RD-704 engine:												http://www.astronautix.com/r/rd-704.html
//		Dual-Fuel Propulsion in Single-Stage Advanced Manned Launch System Vehicle: https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/19970005058.pdf
//      [A] History of Liquid Propellant Rocket Engines, George P. Sutton, Page 590 Table 8.4-1
//          Sub-Sources:
//              Liquid Propellant Rocket Engines in the Soviet Union, International Academy of Astronautics, Paper 99-2-3-04
//              Rocket Engines from the Glushko Design Bureau, British Interplanetary Society
//              Personal Communications, J. Morehart
//      * I am well aware this is an absolutely terrible method, if anyone has a better idea use it.

//	Used by:

//	Soviet Engines

//	Notes:

//	==================================================
@PART[*]:HAS[#engineType[RD704]]:FOR[RealismOverhaulEngines]
{
	%category = Engine
	%title = RD-704
	%manufacturer = NPO Energomash [Glushko]
	%description = A staged combustion tripropellant liquid fuel engine using Kerosene, liquid Hydrogen and liquid Oxygen. This is the single chamber version of the RD-701, originally developed for the MAKS space plane. In the booster phase of the ascent it uses a mixture of Kerosene with liquid Hydrogen and it switches to pure Hydrogen for the sustainer phase.
	@tags ^= :$: booster energomash throttle tripropellant upper

	@MODULE[ModuleEngines*]
	{
		%EngineType = LiquidFuel
	}

	!MODULE[ModuleEngineConfigs],*{}
	!MODULE[ModuleAlternator],*{}
	!RESOURCE,*{}

	@MODULE[ModuleGimbal]
	{
		%gimbalRange = 5.0
		%useGimbalResponseSpeed = true
		%gimbalResponseSpeed = 16
	}

	MODULE
	{
		name = ModuleHybridEngine
		type = ModuleEngines
		configuration = RD704-Mode-1
		origMass = 2
		modded = False

		CONFIG
		{
			name = RD704-Mode-1
			minThrust = 838.6
			maxThrust = 2150.2
			heatProduction = 100
			massMult = 1.0

			ullage = True
			pressureFed = False
			ignitions = 1

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.25
			}

			IGNITOR_RESOURCE
			{
				name = TEATEB
				amount = 1.0
			}

			PROPELLANT
			{
				name = Kerosene
				ratio = 0.126
				DrawGauge = True
			}

			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.06
				DrawGauge = True
			}

			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.814
				DrawGauge = False
			}

			atmosphereCurve
			{
				key = 0 437.5
				key = 1 415
			}
		}

		CONFIG
		{
			name = RD704-Mode-2
			minThrust = 810
			maxThrust = 810
			heatProduction = 100
			massMult = 1.0

			ullage = True
			pressureFed = False
			ignitions = 1

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.5
			}

			PROPELLANT
			{
				name = LqdHydrogen
				ratio = 0.7252
				DrawGauge = True
			}

			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.2748
				DrawGauge = False
			}

			atmosphereCurve
			{
				key = 0 461
				key = 1 230.5
			}
		}
	}

	RESOURCE
	{
		name = TEATEB
		amount = 1.0
		maxAmount = 1.0
		isTweakable = False
	}
}
