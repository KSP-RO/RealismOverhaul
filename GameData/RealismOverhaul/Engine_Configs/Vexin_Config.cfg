//	==================================================
//	Vexin/Valois Engine
//
//	Manufacturer: LRBA
//
//	=================================================================================
//	Vesta
//	Super-Veronique sounding rocket
//
//	Dry Mass: 200? kg	//guess? basically just bigger Veronique
//	Thrust (SL): 141.2 kN
//	Thrust (Vac): 160 kN	[6] 160 kN Vac?
//	ISP: 203 SL / 230 Vac	[1] 189/208. Listed performance is very bad. Assume same as Vexin?
//	Burn Time: 56
//	Chamber Pressure: 1.76? MPa
//	Propellant: IWFNA / Turpentine
//	Prop Ratio: 3.16?		same as Vexin?
//	Throttle: N/A
//	Nozzle Ratio: 3.6		same as Vexin?
//	Ignitions: 1
//	=================================================================================
//	Vexin
//	First stage for Emeraude, Saphir, and Diamant
//
//	Dry Mass: 300? kg	//guess? basically just bigger Veronique
//	Thrust (SL): 273.7 kN		[A, p.791] 283 kN SL. [2] 274 kN SL, 310 kN vac. [8] 273.7 kN SL, 310.1 kN vac.
//	Thrust (Vac): 310.1 kN
//	ISP: 203 SL / 230 Vac	[A, p.791] 203 SL. [2] 203 SL. [8] 203 SL, 230 Vac
//	Burn Time: 96		[2] 93. [8] 93
//	Chamber Pressure: 1.76 MPa	[A, p.791] 17.6 Bar. [5] 17.6 bar
//	Propellant: IWFNA / Turpentine	[A, p.791]
//	Prop Ratio: 3.16		[2] 9700 kg acid/3070 kg gasoline = 3.16
//	Throttle: N/A
//	Nozzle Ratio: 3.6		[2] 3.6
//	Ignitions: 1
//	===================================================================================
//	Coralie?
//	Second stage for Europa
//
//	Dry Mass: 350? kg	//A little heavier for vac nozzles
//	Thrust (SL): ??? kN
//	Thrust (Vac): 268 kN	[A, p.791] 70 kNx4 = 280 kN. [9] 268 kN vac
//	ISP: 164 SL / 281 Vac	[A, p.791] 281 Vac. [9] 280 Vac. SL calculated with RPA
//	Burn Time: 103			[9]
//	Chamber Pressure: 1.38 MPa	[A, p.791] 13.7 Bar
//	Propellant: NTO / UDMH		[A, p.791]
//	Prop Ratio: 2.06			same as Valois?
//	Throttle: 82.2 kN start/terminal setting (18480 lbf) [A, p.791]
//	Nozzle Ratio: 9				estimated with RPA, assuming same overall performance as Valois
//	Ignitions: 1
//	===================================================================================
//	Valois
//	First stage for Amethyste, Diamant-B
//
//	Dry Mass: 300? kg	//guess? basically just bigger Veronique
//	Thrust (SL): 344 kN		[A, p.791] 344 kN SL. [3] 31.5 tonf = 308.9 kN. [8] 347.9 kN SL, 407.7 kN vac
//	Thrust (Vac): 406.8 kN
//	ISP: 221 SL / 259 Vac	[A, p.791] 219 SL. [8] 221 SL, 259 Vac
//	Burn Time: 116			[3] 116
//	Chamber Pressure: 1.96 MPa	[A, p.791] 19.6 Bar
//	Propellant: NTO / UDMH		[A, p.791] [3]
//	Prop Ratio: 2.06			[7] 12.134 tons/5.897 tons = 2.06
//	Throttle: N/A
//	Nozzle Ratio: 3.6			same as Vexin?
//	Ignitions: 1
//	===================================================================================

//	Sources:

//	[1] http://www.b14643.eu/Spacerockets/Specials/European_Rocket_engines/engines.htm
//	[2] https://web.archive.org/web/20190320203103/http://www.capcomespace.net/dossiers/espace_europeen/ariane/espace_francais/diamant_A.htm
//	[3] https://web.archive.org/web/20190320203108/http://www.capcomespace.net/dossiers/espace_europeen/ariane/espace_francais/diamant_B.htm
//	[4] https://books.google.si/books?id=wRujBQAAQBAJ&pg=PR3&lpg=PR3&dq=propulsion+re-entry+physics+proceedings (search for "Valois")
//	[5] https://web.archive.org/web/20231003173037/http://nospremieresannees.fr/lanceurs/06_diamant/lafa_developpement/lafa2-caractechniques_perinnelle/texte01.html
//	[6] http://www.sat-net.com/serra/lrba_e.htm#L_Vest
//	[7] https://www.russianspaceweb.com/diamant.html
//	[8] https://b14643.eu/Spacerockets_1/West_Europe/Diamant/Description/Frame.htm
//	[9] http://www.sat-net.com/serra/cora_e.htm
//	[A] History of Liquid Propellant Rocket Engines, George P. Sutton
//
//	Used by:
//
//	Notes:
//	* Functionally the same pressurization system as Veronique, although a little simplified, injecting pure water into a gas generator to generate
//	warm gasses for tank pressurization [A, p.790]
//	* Vesta might not be that closely related?
//	* Coralie used 4 hinged TCs to shorten the stage, but the feed systems and overall design was otherwise taken from Valois? [A, p.791]
//	* Coralie had a 18,480 low thrust mode for startup and shutdown, achieved with 2-position propellant valves [A, p.791]
//	* Diamant No1 carried 120 Liters of water and 116 kg of powder for the gas generator [5]
//	* Diamant No1 had 6 degrees of gimbal [5]
//	* flow coefficient gasoline/acid = 0.3

//	Water:
//	Diamant No1 (Vexin) carried 120 liters of water and 116 kg of solid propellant to run the gas generator. Since we can't easily simulate the
//	solid propellant, just assume it's all water (for 236 liters of water total).
//	Scale all the other engines based on chamber pressure, they probably also used similar systems.
//	==================================================

@PART[*]:HAS[#engineType[Vexin]]:FOR[RealismOverhaulEngines]
{
	%title = #roVexinTitle	//Vesta/Vexin/Valois
	%manufacturer = #roMfrLRBA
	%description = #roVexinDesc	//An early French hypergolic engines that propelled the Diamant series of rockets, first flown in 1965. Early models used nitric acid and turpentine while later versions (called Valois, first flown in 1970) used UDMH and N2O4 for higher thrust and specific impulse. The "Vesta" config doesn't gimbal!

	@tags ^= :$: france europe lrba vesta vexin valois liquid pressure-fed booster turpentine udmh nitric acid nto

	%specLevel = operational

	@MODULE[ModuleEngines*]
	{
		%EngineType = LiquidFuel
	}
	
	!MODULE[ModuleAlternator]{}
	
	!RESOURCE,*{}
	
	@MODULE[ModuleGimbal]
	{
		%gimbalRange = 6.0
		%useGimbalResponseSpeed = true
		%gimbalResponseSpeed = 4
	}

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = Vesta
		origMass = 0.300
		modded = False

		CONFIG
		{
			name = Vesta
			description = Used for the "Super-Veronique" Vesta sounding rocket. Has no gimbal
			specLevel = operational
			minThrust = 160
			maxThrust = 160
			heatProduction = 100
			massMult = 0.6667

			ullage = True
			pressureFed = True
			ignitions = 1
			gimbalRange = 0
			useEngineResponseTime = True
			engineAccelerationSpeed = 0.9

			IGNITOR_RESOURCE
			{
				name = Furfuryl
				amount = 1
			}

			PROPELLANT
			{
				name = Turpentine
				ratio = 0.3548
				DrawGauge = True
			}

			PROPELLANT
			{
				name = IWFNA
				ratio = 0.6452
				DrawGauge = False
			}

			PROPELLANT
			{
				name = Water
				ratio = 0.02211
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			//add some token amount of Helium so you have to use a HP tank
			PROPELLANT
			{
				name = Helium
				ratio = 0.0001
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			atmosphereCurve
			{
				key = 0 230
				key = 1 203
			}

			//5 flights, 0 failures
			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				testedBurnTime = 73	//Assume same 130% rating as early AJ10
				ratedBurnTime = 56
				safeOverburn = true
				ignitionReliabilityStart = 0.841667
				ignitionReliabilityEnd = 0.975000
				cycleReliabilityStart = 0.841667
				cycleReliabilityEnd = 0.975000
				techTransfer = Veronique61,VeroniqueAGI,Veronique:40
			}
		}

		CONFIG
		{
			name = Vexin
			description = First stage engine for the "precious stones" series of sounding rockets, culminating in the Diamant Launch Vehicle.
			specLevel = operational
			minThrust = 310.1
			maxThrust = 310.1
			heatProduction = 100
			massMult = 1.0

			ullage = True
			pressureFed = True
			ignitions = 1
			gimbalRange = 6.0
			useEngineResponseTime = True
			engineAccelerationSpeed = 0.9

			IGNITOR_RESOURCE
			{
				name = Furfuryl
				amount = 1
			}

			PROPELLANT
			{
				name = Turpentine
				ratio = 0.3548
				DrawGauge = True
			}

			PROPELLANT
			{
				name = IWFNA
				ratio = 0.6452
				DrawGauge = False
			}

			PROPELLANT
			{
				name = Water
				ratio = 0.02211
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			//add some token amount of Helium so you have to use a HP tank
			PROPELLANT
			{
				name = Helium
				ratio = 0.0001
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			atmosphereCurve
			{
				key = 0 230
				key = 1 203
			}

			//Emeraude: 5 flights, 3 failures
			//Saphir: 15 flights, 0 failures (all failures seem to be second stage failures?)
			//Diamant-A: 4 flights, 0 failures
			//9 engines, 3 failures
			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				testedBurnTime = 125	//Assume same 130% rating as early AJ10
				ratedBurnTime = 96
				safeOverburn = true
				ignitionReliabilityStart = 0.962000
				ignitionReliabilityEnd = 0.994000
				cycleReliabilityStart = 0.962000
				cycleReliabilityEnd = 0.994000
				techTransfer = Vesta,Veronique61,VeroniqueAGI,Veronique:40
			}
		}

		CONFIG
		{
			name = Coralie
			description = Modified Valois, modified for vacuum use and converted to 4 chambers for use on the 2nd stage of the Europa rocket.
			specLevel = operational
			minThrust = 268
			maxThrust = 268
			heatProduction = 100
			massMult = 1.1667

			ullage = True
			pressureFed = True
			ignitions = 1
			gimbalRange = 5.0
			useEngineResponseTime = True
			engineAccelerationSpeed = 0.9

			PROPELLANT
			{
				name = UDMH
				ratio = 0.4679
				DrawGauge = True
			}

			PROPELLANT
			{
				name = NTO
				ratio = 0.5321
				DrawGauge = False
			}

			PROPELLANT
			{
				name = Water
				ratio = 0.01734
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			//add some token amount of Helium so you have to use a HP tank
			PROPELLANT
			{
				name = Helium
				ratio = 0.0001
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			atmosphereCurve
			{
				key = 0 281
				key = 1 164
			}

			//Cora: 2.5 flights, 0 failures (no engine failures, but removing half a flight due to early shutdown from avionics issue)
			//Europa I: 5 flights, 2 failures (??)
			//Europa II: 1 flights, 0 failures
			//8.5 ignitions, 0 failures
			//8.5 cycles, 2 failures
			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				testedBurnTime = 155	//Assume 150% rating
				ratedBurnTime = 103
				safeOverburn = true
				ignitionReliabilityStart = 0.900000
				ignitionReliabilityEnd = 0.984211
				cycleReliabilityStart = 0.750000
				cycleReliabilityEnd = 0.942105
				techTransfer = Vexin,Vesta,Veronique61,VeroniqueAGI,Veronique:40
			}
		}

		CONFIG
		{
			name = Valois
			description = Upgraded version of Vexin, used in the first stage of the Amethyste sounding rocket and Diamant-B launch vehicle.
			specLevel = operational
			minThrust = 406.8
			maxThrust = 406.8
			heatProduction = 100
			massMult = 1.0

			ullage = True
			pressureFed = True
			ignitions = 1
			gimbalRange = 6.0
			useEngineResponseTime = True
			engineAccelerationSpeed = 0.9

			PROPELLANT
			{
				name = UDMH
				ratio = 0.4679
				DrawGauge = True
			}

			PROPELLANT
			{
				name = NTO
				ratio = 0.5321
				DrawGauge = False
			}

			PROPELLANT
			{
				name = Water
				ratio = 0.02462
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}

			//add some token amount of Helium so you have to use a HP tank
			PROPELLANT
			{
				name = Helium
				ratio = 0.0001
				ignoreForIsp = True
				DrawGauge = False
				resourceFlowMode = STACK_PRIORITY_SEARCH
			}


			atmosphereCurve
			{
				key = 0 259
				key = 1 221
			}

			//Diamant-B: 5 flights, 0 failures
			//Diamant-BP.4: 3 flights, 0 failures
			//8 engines, 0 failures
			TESTFLIGHT:NEEDS[TestLite|TestFlight]
			{
				testedBurnTime = 174	//Assume 150% rating
				ratedBurnTime = 116
				safeOverburn = true
				ignitionReliabilityStart = 0.916667
				ignitionReliabilityEnd = 0.983333
				cycleReliabilityStart = 0.916667
				cycleReliabilityEnd = 0.983333
				techTransfer = Coralie,Vexin,Vesta,Veronique61,VeroniqueAGI,Veronique:40
			}
		}
	}
}
