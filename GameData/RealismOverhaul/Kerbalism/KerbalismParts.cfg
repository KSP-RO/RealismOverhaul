// ==============================================================================
// Add predetermined Life Support to parts
// ==============================================================================

//Mercury
@PART[FASAMercuryPod|mk1pod|mk1pod_v2]:NEEDS[ProfileRealismOverhaul,FASA]:FOR[Kerbalism]
{
  MODULE
  {
    name = ProcessController
    resource = _NonRegenScrubber
    title = Scrubber
    capacity = 1.0
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = 1.0
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.0
  }
  
  @MODULE[Habitat]
  {
  	volume = 1.56
	surface = 3.85    //guesstimate
  }
  
    MODULE
  {
    name = Configure
    title = Mercury Pod
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. <b>WARNING: Only lasts 2 days!</b>
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _NonRegenScrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }  
}

//Gemini
@PART[FASAGeminiPod2|FASAGeminiPod2White]:NEEDS[ProfileRealismOverhaul,FASA]:FOR[Kerbalism]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.4
  }
  
  @MODULE[Habitat]
  {
  	volume = 2.26
	surface = 5.89  //guesstimate
  }
  
  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = Gemini Pod
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}

@PART[RO-Mk1Cockpit|RO-Mk1CockpitInline]:NEEDS[ProfileRealismOverhaul]:FOR[Kerbalism]
{ 
	MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.4
  }
  
  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }

  @MODULE[Habitat]
  {
	volume = 2.32       //guesstimate
	surface = 6.01    //guesstimate
  }
  
  MODULE
  {
    name = Configure
    title = Mk1 Cockpit (Gemini Level)
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}

@PART[ROAdvCapsule]:NEEDS[ProfileRealismOverhaul]:FOR[Kerbalism]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.4
  }
  
  @MODULE[Habitat]
  {
  	volume = 2.26
	surface = 5.89  //guesstimate
  }
  
  MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = K2 Pod
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Its operational life <b>can</b> be increased by adding additional LiOH tanks.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Early Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }
}

//Apollo
@PART[FASAApollo_CM]:NEEDS[ProfileRealismOverhaul,FASA]:FOR[Kerbalism]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.5
  }
  
  @MODULE[Habitat]
  {
  	volume = 5.9
	surface = 15.71    //guesstimate
  }
  
    MODULE
  {
    name = Comfort
    bonus = panorama
    desc = The windows offer a relaxing panoramic view of the void of space.
  }
  
    MODULE
  {
    name = Configure
    title = Apollo Command Module
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }  
}
@PART[FASALM_AscentStage]:NEEDS[ProfileRealismOverhaul,FASA]:FOR[Kerbalism]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _HumidityControllerEarly
    title = Early Humidity Controller
    capacity = #$/CrewCapacity$
	toggle = true
    running = true
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
  
  @MODULE[Habitat]
  {
  	volume = 4.5
	surface = 18.1    //guesstimate
  }
  
    MODULE
  {
    name = Configure
    title = Lunar Module
    slots = 2
    
    SETUP
    {
      name = LiOH Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }

	SETUP
    {
      name = Humidity Controller
      desc = Removes water from the internal atmosphere, <b>dumping it into space</b>.
      mass = 0.0
      cost = 0

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityControllerEarly
      }
    }
  }  
}

// ==============================================================================
// Add configurable Life Support to Shuttle Cockpit for Testing
// ==============================================================================

@PART[mk3Cockpit_Shuttle]:NEEDS[ProfileRealismOverhaul]:FOR[Kerbalism]
{
  MODULE
  {
    name = ProcessController
    resource = _Scrubber
    title = Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }
  
   MODULE
  {
    name = ProcessController
    resource = _AdvScrubber
    title = Advanced Scrubber
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _PressureControl
    title = Pressure control
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _AirPump
    title = Air Pump
    capacity = #$/CrewCapacity$
    running = true
  }

  MODULE
  {
    name = ProcessController
    resource = _WaterRecycler
    title = Water recycler
    capacity = #$/CrewCapacity$
    running = true
  }
  
 MODULE
  {
    name = ProcessController
    resource = _HumidityController
    title = Humidity Controller
    capacity = #$/CrewCapacity$
    running = true
  }
  
  MODULE
  {
    name = ProcessController
    resource = _FuelCell
    title = Fuel Cell
    capacity = #$/CrewCapacity$
    running = false
  }
  
  @MODULE[ProcessController],*
  {
    @capacity *= 1.67
  }
  
  MODULE
  {
    name = Configure
    title = Pod
    slots = 4
    
    SETUP
    {
      name = Scrubber
      desc = A Lithium Hydroxide scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Apollo level.
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _Scrubber
      }
    }
	
	SETUP
    {
      name = Advanced Scrubber
      desc =  A dual-bed vacuum-exposing regenerative scrubber that sequesters <b>CarbonDioxide</b> from the internal atmosphere. Orion Level.
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AdvScrubber
      }
    }

    SETUP
    {
      name = Pressure Control
      desc = Use <b>Nitrogen</b> to maintain the internal atmosphere at a comfortable pressure.
      tech = start
      mass = 0.01
      cost = 250

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _PressureControl
      }

      // Air pump always is add with pressureControl
      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _AirPump
      }

      RESOURCE
      {
        name = Nitrogen
        amount = #$/CrewCapacity$
        maxAmount = #$/CrewCapacity$
        @amount *= 500  // FIXME 
        @maxAmount *= 500
      }
    }

    SETUP
    {
      name = Water Recycler
      desc = Filter impurities out of <b>WasteWater</b>.
      tech = start
      mass = 0.05
      cost = 500


      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _WaterRecycler
      }

      RESOURCE
      {
        name = WasteWater
        amount = 0
        maxAmount = #$/CrewCapacity$
        @maxAmount *= 5
      }
    }
	
	SETUP
    {
      name = Humidity Controller
      desc = Removes water from the internal atmosphere.
      tech = start
      mass = 0.1
      cost = 1000

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _HumidityController
      }
    }

    SETUP
    {
      name = Fuel Cell
      desc = A fuel cell that burns <b>Liquid Hydrogen</b> and <b>Liquid Oxygen</b>, producing <b>Water</b> as a by-product.
      tech = start
      mass = 0.045
      cost = 1000

      MODULE
      {
        type = ProcessController
        id_field = resource
        id_value = _FuelCell
      }
    }
  }
}

// ==============================================================================
// Set Habitat Volume and Surface area
// ==============================================================================

@PART[RP0Nose-Cockpit|X1_Crew]:NEEDS[ProfileRealismOverhaul]:FOR[Kerbalism]
{ 
	@MODULE[Habitat]
	{
		volume = 1.1       //guesstimate
		surface = 2.3    //guesstimate
	}
}
@PART[Mark1Cockpit|Mark2Cockpit]:NEEDS[ProfileRealismOverhaul]:FOR[Kerbalism]
{ 
	@MODULE[Habitat]
	{
		volume = 1.1       //guesstimate
		surface = 2.3    //guesstimate
	}
}
@PART[RO-Mk1Cockpit]:NEEDS[ProfileRealismOverhaul]:FOR[Kerbalism]
{ 
	@MODULE[Habitat]
	{
		volume = 2.32       //guesstimate
		surface = 6.01    //guesstimate
	}
}
