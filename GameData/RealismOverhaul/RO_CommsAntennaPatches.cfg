// values by Gordon Dry
// tinker with it if you know better values and then commit it
//

// Stock and RO, unmanned  probes
@PART[probeStackSmall|probeStackLarge|probeCoreSphere_v2|probeCoreHex|probeCoreHex_v2|RO_earlyControllableCore|RO_probeCoreCubeEarly|RO_probeCoreCubeMedium|RO_boeing702|probeCoreCube|RO_surveyorCore|HECS2_ProbeCore|GuidanceStart1m|GuidanceStart4m|GuidanceEarly1m|GuidanceEarly2m|GuidanceEarly3m|GuidanceLate1m|mk2DroneCore|roverBody_v2]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// Stock and RO, manned  pods
@PART[landerCabinSmall|landerCabinMedium|MK1CrewCabin|mk1pod|Mark1-2Pod|mk1pod_v2|mk1-3pod|RO-Mk1Cockpit|RO-Mk1CockpitInline|ROAdvCapsule|Mark2Cockpit|mk2LanderCabin|mk2LanderCabin_v2|mk2Cockpit_Standard|mk2CockpitInline|mk3Cockpit_Shuttle|cupola]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RP-1, unmanned  probes
@PART[proceduralAvionics|RP0probeSounding0-3m|RP0aerobeeSounding|RP0-SampleReturnCommand|RP0probeVanguardXray|RP0probeAvionics0-81m|RP0probeAvionics1-5m|RP0probeAvionics3-05m|RP0probeAvionics1-4m|RP0probeAvionics66m]:NEEDS[!RemoteTech,RP-0]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RP-1, manned pods
@PART[RP0Nose-Cockpit]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}


// Coatl Aerospace, integrated omni
@PART[ca_landv_core|ca_landv_orbiter_core]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
    }
}


// Coatl Aerospace, dedicated omni
// ca_landv_hga|ca_landv_orbiter_HGA need conversion to diameter
@PART[ca_vor_comm|antenna_cone_toggle|antenna_quetzal|ca_ant_gps|ca_argo-mk2-mast|ca_landv_omni|ca_landv_hga|ca_landv_orbiter_HGA]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
    }
}

// Coatl Aerospace, dishes
@PART[ca_vor_dish|]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.6
    }
}

@PART[mer_dish]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3.9624
    }
}

@PART[dish_hera]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.25
    }
}

@PART[ca_argo-mk2-hga]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 0.58
    }
}

@PART[dish_deploy_S2]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 0.56
    }
}

@PART[dish_tatsujin]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.9812
    }
}

@PART[dish_quetzal]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.74
    }
}

@PART[dish_xihe]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.2
    }
}

@PART[dish_S]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.65
    }
}

@PART[dish_L]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3.6576
    }
}

// CommNetAntennasExtension, dish
@PART[caeDeployableAntenna]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 0.8
    }
}

//CxAerospace dedicated omni
@PART[CXA_Z1]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0 // it's a truss, could also be 2.0 ?
        isScalable = false
    }
}

//CxAerospace, dish
@PART[CXA_KU_ANTENNA]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.7
    }
}

// FASA, integrated omni
@PART[FASAApolloIU|FASAApalloLFTJ2Plate|FASAApollo_CM|FASALM_AscentStage|FASAAgenaProbe|FASA_Gemini_Lander_Pod|FASAGeminiPod2|FASAGeminiPod2White|FASAICBMProbe|FASAMercuryPod|FASAExplorerProbe|FASAApolloSubSat|FASAPioneerProbe]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// FASA, dedicated omni
@PART[FASALM_Antenna|FASAALSEP_Device|FASAALSEP_Reflector|FASAALSEP_Scanner|FASAAgenaAnt|FASA_Gemini_ASAS_Comp|FASAGeminiAntenna|FASAMercruyCap2|FASAExplorerNosecone|FASAApollo_SubSatAnt|FASAPioneerAnt]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}


// FASA, dish
@PART[FASAApollo_SM_Dish]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3
        isScalable = false
    }
}

// JX2Antenna, dishes
@PART[ju1MDA]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 6.2
        isScalable = false
    }
}

@PART[jw1MDA]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 5.0
        isScalable = false
    }
}

@PART[jx2LDA]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 21.0
        isScalable = false
    }
}

// KerbalGPS, dedicated omni
@PART[FigaroTransmitter|FigaroReceiver]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// MechJeb2
@PART[mumech_MJ2_AR202]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// NAU/ORIGAMI, dishes
@PART[NAU_ORI350Gm]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 4.2
        isScalable = false
    }
}

@PART[NAU_ORI69Gm]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.8
        isScalable = false
    }
}

// NearFutureConstruction, integrated omni
@PART[truss-octo-drone-01]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0 // this is also inside a truss, so it could be 2.0 ??
        isScalable = false
    }
}

// ReStockPlus, integrated omni
@PART[RO-SaturnI-IU|restock-drone-core-375-1]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// ReStockPlus, dishes
@PART[restock-antenna-stack-3]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.3
    }
}

@PART[restock-relay-radial-2]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.08
    }
}

// RN_Cygnus, integrated omni
@PART[rn_cygnus|rn_cygnus_e]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RN_Salyut, integrated omni
@PART[almaz3-5|almaz_sample_return|salyut1-4|salyut6|salyut7]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RN_Salyut, dedicated omni
@PART[salyut_asas]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// RN_Skylab, integrated omni
@PART[skylab]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.0
        isScalable = false
    }
}

// RN_Skylab, dedicated omni
@PART[skylab-trs|skylab_asas]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// RN_Soyuz, integrated omni, unmanned probes
@PART[rn_lok_tdu|ok_sa|ok_tft|tg_sa|rn_tks|rn_vostok_tdu|rn_zond_top]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RN_Soyuz, integrated omni, manned pods
@PART[rn_astp_bo|rn_lk_lander|rn_lok_bo|rn_lok_sa|ok_bo_fem|ok_bo_male|t_af_bo|t_pao|t_pao2|tg_bo|rn_va_capsule|rn_voskhod_sc|rn_vostok_sc|rn_zond_sa]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RN_Soyuz, dedicated omni
@PART[rn_lk_lander_legs|rn_zond_asas]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// RN_Soviet_Probes, integrated omni
@PART[sputnik1|sputnik2|sputnik3|luna2|luna3|molniya1|polyot]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RN_Soviet_Probes, dedicated omni
@PART[luna_radio|l11_radio|luna9_als|luna_als|luna11_als|luna13_als|molniya_asas]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// RN_US_Probes, integrated omni
@PART[rn_huygens|eos_aqua|eos_aura|eos_terra|eos_tdrs|explorer_6|tiros-1|transit2a|galileo_mb|galileo_aprobe|grab-1|ius_top|rn_juno_spacecraft|rn_ladee|rn_lro|rn_mariner1_2|rn_messenger|neo_deepimpact_impactor|neo_ds1|neo_stardust_collector|pioneer_0_1_2|pioneer_3_4|pioneer_5|pioneer_6_7_8_9|rn_surveyor3|vanguard-1|vanguard-2|vanguard-3]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// RN_US_Probes, dedicated omni
// rn_surveyor_solar needs conversion to diameter
@PART[rn_surveyor_solar]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// RN_US_Probes, dishes
@PART[rn_cassini]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3.9624
        isScalable = false
    }
}

@PART[rn_tdrs_ag]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 9.93648
        isScalable = false
    }
}

@PART[gdish_intended]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 4.8768
        isScalable = false
    }
}

@PART[magellan]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3.6576
        isScalable = false
    }
}

@PART[neo_deepimpact]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1
        isScalable = false
    }
}

@PART[neo_dawn]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.524
        isScalable = false
    }
}

@PART[neo_near]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.5
        isScalable = false
    }
}

@PART[neo_stardust]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 0.6096
        isScalable = false
    }
}

@PART[neo_ulysses]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.65
        isScalable = false
    }
}

@PART[rn_new_horizons]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.1
        isScalable = false
    }
}

@PART[pioneer_10_11]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.74
        isScalable = false
    }
}

@PART[rn_voyager]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3.6576
        isScalable = false
    }
}

//RemoteTechRedev/RemoteTech-Antennas, sanity
-PART[RTLongAntenna2]:NEEDS[!RemoteTech,RemoteTech-Antennas]:BEFORE[zzzRealismOverhaul] {}

//RemoteTechRedev/RemoteTech-Antennas, dedicated omni
@PART[RTLongAntenna3]:NEEDS[!RemoteTech,RemoteTech-Antennas]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
    }
}

//RemoteTechRedev/RemoteTech-Antennas, dishes
@PART[RTGigaDish1]:NEEDS[!RemoteTech,RemoteTech-Antennas]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 6
    }
}

@PART[RTGigaDish2]:NEEDS[!RemoteTech,RemoteTech-Antennas]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 5
    }
}

@PART[RTLongDish2]:NEEDS[!RemoteTech,RemoteTech-Antennas]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 2.5
    }
}

@PART[RTShortDish2]:NEEDS[!RemoteTech,RemoteTech-Antennas]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.3
    }
}

// ROCapsules, integrated omni
@PART[ROC-MercuryCM|ROC-ApolloCM|ROC-LEMAscent|ROC-LEMRover|ROC-VoskhodCapsule|ROC-VostokCapsule|ROC-VostokService]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// ROCapsules, dedicated omni
@PART[ROC-MercuryNose|ROC-VostokAntenna]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// ROCapsules, dishes
@PART[ROC-ApolloHGA]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 3
        isScalable = false
    }
}

// SXT, integrated omni, unmanned probes
@PART[SXT375mProbe|SXTSputnik|SXTHECSRanger|SXTAlouetteI|MEMLanderSXT]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// SXT, integrated omni, manned pods
@PART[SXTClyde|SXTBuzzard|SXTke111|25mKossak|SXTmeadowlark|SXTEntenteCordiale|SXTGoose|SXTmk3Cockpit52|SXTOsaulNoseCockpitAn225|SXTOsualRadCockpit]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// SXT, dedicated omni

// Attention
// Failsafe fix patch for https://github.com/KSP-RO/RealismOverhaul/issues/2105
// as long as not merged

@PART[SXTsciencenosecone]:AFTER[RealismOverhaul]
{
	@mass = 0.04
}

@PART[SXTsciencenosecone|SXTAntenna]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// Taerobee, integrated omni, unmanned probes
@PART[taerobee_control|Bumper_Control]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// Taerobee, integrated omni, manned pods
@PART[X1_Crew]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// TokamakIndustries, integrated omni
@PART[TIinflatoFlat|TIorbitalorb]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// UniversalStorage2, integrated omni
@PART[USGuidanceComputer|USGuidanceComputer2|USGuidanceComputer3|USDoubleProbeCore]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// VenStockRevamp, integrated omni
@PART[MK2VApod]:NEEDS[!RemoteTech]:BEFORE[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

//
// now to the generic patches
//
// these patches apply after the dedicated patches, which are BEFORE[zzzRealismOverhaul]

@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[~antennaType[]],!MODULE[ModuleConfigurableAntenna]]:NEEDS[!RemoteTech]:FOR[zzzRealismOverhaul]
{
    @MODULE[ModuleDataTransmitter]
    {
        antennaType = INTERNAL
    }
}

// when it was a RELAY we assume it's a dish for now
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[#antennaType[RELAY]],!MODULE[ModuleConfigurableAntenna]]:NEEDS[!RemoteTech]:FOR[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        diameter = 1.0
        isScalable = false
    }
}

// when it was a DIRECT without ModuleCommand and without ModuleAvionics we assume it's a dedicated omni antenna with higher gain than built-in omni antennas
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[#antennaType[DIRECT]],!MODULE[ModuleCommand],!MODULE[ModuleAvionics],!MODULE[ModuleConfigurableAntenna]]:NEEDS[!RemoteTech]:FOR[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 2.0
        isScalable = false
    }
}

// when it was a DIRECT with ModuleCommand we assume it's a built-in omni antenna with lower gain than dedicated omni antennas
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[#antennaType[DIRECT]],@MODULE[ModuleCommand],!MODULE[ModuleConfigurableAntenna]]:NEEDS[!RemoteTech]:FOR[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// when it was an INTERNAL we assume it's a (built-in) low gain telemetry antenna
@PART[*]:HAS[@MODULE[ModuleDataTransmitter]:HAS[#antennaType[INTERNAL]],!MODULE[ModuleConfigurableAntenna]]:NEEDS[!RemoteTech]:FOR[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 1.0
        isScalable = false
    }
}

// when it's a ModuleAvionics/ModuleCommand without an antenna right now we give it a (built-in) low gain telemetry antenna
@PART[*]:HAS[!MODULE[ModuleDataTransmitter],!MODULE[ModuleConfigurableAntenna],@MODULE[ModuleAvionics],@MODULE[ModuleCommand]]:NEEDS[!RemoteTech]:FOR[zzzRealismOverhaul]
{
    MODULE
    {
        name = ModuleConfigurableAntenna
        referenceGain = 0.5 // @DrVeyl, is this okay?
        isScalable = false
    }
}

// for any part that got ModuleConfigurableAntenna now and still got ModuleDataTransmitter we remove ModuleDataTransmitter
@PART[*]:HAS[@MODULE[ModuleConfigurableAntenna],@MODULE[ModuleDataTransmitter]]:NEEDS[!RemoteTech]:AFTER[zzzRealismOverhaul]
{
    !MODULE[ModuleDataTransmitter],* { }
}
