@RFSETTINGS:FOR[RealismOverhaul]
{
	%usePartNameInConfigUnlock = False
	%varianceAndResiduals = 1.0 // Applies 100% of RF's variation and residuals
	%throttlingRate = 3
	%throttlingClamp = 1.1

	// Deprecated, using new variance and residuals system
	%varyThrust = 0.008 // total of +/- 0.8%
}

//	===============================================================================
//	These are the tanks that are added for the newest versions of RP-1 to utilize
//	the new tooling mechanic and to create a proper mass ratio progression.
//	===============================================================================

//maxMLILayers will be defined by PARTUPGRADEs rather than by tank
TANK_DEFINITION
{
	name = Tank-Sep-Steel
	title = Steel Fuselage
	description = Simple steel tank and fuselage designs were used only on very early rockets such as the German V-2 and its American and Soviet clones. Tank and fuselage tankage is no more advanced than that used in the construction of early airplanes.
	highlyPressurized = False
	basemass = 0.00007 * volume
	baseCost = 0.002 * volume
	addResources = true
	addLead = true
	maxUtilization = 83
	defaultMass = 0.00006
}


TANK_DEFINITION
{
	name = Tank-Sep-Steel-HP
	title = HP Steel Fuselage
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00017 * volume
	baseCost = 0.002 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 75
	defaultMass = 0.00016
}

TANK_DEFINITION
{
	name = Tank-Sep-Al
	title = Al Fuselage
	description = Aluminum tank and fuselage construction was first used on the American Viking sounding rocket and then, perplexingly, on the massive Soviet N-1 lunar rocket.
	highlyPressurized = False
	basemass = 0.00003955 * volume
	baseCost = 0.0022 * volume
	addResources = true
	addLead = true
	maxUtilization = 87
	defaultMass = 0.00004
}

TANK_DEFINITION
{
	name = Tank-Sep-Al-HP
	title = HP Al Fuselage
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00013364 * volume
	baseCost = 0.0022 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 84
	defaultMass = 0.00015
}

TANK_DEFINITION
{
	name = Tank-Sep-Al2
	title = Al Stringer Tank
	description = Aluminum alloy skin-stringer-frame construction is nothing new to the aerospace industry and is the preferred construction of large aircraft today. Longitudinal stringers are responsible for transferring the aerodynamic loads acting on the skin onto the frame. This method of construction does not have mechanically seperate tanks and frame, but the skin of the tank is only responsible for containing the propellant and is not load-bearing. The first rocket of skin-stringer-frame construction was the Soviet R-5 and has remained a staple of Russian design philosophy since, best exemplified in the very successful R-7 family.
	highlyPressurized = False
	basemass = 0.000027 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addLead = true
	maxUtilization = 92
	defaultMass = 0.000027
}

TANK_DEFINITION
{
	name = Tank-Sep-Al2-HP
	title = HP Al Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00010761 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 90
	defaultMass = 0.00012
}

TANK_DEFINITION
{
	name = Tank-Sep-AlCu
	title = Refined Al Stringer Tank
	description = Improved welding and manufacturing techniques developed in the 1960s allowed the use of more advanced aluminum alloys, containing higher fractions of Magnesium, Manganese, and Copper than their predecessors. The increased alloying makes these alloys slightly difficult to work with, but the increased strength allows for the creation of lighter structures. The most famous use of this construction was in the titanic and powerful S-IC, the first stage of the Saturn V lunar rocket, but it was also used in the early versions of the Shuttle External Tank.
	highlyPressurized = False
	basemass = 0.00002 * volume
	baseCost = 0.003 * volume
	addResources = true
	addLead = true
	maxUtilization = 92
	defaultMass = 0.00002
}

TANK_DEFINITION
{
	name = Tank-Sep-AlCu-HP
	title = HP Refined Al Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000804348 * volume
	baseCost = 0.003 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 90
	defaultMass = 0.00009
}

TANK_DEFINITION
{
	name = Tank-Sep-AlLi
	title = Al-Li Stringer Tank
	description = Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense while being stronger than most other Al alloys. However, they are much more expensive and their metallurgical properties can present great difficulties to work with. Al-Li alloys are commonly used in modern aerospace applications, and all Al-Li skin-stringer construction was used for the final version of the Shuttle External Tank, the Super Lightweight Tank.
	highlyPressurized = False
	basemass = 0.0000155 * volume
	baseCost = 0.0045 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000155
}

TANK_DEFINITION
{
	name = Tank-Sep-AlLi-HP
	title = HP Al-Li Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000445361 * volume
	baseCost = 0.0045 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.00005
}

TANK_DEFINITION
{
	name = Tank-Sep-Stir
	title = Refined Al-Li Stringer Tank
	description = Improved construction techniques, such as friction stir welding, allow for additional decreases of tank dry mass. Friction stir welding uses heat generated by the friction of rotating tool to soften and mechanically intermixes two pieces of metal. It is used for structures which need very high weld strength, and has broad application in the aerospace industry. Completely stir-welding a semi-stringer-constructed tank was first used by SpaceX on their Falcon 1e and then Falcon 9 series of rockets. This unique construction allows for the use of fewer structural components and lighter welds, resulting in both mass and cost reductions.
	highlyPressurized = False
	basemass = 0.0000145 * volume
	baseCost = 0.004 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000145
}

TANK_DEFINITION
{
	name = Tank-Sep-Stir-HP
	title = HP Refined Al-Li Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00003959 * volume
	baseCost = 0.004 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.000042
}

TANK_DEFINITION
{
	name = Tank-Sep-Starship
	title = Steel Stir-Welded Tank
	description = This is the all-new 1950's technology that will be used by SpaceX's Starship vehicle & Superheavy booster.
	highlyPressurized = False
	basemass = 0.000018 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.000018
}

TANK_DEFINITION
{
	name = Tank-Sep-Starship-HP
	title = HP Steel Stir-Welded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00005938 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.00008
}

TANK_DEFINITION
{
	name = Tank-Int-Al
	title = Al Gridded Tank
	description = Isogrids and orthogrids are advanced hollowed-out structures milled out of a single block of material that have very high rigidity yet exceptional material and mass savings. The delicate & complex lattices on the panel require very high precision machining and thus such a construction is much more expensive to produce than more standard tanks. Nevertheless, gridded tanks have been utilized by nearly every NASA orbital vehicle since the very first to use gridded aluminum construction: Thor/Delta as well as the S-IV and S-IVB upper stage.
	highlyPressurized = False
	basemass = 0.000016 * volume
	baseCost = 0.0042 * volume
	addResources = true
	addLead = true
	maxUtilization = 95
	defaultMass = 0.000016
}

TANK_DEFINITION
{
	name = Tank-Int-Al-HP
	title = HP Al Gridded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000509053 * volume
	baseCost = 0.0042 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 93
	defaultMass = 0.000052
}

TANK_DEFINITION
{
	name = Tank-Int-AlCu
	title = Refined Al Gridded Tank
	description = Improved welding and manufacturing techniques developed in the 1960s allowed the use of more advanced aluminum alloys, containing higher fractions of Magnesium, Manganese, and Copper than their predecessors. The increased alloying makes these alloys slightly difficult to work with, but the increased strength allows for the creation of lighter structures. The S-II stage of the Saturn V used this construction to become the highest performance hydrolox stage of it's time.
	highlyPressurized = False
	basemass = 0.0000121 * volume
	baseCost = 0.005 * volume
	addResources = true
	addLead = true
	maxUtilization = 95
	defaultMass = 0.0000121
}

TANK_DEFINITION
{
	name = Tank-Int-AlCu-HP
	title = HP Refined Al Gridded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000465053 * volume
	baseCost = 0.005 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 94
	defaultMass = 0.000047
}

TANK_DEFINITION
{
	name = Tank-Int-AlLi
	title = Al-Li Gridded Tank
	description = Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense while being stronger than most other Al alloys. However, their tendency to work-harden means that machining such alloys is much more difficult than standard alloys. Nevertheless, lightweight Al-Li gridded tanks have been the foundation of the modern era of orbital American rocketry, used in the Atlas V Common Core Booster, the Delta IV Common Booster Core (and DCSS upper stages), the Space Launch System core stage, and the ULA Vulcan rocket.
	highlyPressurized = False
	basemass = 0.0000115 * volume
	baseCost = 0.0065 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000115
}

TANK_DEFINITION
{
	name = Tank-Int-AlLi-HP
	title = HP Al-Li Gridded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.000038598 * volume
	baseCost = 0.0065 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.000039
}

TANK_DEFINITION
{
	name = Tank-Int-Comp
	title = Composite Tank
	description = The unparalleled low density and high strength of carbon composites have long been the siren call of tank design. Ever since the X-33 and Venture Star program of the 1990s was aborted only a few years years before the leaking problems that had killed Venture Star were solved, space companies have been trying to justify the very high cost of composite materials. Although costs continue to drop, the intensive manufacturing process is still very expensive, requiring the wrapping and weaving of hundreds of layers of carbon fiber with resins that are then baked off in massive autoclaves. Currently, the only rocket to use composite materials is the smallsat Electron orbital launcher developed by Rocket Lab.
	highlyPressurized = False
	basemass = 0.0000095 * volume
	baseCost = 0.008 * volume
	//balloonTemps = true
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000095
}

TANK_DEFINITION
{
	name = Tank-Int-Comp-HP
	title = HP Composite Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = True
	basemass = 0.000028 * volume
	baseCost = 0.008 * volume
	//balloonTemps = true
	addResources = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.000028
}

TANK_DEFINITION
{
	name = Tank-Int-Magic
	title = Refined Composite Tank
	description = Advanced carbon composite tankage, more resistant to cryogenic temperatures, and built using cutting edge construction techniques to maximize strength. Although small technology demonstrators have been made, no launch vehicle has utilized this style of advanced composite tankage.
	highlyPressurized = False
	basemass = 0.0000065 * volume
	baseCost = 0.01 * volume
	addResources = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.0000065
}

TANK_DEFINITION
{
	name = Tank-Int-Magic-HP
	title = HP Refined Composite Tank
	description = Advanced carbon composite tankage, more resistant to cryogenic temperatures, and built using cutting edge construction techniques to maximize strength. Although small technology demonstrators have been made, no launch vehicle has utilized this style of advanced composite tankage.
	highlyPressurized = True
	basemass = 0.00002 * volume
	baseCost = 0.01 * volume
	addResources = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.00002
}

TANK_DEFINITION
{
	name = Tank-Balloon-SteelAl
	title = Balloon Tank
	description = Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These early balloon tanks were first used by Atlas and the Centaur C upper stage.
	highlyPressurized = False
	basemass = 0.000014 * volume
	baseCost = 0.008 * volume
	addResources = true
	balloonTemps = true
	addLead = true
	minUtilization = 99
	maxUtilization = 100
	defaultMass = 0.000001
}

TANK_DEFINITION
{
	name = Tank-Balloon-SteelAlCu
	title = Refined Balloon Tank
	description = Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These advanced balloon tanks were first used by the Centaur G upper stage.
	highlyPressurized = False
	basemass = 0.0000115 * volume
	baseCost = 0.008 * volume
	addResources = true
	balloonTemps = true
	addLead = true
	minUtilization = 99
	maxUtilization = 100
	defaultMass = 0.000001
}

TANK_DEFINITION
{
	name = Tank-Balloon-SteelAlLi
	title = Modern Balloon Tank
	description = Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These modern balloon tanks were first used by Centaur III.
	highlyPressurized = False
	basemass = 0.000010 * volume
	baseCost = 0.009 * volume
	addResources = true
	balloonTemps = true
	addLead = true
	minUtilization = 99
	maxUtilization = 100
	defaultMass = 0.000001
}

TANK_DEFINITION
{
	name = SM-I
	highlyPressurized = True
	basemass = 0.00007 * volume
	baseCost = 0.008 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 50
	defaultMass = 0.00028
	
	TANK
	{
		name = ElectricCharge
		mass = 0.0045
		cost = 12
		utilization = 1000
	}
}

TANK_DEFINITION
{
	name = SM-II
	highlyPressurized = True
	basemass = 0.000054 * volume
	baseCost = 0.01 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 50
	defaultMass = 0.000216
	
	TANK
	{
		name = ElectricCharge
		mass = 0.00289 // silver-zinc
		cost = 8
		utilization = 1000
	}
}

TANK_DEFINITION
{
	name = SM-III
	highlyPressurized = True
	basemass = 0.00004 * volume
	baseCost = 0.012 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 60
	defaultMass = 0.00016
	
	TANK
	{
		name = ElectricCharge
		mass = 0.0018 // LM medium battery
		cost = 5
		utilization = 1000
	}
}

TANK_DEFINITION
{
	name = SM-IV
	highlyPressurized = True
	basemass = 0.000024 * volume
	baseCost = 0.016 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 75
	defaultMass = 0.000096
	
	TANK
	{
		name = ElectricCharge
		mass = 0.00144 // LM high-perf battery
		cost = 4
		utilization = 1000
	}
}

// PARTUPGRADEs for available types
// ServiceModule Upgrades
PARTUPGRADE
{
	name = RFTech-SM-II
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceHuman
	entryCost = 0
	cost = 0
	title = Service Module Tank Upgrade
	basicInfo = You can now use level II Service Module tanks
	manufacturer = Generic
	description = Level II Service Module Tank similar to ones used by Mercury and Vostok. These are used to store life support, payloads and electric charge. These are heavy tanks with poor utilization that simulates the supporting structures and systems needed for the specialized payloads. <b><color=green>Max Utilization: 50% </color><color=white>Can Hold Satellite Payload, Sounding Rocket Payload and Life Support Supplies</b> (as well as regular fuel)</color>
}

PARTUPGRADE
{
	name = RFTech-SM-III
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceAdvCapsules
	entryCost = 0
	cost = 0
	title = Service Module Tank Upgrade
	basicInfo = You can now use level III Service Module tanks
	manufacturer = Generic
	description = Level III Service Module Tank similar to ones used by Gemini and Voskhod. These are used to store life support, payloads and electric charge. These are heavy tanks with poor utilization that simulates the supporting structures and systems needed for the specialized payloads. <b><color=green>Max Utilization: 60% </color><color=white>Can Hold Satellite Payload, Sounding Rocket Payload and Life Support Supplies</b> (as well as regular fuel)</color>
}

PARTUPGRADE
{
	name = RFTech-SM-IV
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceLunar
	entryCost = 0
	cost = 0
	title = Service Module Tank Upgrade
	basicInfo = You can now use level IV Service Module tanks
	manufacturer = Generic
	description = Level IV Service Module Tank similar to ones used by Apollo. These are used to store life support, payloads and electric charge. These are heavy tanks with poor utilization that simulates the supporting structures and systems needed for the specialized payloads. <b><color=green>Max Utilization: 75% </color><color=white>Can Hold Satellite Payload, Sounding Rocket Payload and Life Support Supplies</b> (as well as regular fuel)</color>
}

PARTUPGRADE
{
	name = RFTech-AddLifeSupport
	partIcon = RO-RFTank-Seperate
	techRequired = crewSurvivability
	entryCost = 0
	cost = 0
	title = Life Support Tank Upgrade
	basicInfo = You can now add Water, Food and Oxygen to Service Module Tanks
	manufacturer = Generic
	description = You can now add Water, Food and Oxygen to Service Module Tanks
}

PARTUPGRADE
{
	name = RFTech-AddOxygenGas
	partIcon = RO-RFTank-Seperate
	techRequired = standardDockingPorts
	entryCost = 0
	cost = 0
	title = Oxygen Gas RCS Tank Upgrade
	basicInfo = You can now add Oxygen to High Pressure Tanks as RCS fuel
	manufacturer = Generic
	description = You can now add Oxygen to High Pressure Tanks as RCS fuel
}

// Isogrid and Conventional Tanks
PARTUPGRADE
{
	name = RFTech-Tank-Sep-Al
	partIcon = RO-RFTank-Seperate
	techRequired = postWarMaterialsScience
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum Fuselage tanks
	manufacturer = Generic
	description = You can now use Aluminum Fuselage tanks. Aluminum tank and fuselage construction was first used on the American Viking sounding rocket and then, perplexingly, on the massive Soviet N-1 lunar rocket.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-Al2
	partIcon = RO-RFTank-Seperate
	techRequired = earlyMaterialsScience
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum Stringer tanks
	manufacturer = Generic
	description = You can now use Aluminum Stringer tanks. Aluminum skin-stringer-frame construction is nothing new to the aerospace industry and is the preferred construction of large aircraft today. Longitudinal stringers are responsible for transferring the aerodynamic loads acting on the skin onto the frame. This method of construction does not have mechanically seperate tanks and frame, but the skin of the tank is only responsible for containing the propellant and is not load-bearing. The first rocket of skin-stringer-frame construction was the Soviet R-5 and has remained a staple of Russian design philosophy since, best exemplified in the very successful R-7 and Proton families.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-AlCu
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceAdvCapsules
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum-Copper Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use Aluminum-Copper Alloy Stringer tanks. Al-Cu alloys are not much different from unalloyed aluminum, and using it for skin-stringer construction presents little new challenge. Also known as "Duraluminum", this family of alloys is very strong and easily workable. The most famous use of this construction was in the titanic and powerful S-IC, the first stage of the Saturn V lunar rocket, but it was also used in the early versions of the Shuttle External Tank.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-AlLi
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceLongTerm
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum-Lithium Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use Aluminum-Lithium Alloy Stringer tanks. Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense than other aluminum alloys while being stronger than even Al-Cu alloys. However, they are much more expensive and their metallurgical properties can present great difficulties to work with. All Al-Li skin-stringer construction was used for the final version of the Shuttle External Tank, the Super Lightweight Tank.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-Stir
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceCommercial
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use stir-welded Aluminum-Lithium Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use stir-welded Aluminum-Lithium Alloy Stringer tanks. Friction stir welding uses heat generated by the friction of rotating tool to soften and mechanically intermixes two pieces of metal. It is used for structures which need very high weld strength, and has broad application in the aerospace industry. Completely stir-welding a semi-stringer-constructed tank was first used by SpaceX on their Falcon 1e and then Falcon 9 series of rockets. This unique construction allows for the use of fewer structural components and lighter welds, resulting in both mass and cost reductions especially in high-pressure tanks.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-Starship
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceNF
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use stir-welded Steel Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use stir-welded Steel Alloy Stringer tanks. This is the all-new 1950's technology that will be used by SpaceX's Starship vehicle & Superheavy booster.
}

//Isogrid
disabledPARTUPGRADE
{
	name = RFTech-Tank-Int-Al
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceSatellite
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Aluminum gridded tanks
	manufacturer = Generic
	description = You can now use Aluminum gridded tanks. Isogrids and orthogrids are advanced hollowed-out structures milled out of a single block of material that have very high rigidity yet exceptional material and mass savings. The delicate & complex lattices on the panel require very high precision machining and thus such a construction is much more expensive to produce than more standard tanks. Nevertheless, gridded tanks have been utilized by nearly every NASA orbital vehicle since the very first to use gridded aluminum construction: the Thor/Delta and Titan rockets as well as the Agena upper stage. 
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-AlCu
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceLunar
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Aluminum-Copper Alloy gridded tanks
	manufacturer = Generic
	description = You can now use Aluminum-Copper Alloy gridded tanks. Stronger than unalloyed aluminum and workable to boot, advanced new Al-Cu alloys were used in orthogrid and isogrid tanks for all upper stages of the Saturn program. 
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-AlLi
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceInternational
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Aluminum-Lithium Alloy gridded tanks
	manufacturer = Generic
	description = You can now use Aluminum-Lithium Alloy gridded tanks. Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense than other aluminum alloys while being stronger than even Al-Cu alloys. However, their tendency to work-harden means that machining such alloys is much more difficult than standard alloys. Nevertheless, lightweight Al-Li gridded tanks have been the foundation of the modern era of orbital American rocketry, used in the Atlas V Common Core Booster, the Delta IV Common Booster Core (and DCSS upper stages), the Space Launch System core stage, and the ULA Vulcan rocket.
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-Comp
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceCommercial
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Carbon Composite tanks
	manufacturer = Generic
	description = You can now use Carbon Composite tanks. The unparalleled low density and high strength of carbon composites have long been the siren call of tank design. Ever since the X-33 and Venture Star program of the 1990s was aborted only a few years years before the leaking problems that had killed Venture Star were solved, space companies have been trying to justify the very high cost of composite materials. Although costs continue to drop, the intensive manufacturing process is still very expensive, requiring the wrapping and weaving of hundreds of layers of carbon fiber with resins that are then baked off in massive autoclaves. Currently, the only rocket to use composite materials is the smallsat Electron orbital launcher developed by Rocket Lab.
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-Magic
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceNF
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Advanced Carbon Composite tanks
	manufacturer = Generic
	description = You can now use Advanced Carbon Composite tanks. Ceramic-metal alloys and insulating complex composite structures are still speculative, but if they ever come to fruitition, they'd probably be something like this.
}

//Balloon tanks
disabledPARTUPGRADE
{
	name = RFTech-Tank-Balloon-SteelAl
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceSatellite
	entryCost = 0
	cost = 0
	title = Balloon Tank Upgrade
	basicInfo = You can now use Steel & Aluminum balloon tanks
	manufacturer = Generic
	description = You can now use Steel & Aluminum balloon tanks. Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These early balloon tanks were first used by Atlas and the Centaur C upper stage.
}

PARTUPGRADE
{
	name = RFTech-Tank-Balloon-SteelAlCu
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceSpaceplanes
	entryCost = 0
	cost = 0
	title = Balloon Tank Upgrade
	basicInfo = You can now use Steel & Aluminum-Copper Alloy balloon tanks
	manufacturer = Generic
	description = You can now use Steel & Aluminum-Copper Alloy balloon tanks. Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These advanced balloon tanks were first used by the Centaur G upper stage.
}

PARTUPGRADE
{
	name = RFTech-Tank-Balloon-SteelAlLi
	partIcon = RO-RFTank-Seperate
	techRequired = materialsScienceInternational
	entryCost = 0
	cost = 0
	title = Balloon Tank Upgrade
	basicInfo = You can now use Steel & Aluminum-Lithium Alloy balloon tanks
	manufacturer = Generic
	description = You can now use Steel & Aluminum-Lithium Alloy balloon tanks. Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These modern balloon tanks were first used by Centaur III.
}

// These patches mangle stock RF tank types because stock RF tank types just have stuff manually added 
// to them, and lack the tags these patches expect.
// Tag stock tank types to avoid being touched by our patches
@TANK_DEFINITION[Default|Cryogenic|Structural|Balloon|BalloonCryo|Fuselage|ServiceModule|ElectricPropulsion]:FIRST
{
	%preserveResources = true
}

// Regular resources
// set boiling points assuming tank pressure of 1.5 bar
// stuff with boiling points above 293 K gets left alone, except for water/ethanol because they're useful
// for evaporative cooling.
// Create everything first here in the order we want.
@TANK_DEFINITION:HAS[#addResources[true]]:FIRST
{
	-addResources = DEL
	//put life support stuff first
	%TANK[CarbonDioxide]
	{
		%utilization = 200
		%fillable = False
	}
	%TANK[Food] {}
	%TANK[LithiumPeroxide] {}
	%TANK[LithiumHydroxide] {}
	%TANK[Oxygen] { %utilization = 200 }
	%TANK[PotassiumSuperoxide] {}
	%TANK[Waste] { %fillable = False }
	%TANK[WasteWater] { %fillable = False }
	
	//everything else down here
	%TANK[Aerozine50] {}
	%TANK[AK20] {}
	%TANK[AK27] {}
	%TANK[Ammonia] { %utilization = 100 }
	%TANK[LqdAmmonia]
	{
		%temperature = 248.23	//from NIST webbook
		&wallThickness = 0.0025
		&wallConduction = 8
		&insulationThickness = 0.01
		&insulationConduction = 0.02
	}
	%TANK[Aniline] {}
	%TANK[Aniline22] {}
	%TANK[Aniline37] {}
	%TANK[ArgonGas] { %utilization = 100 }
	%TANK[ASCENT] {}
	%TANK[AvGas] {}
	%TANK[CaveaB] {}
	%TANK[CoreModerator] {}
	%TANK[ClF3] { %temperature = 294.5 }	//from NIST webbook
	%TANK[ClF5] { %temperature = 269.4 }	//from NIST webbook
	%TANK[Diborane] { %temperature = 188.1 }	//from NIST webbook
	%TANK[Ethane] { %temperature = 192.2 }	//from NIST webbook
	%TANK[Ethanol75] { %temperature = 361.8 }	//from NIST webbook
	%TANK[Ethanol90] { %temperature = 361.8 }	//from NIST webbook
	%TANK[Ethanol] { %temperature = 361.8 }	//from NIST webbook
	%TANK[Ethylene] { %temperature = 176.4 }	//from NIST webbook
	%TANK[FLOX30] { %temperature = 88.4 }
	%TANK[FLOX70] { %temperature = 88.4 }
	%TANK[FLOX88] { %temperature = 88.4 }
	%TANK[Fluorine] { %utilization = 100 }
	%TANK[LqdFluorine] { %temperature = 88.4 }	//from NIST webbook
	%TANK[Furfuryl] {}
	%TANK[Helium] { %utilization = 200 }
	%TANK[LqdHelium]
	{
		%temperature = 4.7	//from NIST webbook
		&wallThickness = 0.0025
		&wallConduction = 205
		&insulationThickness = 0.0381
		&insulationConduction = 0.014
	}
	%TANK[HTP] {}
	%TANK[Hydrazine] {}
	%TANK[Hydrogen] { %utilization = 100 }
	%TANK[LqdHydrogen]
	{
		%temperature = 21.82	//from NIST webbook
		&wallThickness = 0.0025
		&wallConduction = 205
		&insulationThickness = 0.0381
		&insulationConduction = 0.014
	}
	%TANK[Hydyne] {}
	%TANK[IRFNA-III] {}
	%TANK[IRFNA-IV] {}
	%TANK[IWFNA] {}
	%TANK[Kerosene] {}
	%TANK[CooledKerosene] {}
	%TANK[KryptonGas] { %utilization = 100 }
	%TANK[Methane] { %utilization = 100 }
	%TANK[LqdMethane]
	{
		%temperature = 116.83	//from NIST webbook
		&wallThickness = 0.0025
		&wallConduction = 16
		&insulationThickness = 0.01
		&insulationConduction = 0.02
	}
	%TANK[Methanol] {}
	%TANK[MMH] {}
	%TANK[MHF3] {}
	%TANK[MON1] {}
	%TANK[MON3] {}
	%TANK[MON10] { %temperature = 291.2 }	//from https://rocketprops.readthedocs.io/en/latest/_static/AFRPL-TR_76-76_MON_propellants.pdf
	%TANK[MON15] { %temperature = 284.7 }	//interpolated
	%TANK[MON20] { %temperature = 278.3 }	//interpolated
	%TANK[MON25] { %temperature = 271.8 }	//from https://rocketprops.readthedocs.io/en/latest/_static/AFRPL-TR_76-76_MON_propellants.pdf
	%TANK[N2F4] { %temperature = 207.5 }	//from ChemCad 8 library
	%TANK[Nitrogen] { %utilization = 200 }
	%TANK[LqdNitrogen]
	{
		&wallThickness = 0.0025
		&wallConduction = 16
		%temperature = 81.2	//from NIST webbook
		&insulationThickness = 0.01
		&insulationConduction = 0.02
	}
	%TANK[NitrousOxide] { %utilization = 100 }
	%TANK[NTO] {}
	%TANK[OF2] { %temperature = 133.3 }	//from NIST webbook
	%TANK[LqdOxygen]
	{
		&wallThickness = 0.0025
		&wallConduction = 16
		%temperature = 94.25	//from NIST webbook
		&insulationThickness = 0.01
		&insulationConduction = 0.02
	}
	%TANK[CooledLqdOxygen]
	{
		&wallThickness = 0.0025
		&wallConduction = 16
		%temperature = 70.15
		&insulationThickness = 0.01
		&insulationConduction = 0.02
	}
	%TANK[Pentaborane] {}	//{ %temperature = 337.2 }	//from https://pubchem.ncbi.nlm.nih.gov/compound/Pentaborane
	%TANK[RG-1] {}
	%TANK[CooledRG-1] {}
	%TANK[RP-1] {}
	%TANK[CooledRP-1] {}
	%TANK[Syntin] {}
	%TANK[CooledSyntin] {}
	%TANK[Tonka250] {}
	%TANK[Tonka500] {}
	%TANK[Turpentine] {}
	%TANK[UDMH] {}
	%TANK[UH25] {}
	%TANK[Water] { %temperature = 388.2 }	//from NIST webbook
	%TANK[XenonGas] { %utilization = 100 }
}

// HP resources
// Remove HP resources from tanks not tagged
@TANK_DEFINITION:HAS[~addResourcesHP[true],~preserveResources[true]]:FIRST
{
	!TANK[Ammonia] {}
	!TANK[ArgonGas] {}
	!TANK[ASCENT] {}
	!TANK[CaveaB] {}
	!TANK[Helium] {}
	!TANK[Hydrazine] {}
	!TANK[Hydrogen] {}
	!TANK[KryptonGas] {}
	!TANK[Methane] {}
	!TANK[Nitrogen] {}
	!TANK[NitrousOxide] {}
	!TANK[Oxygen] {}
	!TANK[XenonGas] {}
}
// pressure increases bp of liquids. Assuming 15 bar vapor over liquids
// Some liquids expand significantly before they boil. We're gonna assume they can expand to 90% of
// their defined density before overflowing their tanks and being vented. We will also be generous and 
// assume a vapor recirculation system is present, so overflowed fluids still boil and provide cooling.
@TANK_DEFINITION:HAS[#addResourcesHP[true],~preserveResources[true]]:FIRST
{
	-addResourcesHP = DEL
	@TANK[LqdAmmonia] { @temperature = 278.6 }	//high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[ClF3] { @temperature = 343.2 }	//calculated with Peng-Robinson. high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[ClF5] { @temperature = 308.2 }	//calculated with Peng-Robinson. high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[Diborane] { @temperature = 215.2 }	//calculated with Peng-Robinson. high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[Ethane] { @temperature = 255.1 }	//No significant thermal expansion
	@TANK[Ethylene] { @temperature = 207.1 }	//high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[LqdFluorine|FLOX30|FLOX70|FLOX88] { @temperature = 118.5 }	//No significant thermal expansion
	@TANK[LqdHelium] { @temperature = 8.39 }	//supercritical, set bp to point where density is 90% of liquid phase at 1 atm
	@TANK[LqdHydrogen] { @temperature = 27.2 }	//high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[LqdMethane] { @temperature = 137.4 }	//high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[MON10] { @temperature = 338.0 }	//high thermal expansion, hits 90% of 1 atm density before boiling, based on https://rocketprops.readthedocs.io/en/latest/_static/AFRPL-TR_76-76_MON_propellants.pdf
	@TANK[MON15] { @temperature = 333.9 }	//interpolated
	@TANK[MON20] { @temperature = 329.7 }	//interpolated
	@TANK[MON25] { @temperature = 325.6 }	//high thermal expansion, hits 90% of 1 atm density before boiling, based on https://rocketprops.readthedocs.io/en/latest/_static/AFRPL-TR_76-76_MON_propellants.pdf
	@TANK[N2F4] { @temperature = 236.5 }	//From ChemCad 8 Library. high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[LqdNitrogen] { @temperature = 94.5 }	//high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[OF2] { @temperature = 155.0 }	//calculated with Peng-Robinson. high thermal expansion, hits 90% of 1 atm density before boiling
	@TANK[LqdOxygen] { @temperature = 112.1 }	//high thermal expansion, hits 90% of 1 atm density before boiling
}

// SM resources
// Remove SM resources from tanks not tagged
@TANK_DEFINITION:HAS[~addResourcesSM[true],~preserveResources[true]]:FIRST
{
	!TANK[CarbonDioxide] {}
	!TANK[CoreModerator] {}
	!TANK[Food] {}
	!TANK[LithiumPeroxide] {}
	!TANK[LithiumHydroxide] {}
	!TANK[PotassiumSuperoxide] {}
	!TANK[Waste] {}
	!TANK[WasteWater] {}
}
// set boiling points assuming tank pressure of 100 bar
// Everything that still has a bp below ~350 k gets a dewar
// and the gas can be captured (if applicable)
@TANK_DEFINITION:HAS[#addResourcesSM[true],~preserveResources[true]]:FIRST
{
	-addResourcesSM = DEL
	@TANK[LqdAmmonia] {
		@temperature = 283.2	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True
		%boiloffProduct = Ammonia
	}
	@TANK[ClF3] {
		@temperature = 358.2	//calculated with peng-robinson. high thermal expansion, hits 90% of 1 atm density before boiling. decomposes above 473.2 K
	}
	@TANK[ClF5] {
		@temperature = 314.2	//calculated with peng-robinson. high thermal expansion, hits 90% of 1 atm density before boiling.
		%isDewar = True
	}
	@TANK[Diborane] {
		@temperature = 358.1	//FIXME: Using liquid parameters, but supercritical at 100 bar
	}
	@TANK[Ethane] {
		@temperature = 349	//supercritical, set bp to point where density is 90% of liquid phase at 1 atm
		%isDewar = True
	}
	@TANK[Ethylene] {
		@temperature = 221.2	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True 
	}
	@TANK[LqdFluorine] {
		@temperature = 109.6	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True
		%boiloffProduct = Fluorine
	}
	@TANK[FLOX30|FLOX70|FLOX88] {
		@temperature = 109.6	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True 
	}
	@TANK[LqdHelium] {
		@temperature = 43.8	//supercritical, set bp to point where density is 90% of liquid phase at 1 atm
		%isDewar = True
		%boiloffProduct = Helium
	}
	@TANK[LqdHydrogen] {
		@temperature = 39.6	//supercritical, set bp to point where density is 90% of liquid phase at 1 atm
		%isDewar = True
		%boiloffProduct = Hydrogen
	}
	@TANK[LqdMethane] {
		@temperature = 150.0	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True
		%boiloffProduct = Methane
	}
	@TANK[MON10] {
		@temperature = 361.0	//Probably supercritical, and Peng-Robinsion doesn't work for mixtures. Guess
	}
	@TANK[MON15] {
		@temperature = 356.6	//Probably supercritical, and Peng-Robinsion doesn't work for mixtures. Guess
	}
	@TANK[MON20] {
		@temperature = 352.1	//Probably supercritical, and Peng-Robinsion doesn't work for mixtures. Guess
	}
	@TANK[MON25] {
		@temperature = 347.8	//Probably supercritical, and Peng-Robinsion doesn't work for mixtures. Guess
		%isDewar = True
	}
	@TANK[N2F4] {
		@temperature = 340	//FIXME: Guess, similar to Ethane?
		%isDewar = True
	}
	@TANK[LqdNitrogen] {
		@temperature = 101.7	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True
		%boiloffProduct = Nitrogen
	}
	@TANK[OF2] {
		@temperature = 168.0	//calculated with Peng-Robinson. high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True
	}
	@TANK[LqdOxygen] {
		@temperature = 117.9	//high thermal expansion, hits 90% of 1 atm density before boiling
		%isDewar = True
		%boiloffProduct = Oxygen
	}
}

// Add lead and Beryllium
@TANK_DEFINITION:HAS[#addLead[true]]:FIRST
{
	-addLead = DEL
	%TANK[LeadBallast] {}
	%TANK[Beryllium] {}
}

// Add default values to all subtanks
@TANK_DEFINITION,*
{
	@TANK,*
	{
		&utilization = 1
		&fillable = True
		&amount = 0.0
		&maxAmount = 0.0
	}
}

@TANK_DEFINITION:HAS[#defaultMass]
{
	@TANK,* { &mass = #$../defaultMass$ }
}
@TANK_DEFINITION:HAS[#defaultMass] { !defaultMass = DEL }

// LH2 tank mass correction
@TANK_DEFINITION:HAS[~balloonTemps[true],~preserveResources[true]] // not FIRST anymore.
{
	@TANK[LqdHydrogen]
	{
		// LH2 is much lighter than most liquids, and therefore allows reduced tank structural mass
		// Balloon tanks do not benefit from this since their structure is mostly provided by internal pressure
		// And they need thicker walls anyway to prevent LH2 leakage/wall crumpling
		// This only adjusts the additional tankage mass, not the base part mass, so tanks aren't 80% lighter
		@mass *= 0.2
	}
}

// Balloon insulation fixes
@TANK_DEFINITION:HAS[#balloonTemps[true]] // not FIRST anymore.
{
	-balloonTemps = DEL
	@TANK[LqdOxygen]
	{
		%wallThickness = 0.0012
		%wallConduction = 22
		%insulationThickness = 0.01
		%insulationConduction = 0.02
	}
	@TANK[LqdHydrogen]
	{
		// Centaur A crumpled with Atlas-level walls. Later Centaurs had heavier walls.
		@mass *= 5
		%wallThickness = 0.0012
		%wallConduction = 205
		%insulationThickness = 0.038181
		%insulationConduction = 0.014
	}
	@TANK[LqdAmmonia]
	{
		%wallThickness = 0.0012
		%wallConduction = 8
		%insulationThickness = 0.01
		%insulationConduction = 0.02
	}
	@TANK[LqdMethane]
	{
		%wallThickness = 0.0012
		%wallConduction = 22
		%insulationThickness = 0.01
		%insulationConduction = 0.02
	}
}
