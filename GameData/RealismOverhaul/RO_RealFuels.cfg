@RFSETTINGS:FOR[RealismOverhaul]
{
	%usePartNameInConfigUnlock = False
	%varianceAndResiduals = 1.0 // Applies 100% of RF's variation and residuals
	%throttlingRate = 3
	%throttlingClamp = 1.1

	// Deprecated, using new variance and residuals system
	%varyThrust = 0.008 // total of +/- 0.8%
}

//	===============================================================================
//	These are the tanks that are added for the newest versions of RP-1 to utilize
//	the new tooling mechanic and to create a proper mass ratio progression.
//	===============================================================================

//maxMLILayers will be defined by PARTUPGRADEs rather than by tank
TANK_DEFINITION
{
	name = Tank-Sep-Steel
	title = Steel Fuselage
	description = Simple steel tank and fuselage designs were used only on very early rockets such as the German V-2 and its American and Soviet clones. Tank and fuselage tankage is no more advanced than that used in the construction of early airplanes.
	highlyPressurized = False
	basemass = 0.00007 * volume
	baseCost = 0.002 * volume
	addResources = true
	addLead = true
	maxUtilization = 83
	defaultMass = 0.00006
}


TANK_DEFINITION
{
	name = Tank-Sep-Steel-HP
	title = HP Steel Fuselage
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00017 * volume
	baseCost = 0.002 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 75
	defaultMass = 0.00016
}

TANK_DEFINITION
{
	name = Tank-Sep-Al
	title = Aluminum Fuselage
	description = Aluminum tank and fuselage construction was first used on the American Viking sounding rocket and then, perplexingly, on the massive Soviet N-1 lunar rocket.
	highlyPressurized = False
	basemass = 0.00003955 * volume
	baseCost = 0.0022 * volume
	addResources = true
	addLead = true
	maxUtilization = 87
	defaultMass = 0.00004
}

TANK_DEFINITION
{
	name = Tank-Sep-Al-HP
	title = HP Aluminum Fuselage
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00013364 * volume
	baseCost = 0.0022 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 84
	defaultMass = 0.00015
}

TANK_DEFINITION
{
	name = Tank-Sep-Al2
	title = Aluminum Skin-Stringer Tank
	description = Aluminum skin-stringer-frame construction is nothing new to the aerospace industry and is the preferred construction of large aircraft today. Longitudinal stringers are responsible for transferring the aerodynamic loads acting on the skin onto the frame. This method of construction does not have mechanically seperate tanks and frame, but the skin of the tank is only responsible for containing the propellant and is not load-bearing. The first rocket of skin-stringer-frame construction was the Soviet R-5 and has remained a staple of Russian design philosophy since, best exemplified in the very successful R-7 and Proton families.
	highlyPressurized = False
	basemass = 0.000027 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addLead = true
	maxUtilization = 92
	defaultMass = 0.000027
}

TANK_DEFINITION
{
	name = Tank-Sep-Al2-HP
	title = HP Aluminum Skin-Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00010761 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 90
	defaultMass = 0.00012
}

TANK_DEFINITION
{
	name = Tank-Sep-AlCu
	title = Al-Cu Skin-Stringer Tank
	description = Al-Cu alloys are not much different from unalloyed aluminum, and using it for skin-stringer construction presents little new  challenge. Also known as "Duraluminum", this family of alloys is very strong and easily workable. The most famous use of this construction was in the titanic and powerful S-IC, the first stage of the Saturn V lunar rocket, but it was also used in the early versions of the Shuttle External Tank.
	highlyPressurized = False
	basemass = 0.00002 * volume
	baseCost = 0.003 * volume
	addResources = true
	addLead = true
	maxUtilization = 92
	defaultMass = 0.00002
}

TANK_DEFINITION
{
	name = Tank-Sep-AlCu-HP
	title = HP Al-Cu Skin-Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000804348 * volume
	baseCost = 0.003 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 90
	defaultMass = 0.00009
}

TANK_DEFINITION
{
	name = Tank-Sep-AlLi
	title = Al-Li Skin-Stringer Tank
	description = Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense than other aluminum alloys while being stronger than even Al-Cu alloys. However, they are much more expensive and their metallurgical properties can present great difficulties to work with. All Al-Li skin-stringer construction was used for the final version of the Shuttle External Tank, the Super Lightweight Tank.
	highlyPressurized = False
	basemass = 0.0000155 * volume
	baseCost = 0.0045 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000155
}

TANK_DEFINITION
{
	name = Tank-Sep-AlLi-HP
	title = HP Al-Li Skin-Stringer Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000445361 * volume
	baseCost = 0.0045 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.00005
}

TANK_DEFINITION
{
	name = Tank-Sep-Stir
	title = Al-Li Stir-Welded Tank
	description = Friction stir welding uses heat generated by the friction of rotating tool to soften and mechanically intermixes two pieces of metal. It is used for structures which need very high weld strength, and has broad application in the aerospace industry. Completely stir-welding a semi-stringer-constructed tank was first used by SpaceX on their Falcon 1e and then Falcon 9 series of rockets. This unique construction allows for the use of fewer structural components and lighter welds, resulting in both mass and cost reductions especially in high-pressure tanks.
	highlyPressurized = False
	basemass = 0.0000145 * volume
	baseCost = 0.004 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000145
}

TANK_DEFINITION
{
	name = Tank-Sep-Stir-HP
	title = HP Al-Li Stir-Welded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00003959 * volume
	baseCost = 0.004 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.000042
}

TANK_DEFINITION
{
	name = Tank-Sep-Starship
	title = Steel Stir-Welded Tank
	description = This is the all-new 1950's technology that will be used by SpaceX's Starship vehicle & Superheavy booster.
	highlyPressurized = False
	basemass = 0.000018 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.000018
}

TANK_DEFINITION
{
	name = Tank-Sep-Starship-HP
	title = HP Steel Stir-Welded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.00005938 * volume
	baseCost = 0.0025 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.00008
}

TANK_DEFINITION
{
	name = Tank-Int-Al
	title = Aluminum Gridded Tank
	description = Isogrids and orthogrids are advanced hollowed-out structures milled out of a single block of material that have very high rigidity yet exceptional material and mass savings. The delicate & complex lattices on the panel require very high precision machining and thus such a construction is much more expensive to produce than more standard tanks. Nevertheless, gridded tanks have been utilized by nearly every NASA orbital vehicle since the very first to use gridded aluminum construction: the Thor/Delta and Titan rockets as well as the Agena upper stage. 
	highlyPressurized = False
	basemass = 0.000016 * volume
	baseCost = 0.0042 * volume
	addResources = true
	addLead = true
	maxUtilization = 95
	defaultMass = 0.000016
}

TANK_DEFINITION
{
	name = Tank-Int-Al-HP
	title = HP Aluminum Gridded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000509053 * volume
	baseCost = 0.0042 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	addSoundingPayload = true
	maxUtilization = 93
	defaultMass = 0.000052
}

TANK_DEFINITION
{
	name = Tank-Int-AlCu
	title = Al-Cu Gridded Tank
	description = Stronger than unalloyed aluminum and workable to boot, advanced new Al-Cu alloys were used in orthogrid and isogrid tanks for all upper stages of the Saturn program. 
	highlyPressurized = False
	basemass = 0.0000121 * volume
	baseCost = 0.005 * volume
	addResources = true
	addLead = true
	maxUtilization = 95
	defaultMass = 0.0000121
}

TANK_DEFINITION
{
	name = Tank-Int-AlCu-HP
	title = HP Al-Cu Gridded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.0000465053 * volume
	baseCost = 0.005 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 94
	defaultMass = 0.000047
}

TANK_DEFINITION
{
	name = Tank-Int-AlLi
	title = Al-Li Gridded Tank
	description = Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense than other aluminum alloys while being stronger than even Al-Cu alloys. However, their tendency to work-harden means that machining such alloys is much more difficult than standard alloys. Nevertheless, lightweight Al-Li gridded tanks have been the foundation of the modern era of orbital American rocketry, used in the Atlas V Common Core Booster, the Delta IV Common Booster Core (and DCSS upper stages), the Space Launch System core stage, and the ULA Vulcan rocket.
	highlyPressurized = False
	basemass = 0.0000115 * volume
	baseCost = 0.0065 * volume
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000115
}

TANK_DEFINITION
{
	name = Tank-Int-AlLi-HP
	title = HP Al-Li Gridded Tank
	description = This is a highly-pressurized tank, capable of storing propellants at pressures upwards of 100 MPa. However, substantial additional mass is required to safely maintain this high pressure.
	highlyPressurized = true
	basemass = 0.000038598 * volume
	baseCost = 0.0065 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.000039
}

TANK_DEFINITION
{
	name = Tank-Int-Comp
	title = Carbon Composite Tank
	description = The unparalleled low density and high strength of carbon composites have long been the siren call of tank design. Ever since the X-33 and Venture Star program of the 1990s was aborted only a few years years before the leaking problems that had killed Venture Star were solved, space companies have been trying to justify the very high cost of composite materials. Although costs continue to drop, the intensive manufacturing process is still very expensive, requiring the wrapping and weaving of hundreds of layers of carbon fiber with resins that are then baked off in massive autoclaves. Currently, the only rocket to use composite materials is the smallsat Electron orbital launcher developed by Rocket Lab.
	highlyPressurized = False
	basemass = 0.0000095 * volume
	baseCost = 0.008 * volume
	//balloonTemps = true
	addResources = true
	addLead = true
	maxUtilization = 97
	defaultMass = 0.0000095
}

TANK_DEFINITION
{
	name = Tank-Int-Magic
	title = Advanced Carbon Composite Tank
	description = Advanced carbon composite tankage, more resistant to cryogenic temperatures, and built using cutting edge construction techniques to maximize strength. Although small technology demonstrators have been made, no launch vehicle has utilized this style of advanced composite tankage.
	highlyPressurized = False
	basemass = 0.0000065 * volume
	baseCost = 0.01 * volume
	addResources = true
	addLead = true
	maxUtilization = 96
	defaultMass = 0.0000065
}

TANK_DEFINITION
{
	name = Tank-Balloon-SteelAl
	title = Steel-Al Balloon Tank
	description = Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very think sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These early balloon tanks were first used by Atlas and the Centaur C upper stage.
	highlyPressurized = False
	basemass = 0.000014 * volume
	baseCost = 0.008 * volume
	addResources = true
	balloonTemps = true
	addLead = true
	minUtilization = 99
	maxUtilization = 100
	defaultMass = 0.000001
}

TANK_DEFINITION
{
	name = Tank-Balloon-SteelAlCu
	title = Steel-Al-Cu Balloon Tank
	description = Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very think sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These advanced balloon tanks were first used by the Centaur G upper stage.
	highlyPressurized = False
	basemass = 0.0000115 * volume
	baseCost = 0.008 * volume
	addResources = true
	balloonTemps = true
	addLead = true
	minUtilization = 99
	maxUtilization = 100
	defaultMass = 0.000001
}

TANK_DEFINITION
{
	name = Tank-Balloon-SteelAlLi
	title = Steel-Al-Li Balloon Tank
	description = Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very think sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These modern balloon tanks were first used by Centaur III.
	highlyPressurized = False
	basemass = 0.000010 * volume
	baseCost = 0.009 * volume
	addResources = true
	balloonTemps = true
	addLead = true
	minUtilization = 99
	maxUtilization = 100
	defaultMass = 0.000001
}

TANK_DEFINITION
{
	name = SM-I
	highlyPressurized = True
	basemass = 0.00007 * volume
	baseCost = 0.008 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 50
	defaultMass = 0.00028
	
	TANK
	{
		name = ElectricCharge
		mass = 0.0045
		cost = 12
		utilization = 1000
	}
}

TANK_DEFINITION
{
	name = SM-II
	highlyPressurized = True
	basemass = 0.000054 * volume
	baseCost = 0.01 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 50
	defaultMass = 0.000216
	
	TANK
	{
		name = ElectricCharge
		mass = 0.00289 // silver-zinc
		cost = 8
		utilization = 1000
	}
}

TANK_DEFINITION
{
	name = SM-III
	highlyPressurized = True
	basemass = 0.00004 * volume
	baseCost = 0.012 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 60
	defaultMass = 0.00016
	
	TANK
	{
		name = ElectricCharge
		mass = 0.0018 // LM medium battery
		cost = 5
		utilization = 1000
	}
}

TANK_DEFINITION
{
	name = SM-IV
	highlyPressurized = True
	basemass = 0.000024 * volume
	baseCost = 0.016 * volume
	addResources = true
	addResourcesHP = true
	addResourcesSM = true
	addLead = true
	addPayload = true
	addSoundingPayload = true
	maxUtilization = 75
	defaultMass = 0.000096
	
	TANK
	{
		name = ElectricCharge
		mass = 0.00144 // LM high-perf battery
		cost = 4
		utilization = 1000
	}
}

// PARTUPGRADEs for available types
// ServiceModule Upgrades
PARTUPGRADE
{
	name = RFTech-SM-II
	partIcon = RFTank-I
	techRequired = materialsScienceHuman
	entryCost = 0
	cost = 0
	title = Service Module Tank Upgrade
	basicInfo = You can now use level II Service Module tanks
	manufacturer = Generic
	description = Level II Service Module Tank similar to ones used by Mercury and Vostok. These are used to store life support, payloads and electric charge. These are heavy tanks with poor utilization that simulates the supporting structures and systems needed for the specialized payloads. <b><color=green>Max Utilization: 50% </color><color=white>Can Hold Satellite Payload, Sounding Rocket Payload and Life Support Supplies</b> (as well as regular fuel)</color>
}

PARTUPGRADE
{
	name = RFTech-SM-III
	partIcon = RFTank-I
	techRequired = materialsScienceAdvCapsules
	entryCost = 0
	cost = 0
	title = Service Module Tank Upgrade
	basicInfo = You can now use level III Service Module tanks
	manufacturer = Generic
	description = Level III Service Module Tank similar to ones used by Gemini and Voskhod. These are used to store life support, payloads and electric charge. These are heavy tanks with poor utilization that simulates the supporting structures and systems needed for the specialized payloads. <b><color=green>Max Utilization: 60% </color><color=white>Can Hold Satellite Payload, Sounding Rocket Payload and Life Support Supplies</b> (as well as regular fuel)</color>
}

PARTUPGRADE
{
	name = RFTech-SM-IV
	partIcon = RFTank-I
	techRequired = materialsScienceLunar
	entryCost = 0
	cost = 0
	title = Service Module Tank Upgrade
	basicInfo = You can now use level IV Service Module tanks
	manufacturer = Generic
	description = Level IV Service Module Tank similar to ones used by Apollo. These are used to store life support, payloads and electric charge. These are heavy tanks with poor utilization that simulates the supporting structures and systems needed for the specialized payloads. <b><color=green>Max Utilization: 75% </color><color=white>Can Hold Satellite Payload, Sounding Rocket Payload and Life Support Supplies</b> (as well as regular fuel)</color>
}

PARTUPGRADE
{
	name = RFTech-AddLifeSupport
	partIcon = RFTank-I
	techRequired = crewSurvivability
	entryCost = 0
	cost = 0
	title = Life Support Tank Upgrade
	basicInfo = You can now add Water, Food and Oxygen to Service Module Tanks
	manufacturer = Generic
	description = You can now add Water, Food and Oxygen to Service Module Tanks
}

// Isogrid and Conventional Tanks
PARTUPGRADE
{
	name = RFTech-Tank-Sep-Al
	partIcon = RFTank-I
	techRequired = postWarMaterialsScience
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum Fuselage tanks
	manufacturer = Generic
	description = You can now use Aluminum Fuselage tanks. Aluminum tank and fuselage construction was first used on the American Viking sounding rocket and then, perplexingly, on the massive Soviet N-1 lunar rocket.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-Al2
	partIcon = RFTank-I
	techRequired = earlyMaterialsScience
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum Stringer tanks
	manufacturer = Generic
	description = You can now use Aluminum Stringer tanks. Aluminum skin-stringer-frame construction is nothing new to the aerospace industry and is the preferred construction of large aircraft today. Longitudinal stringers are responsible for transferring the aerodynamic loads acting on the skin onto the frame. This method of construction does not have mechanically seperate tanks and frame, but the skin of the tank is only responsible for containing the propellant and is not load-bearing. The first rocket of skin-stringer-frame construction was the Soviet R-5 and has remained a staple of Russian design philosophy since, best exemplified in the very successful R-7 and Proton families.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-AlCu
	partIcon = RFTank-I
	techRequired = materialsScienceAdvCapsules
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum-Copper Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use Aluminum-Copper Alloy Stringer tanks. Al-Cu alloys are not much different from unalloyed aluminum, and using it for skin-stringer construction presents little new challenge. Also known as "Duraluminum", this family of alloys is very strong and easily workable. The most famous use of this construction was in the titanic and powerful S-IC, the first stage of the Saturn V lunar rocket, but it was also used in the early versions of the Shuttle External Tank.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-AlLi
	partIcon = RFTank-I
	techRequired = materialsScienceLongTerm
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use Aluminum-Lithium Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use Aluminum-Lithium Alloy Stringer tanks. Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense than other aluminum alloys while being stronger than even Al-Cu alloys. However, they are much more expensive and their metallurgical properties can present great difficulties to work with. All Al-Li skin-stringer construction was used for the final version of the Shuttle External Tank, the Super Lightweight Tank.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-Stir
	partIcon = RFTank-I
	techRequired = materialsScienceCommercial
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use stir-welded Aluminum-Lithium Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use stir-welded Aluminum-Lithium Alloy Stringer tanks. Friction stir welding uses heat generated by the friction of rotating tool to soften and mechanically intermixes two pieces of metal. It is used for structures which need very high weld strength, and has broad application in the aerospace industry. Completely stir-welding a semi-stringer-constructed tank was first used by SpaceX on their Falcon 1e and then Falcon 9 series of rockets. This unique construction allows for the use of fewer structural components and lighter welds, resulting in both mass and cost reductions especially in high-pressure tanks.
}

PARTUPGRADE
{
	name = RFTech-Tank-Sep-Starship
	partIcon = RFTank-I
	techRequired = materialsScienceNF
	entryCost = 0
	cost = 0
	title = Conventional Structure Tank Upgrade
	basicInfo = You can now use stir-welded Steel Alloy Stringer tanks
	manufacturer = Generic
	description = You can now use stir-welded Steel Alloy Stringer tanks. This is the all-new 1950's technology that will be used by SpaceX's Starship vehicle & Superheavy booster.
}

//Isogrid
disabledPARTUPGRADE
{
	name = RFTech-Tank-Int-Al
	partIcon = RFTank-I
	techRequired = materialsScienceSatellite
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Aluminum gridded tanks
	manufacturer = Generic
	description = You can now use Aluminum gridded tanks. Isogrids and orthogrids are advanced hollowed-out structures milled out of a single block of material that have very high rigidity yet exceptional material and mass savings. The delicate & complex lattices on the panel require very high precision machining and thus such a construction is much more expensive to produce than more standard tanks. Nevertheless, gridded tanks have been utilized by nearly every NASA orbital vehicle since the very first to use gridded aluminum construction: the Thor/Delta and Titan rockets as well as the Agena upper stage. 
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-AlCu
	partIcon = RFTank-I
	techRequired = materialsScienceLunar
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Aluminum-Copper Alloy gridded tanks
	manufacturer = Generic
	description = You can now use Aluminum-Copper Alloy gridded tanks. Stronger than unalloyed aluminum and workable to boot, advanced new Al-Cu alloys were used in orthogrid and isogrid tanks for all upper stages of the Saturn program. 
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-AlLi
	partIcon = RFTank-I
	techRequired = materialsScienceInternational
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Aluminum-Lithium Alloy gridded tanks
	manufacturer = Generic
	description = You can now use Aluminum-Lithium Alloy gridded tanks. Since lithium is the least dense elemental metal, Al-Li alloys are significantly less dense than other aluminum alloys while being stronger than even Al-Cu alloys. However, their tendency to work-harden means that machining such alloys is much more difficult than standard alloys. Nevertheless, lightweight Al-Li gridded tanks have been the foundation of the modern era of orbital American rocketry, used in the Atlas V Common Core Booster, the Delta IV Common Booster Core (and DCSS upper stages), the Space Launch System core stage, and the ULA Vulcan rocket.
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-Comp
	partIcon = RFTank-I
	techRequired = materialsScienceCommercial
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Carbon Composite tanks
	manufacturer = Generic
	description = You can now use Carbon Composite tanks. The unparalleled low density and high strength of carbon composites have long been the siren call of tank design. Ever since the X-33 and Venture Star program of the 1990s was aborted only a few years years before the leaking problems that had killed Venture Star were solved, space companies have been trying to justify the very high cost of composite materials. Although costs continue to drop, the intensive manufacturing process is still very expensive, requiring the wrapping and weaving of hundreds of layers of carbon fiber with resins that are then baked off in massive autoclaves. Currently, the only rocket to use composite materials is the smallsat Electron orbital launcher developed by Rocket Lab.
}

PARTUPGRADE
{
	name = RFTech-Tank-Int-Magic
	partIcon = RFTank-I
	techRequired = materialsScienceNF
	entryCost = 0
	cost = 0
	title = Isogrid Tank Upgrade
	basicInfo = You can now use Advanced Carbon Composite tanks
	manufacturer = Generic
	description = You can now use Advanced Carbon Composite tanks. Ceramic-metal alloys and insulating complex composite structures are still speculative, but if they ever come to fruitition, they'd probably be something like this.
}

//Balloon tanks
disabledPARTUPGRADE
{
	name = RFTech-Tank-Balloon-SteelAl
	partIcon = RFTank-I
	techRequired = materialsScienceSatellite
	entryCost = 0
	cost = 0
	title = Balloon Tank Upgrade
	basicInfo = You can now use Steel & Aluminum balloon tanks
	manufacturer = Generic
	description = You can now use Steel & Aluminum balloon tanks. Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These early balloon tanks were first used by Atlas and the Centaur C upper stage.
}

PARTUPGRADE
{
	name = RFTech-Tank-Balloon-SteelAlCu
	partIcon = RFTank-I
	techRequired = materialsScienceSpaceplanes
	entryCost = 0
	cost = 0
	title = Balloon Tank Upgrade
	basicInfo = You can now use Steel & Aluminum-Copper Alloy balloon tanks
	manufacturer = Generic
	description = You can now use Steel & Aluminum-Copper Alloy balloon tanks. Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These advanced balloon tanks were first used by the Centaur G upper stage.
}

PARTUPGRADE
{
	name = RFTech-Tank-Balloon-SteelAlLi
	partIcon = RFTank-I
	techRequired = materialsScienceInternational
	entryCost = 0
	cost = 0
	title = Balloon Tank Upgrade
	basicInfo = You can now use Steel & Aluminum-Lithium Alloy balloon tanks
	manufacturer = Generic
	description = You can now use Steel & Aluminum-Lithium Alloy balloon tanks. Balloon tanks do not have an internal framework, but instead rely on internal pressurization to keep its shape. If the pressurization fails, the balloon tank collapses. They are constructed of very thin sheets of stainless steel and have very good mass fractions, but the logistics involved in maintaining pressurization make them quite expensive. These modern balloon tanks were first used by Centaur III.
}

// Regular resources
@TANK_DEFINITION:HAS[#addResources[true]]:FIRST
{
	-addResources = DEL
	%TANK[LqdOxygen]
	{
		wallThickness = 0.0025
		wallConduction = 16
		temperature = 90.15
		insulationThickness = 0.01
		insulationConduction = 0.02
	}
	%TANK[Kerosene] {}
	%TANK[LqdHydrogen]
	{
		temperature = 20.15
		wallThickness = 0.0025
		wallConduction = 205
		insulationThickness = 0.0381
		insulationConduction = 0.014
	}
	%TANK[NTO] {}
	%TANK[UDMH] {}
	%TANK[Aerozine50] {}
	%TANK[MMH] {}
	%TANK[HTP] {}
	%TANK[AvGas] {}
	%TANK[IRFNA-III] {}
	%TANK[Aniline] {}
	%TANK[Aniline22] {}
	%TANK[Aniline37] {}
	%TANK[Ethanol75] { %temperature = 351.65 }
	%TANK[Ethanol90] { %temperature = 351.65 }
	%TANK[Ethanol] { %temperature = 351.65 }
	%TANK[LqdAmmonia]
	{
		temperature = 237.65
		wallThickness = 0.0025
		wallConduction = 8
		insulationThickness = 0.01
		insulationConduction = 0.02
	}
	%TANK[LqdMethane]
	{
		temperature = 111.45
		wallThickness = 0.0025
		wallConduction = 16
		insulationThickness = 0.01
		insulationConduction = 0.02
	}
	%TANK[ClF3] {}
	%TANK[ClF5] {}
	%TANK[Diborane] { %temperature = 180.65 }
	%TANK[Pentaborane] {}
	%TANK[Ethane] { %temperature = 184.65 }
	%TANK[Ethylene] { %temperature = 169.45 }
	%TANK[OF2] { %temperature = 128.4 }
	%TANK[LqdFluorine] { %temperature = 85.04 }
	%TANK[FLOX30] { %temperature = 85.04 }
	%TANK[FLOX70] { %temperature = 85.04 }
	%TANK[FLOX88] { %temperature = 85.04 }
	%TANK[N2F4] { %temperature = 200.15 }
	%TANK[Methanol] {}
	%TANK[Furfuryl] {}
	%TANK[UH25] {}
	%TANK[Tonka250] {}
	%TANK[Tonka500] {}
	%TANK[IWFNA] {}
	%TANK[IRFNA-IV] {}
	%TANK[AK20] {}
	%TANK[AK27] {}
	%TANK[MON1] {}
	%TANK[MON3] {}
	%TANK[MON10] {}
	%TANK[Hydyne] {}
	%TANK[Syntin] {}
	%TANK[Water] { %temperature = 373.17 }
	%TANK[Turpentine] {}
	%TANK[LqdNitrogen]
	{
		wallThickness = 0.0025
		wallConduction = 16
		temperature = 77.36
		insulationThickness = 0.01
		insulationConduction = 0.02
	}
	%TANK[LqdHelium]
	{
		temperature = 4.21
		wallThickness = 0.0025
		wallConduction = 205
		insulationThickness = 0.0381
		insulationConduction = 0.014
	}
}

// HP resources
@TANK_DEFINITION:HAS[#addResourcesHP[true]]:FIRST
{
	-addResourcesHP = DEL
	%TANK[Hydrazine]    {}
	%TANK[Nitrogen]     { %utilization = 200 }
	%TANK[Helium]       { %utilization = 200 }
	%TANK[CaveaB]       {}
	%TANK[ArgonGas]     { %utilization = 100 }
	%TANK[KryptonGas]   { %utilization = 100 }
	%TANK[XenonGas]     { %utilization = 100 }
	%TANK[Ammonia]      { %utilization = 100 }
	%TANK[NitrousOxide] { %utilization = 100 }

	//pressure increases bp of liquids. Assuming 10 bar vapor over liquids
	@TANK[LqdAmmonia] { @temperature = 298.06 }
	@TANK[OF2] { @temperature = 162.3 }
	@TANK[LqdFluorine|FLOX30|FLOX70|FLOX88] { @temperature = 111.80 }
	@TANK[LqdHydrogen] { @temperature = 31.393 }
	@TANK[LqdMethane]  { @temperature = 149.14 }
	@TANK[LqdOxygen]   { @temperature = 119.62 }
	@TANK[LqdNitrogen] { @temperature = 103.75 }
	@TANK[LqdHelium] { @temperature = 5.11 }
	@TANK[Ethane] { @temperature = 241.1 }
	@TANK[Ethylene] { @temperature = 221.3 }
}

// SM resources
@TANK_DEFINITION:HAS[#addResourcesSM[true]]:FIRST
{
	-addResourcesSM = DEL
	%TANK[Oxygen] { %utilization = 200 }
	%TANK[Food] {}
	%TANK[CarbonDioxide]
	{
		%utilization = 200
		%fillable = False
	}
	%TANK[Waste] { %fillable = False }
	%TANK[WasteWater] { %fillable = False }
	%TANK[LithiumPeroxide] {}
	%TANK[LithiumHydroxide] {}
	%TANK[PotassiumSuperoxide] {}

	// Cryo resources in SM tanks get a dewar flask
	// and the gas can be captured
	@TANK[LqdOxygen] {
		%isDewar = True
		%boiloffProduct = Oxygen
	}
	@TANK[LqdHydrogen] {
		%isDewar = True
		%boiloffProduct = Hydrogen
	}
	@TANK[LqdAmmonia] {
		%isDewar = True
		%boiloffProduct = Ammonia
	}
	@TANK[LqdMethane] {
		%isDewar = True
		%boiloffProduct = Methane
	}
	@TANK[LqdFluorine] {
		%isDewar = True
		%boiloffProduct = Fluorine
	}
	@TANK[LqdNitrogen] {
		%isDewar = True
		%boiloffProduct = Nitrogen
	}
	@TANK[LqdHelium] {
		%isDewar = True
		%boiloffProduct = Helium
	}
	@TANK[FLOX30] { %isDewar = True }
	@TANK[FLOX70] { %isDewar = True }
	@TANK[FLOX88] { %isDewar = True }
}

// Add lead
@TANK_DEFINITION:HAS[#addLead[true]]:FIRST
{
	-addLead = DEL
	%TANK[LeadBallast] {}
}

// Add default values to all subtanks
@TANK_DEFINITION,*
{
	@TANK,*
	{
		&utilization = 1
		&fillable = True
		&amount = 0.0
		&maxAmount = 0.0
	}
}

@TANK_DEFINITION:HAS[#defaultMass]
{
	@TANK,* { &mass = #$../defaultMass$ }
}
@TANK_DEFINITION:HAS[#defaultMass] { !defaultMass = DEL }

// LH2 tank mass correction
@TANK_DEFINITION:HAS[~balloonTemps[true]] // not FIRST anymore.
{
	@TANK[LqdHydrogen]
	{
		// LH2 is much lighter than most liquids, and therefore allows reduced tank structural mass
		// Balloon tanks do not benefit from this since their structure is mostly provided by internal pressure
		// And they need thicker walls anyway to prevent LH2 leakage/wall crumpling
		// This only adjusts the additional tankage mass, not the base part mass, so tanks aren't 80% lighter
		@mass *= 0.2
	}
}

// Balloon insulation fixes
@TANK_DEFINITION:HAS[#balloonTemps[true]] // not FIRST anymore.
{
	-balloonTemps = DEL
	@TANK[LqdOxygen]
	{
		%wallThickness = 0.0012
		%wallConduction = 22
		%insulationThickness = 0.01
		%insulationConduction = 0.02
	}
	@TANK[LqdHydrogen]
	{
		// Centaur A crumpled with Atlas-level walls. Later Centaurs had heavier walls.
		@mass *= 5
		%wallThickness = 0.0012
		%wallConduction = 205
		%insulationThickness = 0.038181
		%insulationConduction = 0.014
	}
	@TANK[LqdAmmonia]
	{
		%wallThickness = 0.0012
		%wallConduction = 8
		%insulationThickness = 0.01
		%insulationConduction = 0.02
	}
	@TANK[LqdMethane]
	{
		%wallThickness = 0.0012
		%wallConduction = 22
		%insulationThickness = 0.01
		%insulationConduction = 0.02
	}
}
