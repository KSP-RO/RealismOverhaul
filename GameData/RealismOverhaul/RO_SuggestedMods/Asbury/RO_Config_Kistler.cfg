//Fix Nitrogen amount stored

@PART[asbury_kistler_heavy-nosecone]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Heavy Nosecone
    @manufacturer = Asbury Western Stars Industries
    @description = A nosecone for keeping the K-1 Heavy derivative launch vehicle aerodynamically stable.

    @mass = 0.15
}

@PART[asbury_kistler_heavy-quadcoupler]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Heavy Quadcoupler
    @manufacturer = Asbury Western Stars Industries
    @description = A quadcoupler to join 4 LAPs together for a powerful first stage.

    @mass = 0.3
}

@PART[asbury_kistler_lap-airbag]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LAP Airbag
    @manufacturer = Irvin Aerospace
    @description = An airbag to soften the LAP during landing.

    @mass = 0.3
}

@PART[asbury_kistler_lap-interstage]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LAP Interstage
    @manufacturer = Northrop Grumman/Draper Laboratory
    @description = The LAP interstage goes between the LAP and OV, and decouples at the time of staging. This also acts the guidance control for the LAP after separation and during landing.

    @mass = 0.6

    @MODULE[ModuleRCSFX]
    {
        @thrusterPower = 0.114
        !resourceName = NULL

        !PROPELLANT[],*{}
        PROPELLANT
        {
            name = Nitrogen
            ratio = 1.0
            DrawGauge = True
        }

        @atmosphereCurve
        {
            @key = 0 0.195
            @key = 1 0.1001462
        }
    }

    @RESOURCE[ElectricCharge]
    {
        @amount = 3200
        @maxAmount = 3200
    }

    MODULE
    {
        name = ModuleRealAntenna
        referenceGain = 1.5 //guess, FIXME
	RFBand = UHF
    }
}

@PART[asbury_kistler_lap-mount]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LAP Engine Mount
    @manufacturer = Northrop Grumman
    @description = The engine mount is where you place the engines on. You can attach three, five, or seven engines.

    @mass = 0.7
}

@PART[asbury_kistler_lap-shield]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LAP Engine Mount Heatshield
    @manufacturer = Oceaneering Thermal Systems
    @description = The heatshield protects the LAP tank and structures during reentry and landing.

    @mass = 0.23
}

@PART[asbury_kistler_lap-tank]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LAP Tank
    @manufacturer = Lockheed Martin
    @description = The Launch Assist Platform, LAP, is the first stage of Kistler K-1 launcher. It was to be reusable by the means of parachutes, and used AJ-26-58/59 engines. It would also perform a boostback burn to land near the launch facility in Australia/USA.

    @mass = 10.218 //18.948t dry mass

    !RESOURCE[],*{}
    !MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchLength]]{}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = meshSwitchLength
		switcherDescription = Length
		switcherDescriptionPlural = Lengths
		affectDragCubes = True
		affectFARVoxels = True
		parentID = fuelSwitch

		SUBTYPE
		{
			name = Standard LAP Tank
			transform = tank_standard
		}
	}

	MODULE
	{
		name = ModuleB9DisableTransform
		transform = tank_medium-stretch
	}
    	MODULE
	{
		name = ModuleB9DisableTransform
		transform = tank_long-stretch
	}
	
    MODULE
    {
        name = ModuleFuelTanks
        type = Default
        volume = 218096.3568 //223.392t AJ-26-58/59 fuel
        basemass = -1

        TANK
        {
            name = Kerosene
            amount = 76906.1728
            maxAmount = 76906.1728
        }
        TANK
        {
            name = LqdOxygen
            amount = 141190.184
            maxAmount = 141190.184
        }
    }
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 7500 //some Nitrogen for RCS
        basemass = -1

        TANK
        {
            name= Nitrogen
            amount = 7500
            maxAmount = 7500
        }
    }
}

@PART[asbury_kistler_ov-airbag]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Airbag
    @manufacturer = Irvin Aerospace
    @description = An airbag to soften the OV during landing.

    @mass = 0.13
}

@PART[asbury_kistler_ov-avionics]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Avionics System
    @manufacturer = Draper Laboratory
    @description = The main controlling and guiding system for OV stage.

    @mass = 0.01

    @RESOURCE[ElectricCharge]
    {
        @amount = 1200
        @maxAmount = 1200
    }
}

@PART[asbury_kistler_ov-flare]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Interstage Flare
    @manufacturer = Northrop Grumman
    @description = The flare widens out to 6.7m to fit with the LAP Interstage perfectly. Also acts as engine mount.

    @mass = 1.5

    !RESOURCE[],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 1500 //some Nitrogen for RCS
        basemass = -1

        TANK
        {
            name = Nitrogen
            amount = 1500
            maxAmount = 1500
        }
    }

    @MODULE[ModuleRCSFX]
    {
        @thrusterPower = 0.114
        !resourceName = NULL

        !PROPELLANT[],*{}
        PROPELLANT
        {
            name = Nitrogen
            ratio = 1.0
            DrawGauge = True
        }

        @atmosphereCurve
        {
            @key = 0 0.195
            @key = 1 0.1001462
        }
    }
}

@PART[asbury_kistler_ov-heatshield]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Heatshield
    @manufacturer = Oceaneering Thermal Systems
    @description = The heatshield protects the OV tank and structures during reentry and landing. At the time of payload deployment, the heatshield slides and opens to allow the payload inside to move out.

    @mass = 0.31
}

@PART[asbury_kistler_ov-heatshield-solar]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Heatshield Solar
    @manufacturer = Asbury Western Stars Industries
    @description = The heatshield protects the OV tank and structures during reentry and landing. At the time of payload deployment, the heatshield slides and opens to allow the payload inside to move out. This heatshield features a solar panel for longer orbit stays. 

    @mass = 0.41
}

@PART[asbury_kistler_ov-heatshield-split]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Heatshield Split
    @manufacturer = Asbury Western Stars Industries
    @description = The heatshield protects the OV tank and structures during reentry and landing. At the time of payload deployment, the heatshield splits open to allow the payload inside to move out.

    @mass = 0.31
}

@PART[asbury_kistler_ov-rcs-inline]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Inline RCS
    @manufacturer = Aerojet Rocketdyne
    @description = A bipropellant inline RCS thruster for precise maneuvering at close proximities.

    @mass = 0.08

    @MODULE[ModuleRCSFX]
    {
        @stagingEnabled = true
        @thrusterPower = 0.455
        !resourceName = NULL

        !PROPELLANT[],*{}
        PROPELLANT
        {
            name = Aerozine50
            ratio = 0.502
            DrawGauge = True
        }
        PROPELLANT
        {
            name = NTO
            ratio = 0.498
        }
        PROPELLANT
        {
            name = Helium
            ratio = 11.25
            ignoreForIsp = True
        }

        @atmosphereCurve
        {
            @key = 0 0.955
            @key = 1 0.366
        }
    }
}

@PART[asbury_kistler_ov-tank]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 OV Tank
    @manufacturer = Lockheed Martin
    @description = The Orbital Vehicle, OV, is the second stage of Kistler K-1 launcher. It was to be reusable by the means of parachutes, and used AJ-26-60 engines.

    @mass = 10.218 //12.086t dry mass

    !RESOURCE[],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = Default
        volume = 11026.794 //113.958t AJ-26-60 fuel + 2.345t OMS fuel
        basemass = -1

        TANK
        {
            name = Kerosene
            amount = 39643.75
            maxAmount = 39643.75
        }
        TANK
        {
            name = LqdOxygen
            amount = 73284.613
            maxAmount = 73284.613
        }
        TANK
        {
            name = Ethanol75
            amount = 1098.431
            maxAmount = 1098.431
        }
    }
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 7500 //some Nitrogen for RCS
        basemass = -1

        TANK
        {
            name= Nitrogen
            amount = 7500
            maxAmount = 7500
        }
    }
}

@PART[asbury_kistler-4375-fairing]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Payload Fairing
    @manufacturer = Northrop Grumman
    @description = The fairing to house your payload in, in case of using extended payoad bay.

    @mass = 0.41
}

@PART[asbury_kistler-active-dispenser]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Payload Dispenser
    @manufacturer = Asbury Western Stars Industries
    @description = A small expendable dispenser for placing payloads into higher orbits than OV reaches into.

    @mass = 0.15

    @MODULE[ModuleRCSFX]
    {
        @stagingEnabled = true
        @thrusterPower = 0.455
        !resourceName = NULL

        !PROPELLANT[],*{}
        PROPELLANT
        {
            name = Aerozine50
            ratio = 0.502
            DrawGauge = True
        }
        PROPELLANT
        {
            name = NTO
            ratio = 0.498
        }
        PROPELLANT
        {
            name = Helium
            ratio = 11.25
            ignoreForIsp = True
        }

        @atmosphereCurve
        {
            @key = 0 0.955
            @key = 1 0.366
        }
    }

    !RESOURCE[],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 553.917 //250kg Aerozine50 + 400kg NTO
        basemass = -1
        
        TANK
        {
            name = ElectricCharge
            amount = 1200 //guess
            maxAmount = 1200
        }
        TANK
        {
            name = Aerozine50
            amount = 276.855
            maxAmount = 276.855
        }
        TANK
        {
            name = NTO
            amount = 275.862
            maxAmount = 275.862
        }
        TANK
        {
            name = Helium
            amount = 3103.4475
            maxAmount = 3103.4475
        }
    }

    MODULE
    {
        name = ModuleRealAntenna
        antennaDiameter = 0.25
    }
}

@PART[asbury_kistler-cargo-carrier]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Cargo Carrier Unpressurized
    @manufacturer = Rocketplane Kistler
    @description = Unpressurized version of cargo carrier for delivering dry cargo, water, stroable propellants, etc.

    @mass = 0.11

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 1650
        basemass = -1
    }
}

@PART[asbury_kistler-cargo-hybrid]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Cargo Carrier Unpressurized/Pressurized
    @manufacturer = Rocketplane Kistler
    @description = Unpressurized and pressurized cargo carrier for delivering dry cargo, water, stroable propellants, and others along with pressurized propellants and gases at once.

    @mass = 0.5

    !RESOURCE[],*{}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 2502
        basemass = -1

        TANK
        {
            name = ElectricCharge
            amount = 2000
            maxAmount = 2000
        }
    }
}

@PART[asbury_kistler-cargo-p]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Cargo Carrier Pressurized
    @manufacturer = Rocketplane Kistler
    @description = Pressurized version of cargo carrier for delivering pressurized propellant and gases.

    @mass = 0.46

    !RESOURCE[],*{}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 1852
        basemass = -1

        TANK
        {
            name = ElectricCharge
            amount = 2000
            maxAmount = 2000
        }
    }
}

@PART[asbury_kistler-cargo-unp]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Cargo Carrier Unpressurized Alternate
    @manufacturer = Rocketplane Kistler
    @description = Alternate unpressurized version of cargo carrier for delivering pressurized propellant and gases.

    @mass = 0.44

    !RESOURCE[],*{}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 1850
        basemass = -1

        TANK
        {
            name = ElectricCharge
            amount = 2000
            maxAmount = 2000
        }
    }
}

@PART[asbury_kistler-crew-capsule]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Crew Capsule
    @manufacturer = Rocketplane Kistler
    @description = A hypothetical derivative looking into what would have followed if Kistler managed to secure COTS. Carries 5 people.

    @mass = 1.09

    @RESOURCE[ElectricCharge]
    {
        @amount = 3000
        @maxAmount = 3000
    }

    @MODULE[ModuleReactionWheel]
    {
        @PitchTorque = 0.45
        @YawTorque = 0.45
        @RollTorque = 0.45
    }

    MODULE
    {
        name = ModuleRealAntenna
        referenceGain = 1.75 //guess, FIXME
	RFBand = UHF
    }
}

@PART[asbury_kistler-dispenser-decoupler]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Dispenser Decoupler
    @manufacturer = Rocketplane Kistler
    @description = A decoupler for the dispenser to separate the payload when required orbit is reached.

    @mass = 0.12
}

@PART[asbury_kistler-extended-payload]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Extended Payload 
    @manufacturer = Rocketplane Kistler
    @description = A large payload bay for large satellites. And occasionally a whole stage.

    @mass = 1.33
}

@PART[asbury_kistler-fairing]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Fairing
    @manufacturer = Asbury Western Stars Industries
    @description = A fairing to house your satellites in.

    @mass = 0.8
}

@PART[asbury_kistler-LAP-leg]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LAP Landing Leg
    @manufacturer = Asbury Western Stars Industries
    @description = A hypothetical part, used when stages become too large for parachutes, and propulsive landing becomes necessary.

    @mass = 0.5
}

@PART[asbury_kistler-LES]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LES
    @manufacturer = Asbury Western Stars Industries
    @description = The Launch Escape System for the crew capsule, pulling the capsule away from the rocket in case of emergencies.

    @mass = 0.2

    @MODULE[ModuleEnginesFX]
    {
        @EngineType = SolidFuel
    }

    MODULE
	{
		name = ModuleEngineConfigs
		configuration = LES
		modded = false
		origMass = 0.2
		
		CONFIG
		{
			name = LES
			description = The LES pulls away the crew capsule in case of an emergenccy.
			maxThrust = 230
			minThrust = 230
			heatProduction = 100
			massMult = 1.0
			ignitions = 1
			gimbalRange = 8
			PROPELLANT
			{
				name = PSPC
				ratio = 1.0
				DrawGauge = true
			}
			atmosphereCurve
			{
				key = 0 154
				key = 1 118
                key = 6 0.001
			}
		
			ullage = False
			ignitions = 1
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.1
			}
		}
	}

    MODULE
    {
        name = ModuleFuelTanks
        type = PSPC
        volume = 15
        basemass = -1

        TANK
        {
            name = PSPC
            amount = 15
            maxAmount = 15
        }
    }
}

@PART[asbury_kistler-LES-decoupler]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 LES Decoupler
    @manufacturer = Asbury Western Stars Industries
    @description = After the LES has pulled your crew to safety, use this to decouple the burnt LES away.

    @mass = 0.04
}

@PART[asbury_kistler-long-module]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Long Payload Module
    @manufacturer = Asbury Western Stars Industries
    @description = A long payload module for longor multiple satellites.

    @mass = 1.22
}

@PART[asbury_kistler-multi-payload-mount]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 MultiPayload Mount
    @manufacturer = Asbury Western Stars Industries
    @description = When you have multiple satellites to launch, you need separate mounts to put them on in the launch vehicle. Can carry 2, 3, or 4 satellites at once.

    @mass = 0.04
}

@PART[asbury_kistler-payload-elevator]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Payload Elevator
    @manufacturer = Asbury Western Stars Industries
    @description = A small elevator to lift your payload out of the payload module into the space to safely put the paylaod into orbit.

    @mass = 0.2
}

@PART[asbury_kistler-payload-module]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Palyoad Module
    @manufacturer = Asbury Western Stars Industries
    @description = A payload module to put your satellites in to keep them safe during launch.

    @mass = 0.9
}

@PART[asbury_kistler-propellant-module]:FOR[RealismOverhaul]
{
    %RSSROConfig = True
    @rescaleFactor = 1.53143

    @title = K-1 Propellant Module
    @manufacturer = Asbury Western Stars Industries
    @description = When you need to transport propellants into orbit, you use the propellant module.

    @mass = 1.11

    !RESOURCE[],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule 
        volume = 2500
        basemass = -1
    }
}
