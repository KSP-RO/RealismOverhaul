//Generally radar performance is given as a range against a target of a certain RCS, and a maximum
//instrumented range. To turn this into a reasonable float curve, we can use a simplified version of the 
//radar range equation: range = (radar properties * RCS)^1/4
//Although we don't know the radar properties, we can assume they stay constant (somewhat safe, many radars
//have multiple search modes which will alter these properties), and therefore determine the radar-specific
//"performance constant" based on one point of data. From there, we can work backwards and find RCS
//values for any other range (and tangents).

//non-pulse doppler radars have much better look-down performance than they should
//BDB look-down penalties for radar are not very aggressive, generally about 20%-50% at typical angles.
//Since we're using realistic radar curves, reducing RCS by 50% only reduces range by about 15%.
//Since BDB RCS is pre-computed and fixed regardless of angle, set RCS "floor" just below the size
//of a reasonable small aircraft. This isn't perfect, but it means look-down penalties are at
//least meaningful. It also means very high vulnerability to jammers, which is probably accurate for
//early radars anyway.

//US early fighter radars
//AN/APS-6/19 and AN/APG-30
//Sources:
//[1] https://apps.dtic.mil/sti/pdfs/ADA457262.pdf
//[2] https://www.radartutorial.eu/19.kartei/11.ancient7/karte001.en.html
//[3] https://stephentaylorhistorian.com/wp-content/uploads/2020/04/f4u-5n-corsair.pdf
//[4] https://old-wiki.warthunder.com/AN/APS-6
//[5] https://old-wiki.warthunder.com/AN/APS-19
//[6] https://old-wiki.warthunder.com/AN/APG-30
//[8] https://www.radartutorial.eu/19.kartei/11.ancient2/karte057.en.html
//[9] https://www.radartutorial.eu/druck/TM_11-487C-1_DEC._1965.pdf
+PART[bdRadome1snub]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anaps-6
	@title = AN/APS-6 Airborne Search & Intercept Radar
	@manufacturer = #roMfrSperryGyro
	@description = A 1940s airborne radar set. The AN/APS-6 was carried on several USN night fighters, including the F4U-5N. It is capable of detecting air and surface targets at short range, and has a very short-range gunsight mode.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.3658		//Same as AN/APS-19?
	
	@mass = 0.1098	//242 lbs [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APS-6 S&I Radar
		@resourceDrain = 0.78	//780 VA [1]
		
		%directionalFieldOfView = 120	//120 degree conical scan
		%boresightFOV = 15				//15 degree beamwidth? [4]
		%scanRotationSpeed = 360		//same as AN/APS-19?
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 25			//[9] 25 degree FoV in gun-aim mode
		%lockRotationSpeed = 360		//Sweep at the same speed as we scan
		%lockRotationAngle = 25			//[9] 25 degree FoV in gun-aim mode
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = true					//
		@canLock = true					//Not really, just provides pre-ranged gunsight, but whatever
		@canTrackWhileScan = false		//No TWS obviously
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//According to [9], max range 65 nmi, can identify aircraft (100m^2 bomber?) at 25 nmi
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   5    0.00 0.20	//analog, no processing, set a floor at ~5m^2
			key = 37  100   7.70 7.70	//at 37 km, we can see a bomber-sized target (100 m^2)
			key = 120 4631  154  154	//max range of 120 km (65 nmi) [9]
		}
		radarLockTrackCurve
		{
			key = 0   5    0.00 10.0	//analog, no processing, set a floor at ~5m^2
			key = 1.0 20   60.0 60.0	//at 1.0 km, we can lock a fighter-sized target (fixed range)
		}
	}
}
//AN/APS-19
+PART[RO-anaps-6]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anaps-19
	@title = AN/APS-19 Airborne Search & Intercept Radar
	@manufacturer = #roMfrSperryGyro
	@description = A late 1940s airborne radar set. An improved version of the AN/APS-6, the AN/APS-19 was carried on several USN night fighters, including the F4U-5N, F8F-1N, and F2H-2N. It is detecting air and surface targets at short range, and has a very short-range gunsight mode.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.3658		//18" dish (0.457 m) [1]
	
	@mass = 0.0767	//169 lbs [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APS-19 S&I Radar
		@resourceDrain = 0.65	//650 VA [1]
		
		%directionalFieldOfView = 130	//30 to 130 horizontal scan, 15 to 20 vertical scan
		%boresightFOV = 15				//15 degree beamwidth? [5]
		%scanRotationSpeed = 360		//60 RPM
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 25			//[9] 25 degree FoV in gun-aim mode
		%lockRotationSpeed = 360		//Sweep at the same speed as we scan
		%lockRotationAngle = 25			//[9] 25 degree FoV in gun-aim mode
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = true					//
		@canLock = true					//Not really, just provides pre-ranged gunsight, but whatever
		@canTrackWhileScan = false		//No TWS obviously
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//[1] claims 2-4 nmi against 20 m^2 target
		//[3] claims detection of airborne targets at ~20 miles, and lock at ~0.85 miles
		//I guess 20 nmi against 20 m^2 fighter
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   5    0.00 0.40	//analog, no processing, set a floor at ~5m^2
			key = 37  20    0.40 2.16	//at 37 km, we can see a bomber-sized target (100 m^2)
			key = 185 12500 270  270	//max range of 185 km (100 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   5    0.00 10.0	//analog, no processing, set a floor at ~5m^2
			key = 1.6 20   40.0 40.0	//at 1.6 km, we can lock a fighter-sized target (fixed range)
		}
	}
}
//AN/APG-30
+PART[RO-anaps-6]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-30
	@title = AN/APG-30 Radar Gunsight
	@manufacturer = #roMfrSperryGyro
	@description = A late 1940s airborne gun-laying radar. This radar has no search capability, and is only intended to be used at short range to calculate target lead for gun engagements. Used on many 1950s aircraft, including the B-45, B-57, F-4E, F-8A, F-84, F-86, F-100, FJ-2, and F2H-2.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.1219		//Largest dimension is 5-5/8" [1]
	
	@mass = 0.0227	//50 lbs [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-30 Radar Gunsight
		@resourceDrain = 0.080	//80 Watts DC [1]
		
		%directionalFieldOfView = 18	//18 degree FoV
		%boresightFOV = 18				//18 degree beamwidth? [1]
		%scanRotationSpeed = 360		//Doesn't scan, doesn't matter?
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 18			//18 degree beamwidth? [1]
		%lockRotationSpeed = 360		//Doesn't scan, doesn't matter?
		%lockRotationAngle = 0.1		//Fixed antenna
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = false				//No scanning, boresight lock only
		@canLock = true					//
		@canTrackWhileScan = false		//No TWS obviously
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//[1] claims 3000 yards against 20 m^2 target (max range)
		radarDetectionCurve
		{
			key = 0   5    0.00 1.85	//analog, no processing, set a floor at ~5m^2
			key = 2.7 10   1.85 10.8	//We'll be generous and say you can lock a 10 m^2 target at max range
		}
		radarLockTrackCurve
		{
			key = 0   5    0.00 1.85	//analog, no processing, set a floor at ~5m^2
			key = 2.7 10   1.85 10.8	//We'll be generous and say you can lock a 10 m^2 target at max range
		}
	}
}

//US turret radars
//AN/APG-32/41
//source:
//[1] https://www.radartutorial.eu/druck/TM_11-487C-1_DEC._1965.pdf
//[2] https://apps.dtic.mil/sti/pdfs/ADA457262.pdf
//[3] https://www.radartutorial.eu/19.kartei/11.ancient6/karte044.en.html
+PART[bdRadome1snub]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-3
	@title = AN/APG-3 Turret Radar Gunsight
	@manufacturer = #roMfrGE
	@description = A mid-1940s airborne gun-laying radar for turrets. Designed as a fire-control system for the defensive turrets on the B-29.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.2438		//Antenna assay is 12" in diameter [3]
	
	@mass = 0.136	//~300 lbs [3]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-3 Radar Gunsight
		@resourceDrain = 1.800	//1800 VA?
		
		%directionalFieldOfView = 120	//B-29 tail turret had 120 degree firing cone, so 120 degrees
		%boresightFOV = 8				//8 degree beamwidth? 
		%scanRotationSpeed = 360		//Doesn't scan?
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 8				//8 degree beamwidth?
		%lockRotationSpeed = 360		//Sweep at the same speed we scan
		%lockRotationAngle = 4			//?
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = false				//Doesn't scan? Just slaved to gunner control?
		@canLock = true					//
		@canTrackWhileScan = false		//No TWS obviously
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//[3] max range 8,000 yards, effective range 900 yards?
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   5    0.00 0.50	//analog, no processing, set a floor at ~5m^2
			key = 7.3 100  40.0 40.0	//We'll say you can see a 100 m^2 target at max range
		}
		radarLockTrackCurve
		{
			key = 0   5    0.00 0.50	//analog, no processing, set a floor at ~5m^2
			key = 7.3 100  40.0 40.0	//We'll say you can see a 100 m^2 target at max range
		}
	}
}
+PART[bdRadome1snub]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-32
	@title = AN/APG-32 Turret Radar Gunsight
	@manufacturer = #roMfrGE
	@description = A late 1940s airborne gun-laying radar for turrets. Designed as a fire-control system for the defensive turrets on the B-36D and B-47E.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.2235		//Antenna assay is 11" in diameter [1]
	
	@mass = 0.07856	//173.2 lbs [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-32 Radar Gunsight
		@resourceDrain = 1.800	//1800 VA [1]
		
		%directionalFieldOfView = 114	//114 degree horizontal coverage, 76 degree vertical [1]
		%boresightFOV = 8				//8 degree beamwidth? 
		%scanRotationSpeed = 2100		//2100 RPM [1]
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 8				//8 degree beamwidth?
		%lockRotationSpeed = 2100		//Sweep at the same speed we scan
		%lockRotationAngle = 4			//?
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = false		//No TWS obviously
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//[1] claims 24,000 yards search, effective range 8,000 yards
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   5    0.00 0.50	//analog, no processing, set a floor at ~5m^2
			key = 21.9 100  13.3 13.3	//We'll say you can see a 100 m^2 target at max range
		}
		radarLockTrackCurve
		{
			key = 0   5    0.00 1.00	//analog, no processing, set a floor at ~5m^2
			key = 7.3 20    8.00 10.9	//We'll say you can lock a 20 m^2 target at max effective range
			key = 21.9 1620 296  296	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-32]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-41
	@title = AN/APG-41B Turret Radar Gunsight
	@manufacturer = #roMfrGE
	@description = A late 1950s airborne gun-laying radar for turrets. Designed as a fire-control system for the defensive turrets on the B-52H. This system contains two radars, which allows for track-while-scan operation.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.4267		//Antenna assay is 21" in diameter [1]
	
	//add a second radome on top of the first
	MODEL
	{
		model = BDArmory/Parts/radome125/radome1snub
		texture = tex_radome125, BDArmory/Parts/radome125/tex_radome125
		position = 0.0, 0.0, 1.25
	}
	
	@mass = 0.3116	//687 lbs [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-41B Radar Gunsight
		@resourceDrain = 1.800	//1800 VA [1]
		
		%directionalFieldOfView = 114	//same as APG-32?
		%boresightFOV = 8				//8 degree beamwidth? 
		%scanRotationSpeed = 228		//Appears to manage a full raster pattern within a second?
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 8				//8 degree beamwidth?
		%lockRotationSpeed = 228		//Sweep at the same speed we scan
		%lockRotationAngle = 4			//?
		%multiLockFOV = 360				//Two completely independent radars, so no limitation
		%maxLocks = 1					//Can actually hold two locks, but this sacrifices search
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//Two independent radars, one tracks one scans
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//[1] effective range 8,000 yards
		//Just give it the same ranges as APG-32?
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   5    0.00 0.50	//analog, no processing, set a floor at ~5m^2
			key = 21.9 100  13.3 13.3	//We'll say you can see a 100 m^2 target at max range
		}
		radarLockTrackCurve
		{
			key = 0   5    0.00 1.00	//analog, no processing, set a floor at ~5m^2
			key = 7.3 20    8.00 10.9	//We'll say you can lock a 20 m^2 target at max effective range
			key = 21.9 1620 296  296	//Sure, allow lock out to max range
		}
	}
}

//Phantom radars
//AN/APQ-51/72/100/120
//Sources:
//[1] https://www.radartutorial.eu/19.kartei/11.ancient6/karte064.en.html
//[2] https://old-wiki.warthunder.com/F3H-2#Radars
//[3] https://forum.warthunder.com/t/f3h-2-demon-has-the-wrong-radar/75588
//[4] https://www.airvectors.net/avf4_1.html
//[5] https://phantomphacts.blogspot.com/2017/12/the-radome-road-to-32-inch-radome.html
//[6] https://www.radartutorial.eu/druck/TM_11-487C-1_DEC._1965.pdf
//[7] https://www.secretprojects.co.uk/threads/apq-50-72-100-109-120-detection-range.8938/
//[8] https://apps.dtic.mil/sti/tr/pdf/AD0367910.pdf
//Not much information about this radar directly
//Mostly extrapolating from AN/APQ-50 (F4D/F-4 prototype radar) data, which is in turn extrapolated from AN/APQ-72 (F-4A/B radar) performance...
+PART[bdRadome1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapq-51
	@title = AN/APQ-51 Fire Control Radar
	@manufacturer = #roMfrSperryRand
	@description = A mid-1950s airborne radar set. Developed for the F3H-2 Demon all-weather interceptor, the AN/APQ-51 could track targets at long range and provide illumination for SARH missiles like the Sparrow III (AIM-7C). Also used on the F7U-3M.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.4877		//same 24" radome of early F4H [5/6]
	
	@mass = 0.290	//640 lb for AN/APQ-72? [7]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APQ-51 FC Radar
		@resourceDrain = 0.500	//250 kW peak power, 0.42 microsecond pulse, 1200 Hz
		
		%directionalFieldOfView = 100	//100 horizontal scan, -8.15 to 4.15 vertical scan [2]
		%boresightFOV = 12				//12 degree beamwidth? [2]
		%scanRotationSpeed = 100		//AN/APQ-72 scanning rate 100 degree/s [8]
		%showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		%lockAttemptFOV = 12			//12 degree beamwidth? [2]
		%lockRotationSpeed = 100		//Sweep at the same speed as we scan
		%lockRotationAngle = 12			//12 degree beamwidth? [2]
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = false		//No TWS obviously
		@canReceiveRadarData = false	//
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering.
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 200 nmi (370 km)?
		//Max track range 50 nmi (92.5 km)?
		//100% chance to detect fighter-sized target at 25 nmi (46 km)?
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   5     0.00 0.33	//analog, no processing, set a floor at ~5m^2
			key = 46  20    0.33 1.74	//at 46 km, we can see a fighter-sized target (20 m^2 for margin)
			key = 370 83715 810  810	//max range of 370 km (200 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   5     0.00 1.00	//analog, no processing, set a floor at ~5m^2
			key = 92.5 100  4.32 4.32	//Track bomber-sized target at 92.5 km?
			key = 370 25600 277  277	//Sure, allow lock out to max range
		}
	}
}

//F-15 radars
//AN/APG-63/70/82
//Sources:
//[1] https://www.radartutorial.eu/19.kartei/08.airborne/karte030.en.html
//[2] https://en.wikipedia.org/wiki/AN/APG-63_radar_family
//[3] https://forum.dcs.world/topic/233863-anapg-63-range-is-under-represented/
//[4] https://www.forecastinternational.com/archive/disp_pdf.cfm?DACH_RECNO=1414
//[5] https://www.secretprojects.co.uk/threads/mcdonnell-douglas-f-15-avionics-an-apg-63-70-radar.53/
//[6] https://apps.dtic.mil/sti/tr/pdf/ADA142071.pdf
//[7] https://www.forecastinternational.com/archive/disp_pdf.cfm?DACH_RECNO=729
@PART[bdRadome1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	//@name = RO-anapg-63
	@title = AN/APG-63 Fire Control Radar
	@manufacturer = #roMfrHughes
	@description = An early 1970s airborne radar set. Developed for the F-15A/B, the AN/APG-63 is a pulse-doppler radar with moderate range, capable of detecting air and ground targets. The extensive use of integrated circuits and programmable computers makes this radar very reliable and flexible.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.7315		//36" [3]
	
	@mass = 0.221	//[4]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-63 FC Radar
		@resourceDrain = 5.0	//~5 kW best guess [5]
		
		%directionalFieldOfView = 120	//120x120 max scan area
		%boresightFOV = 20				//20x20 scan in ACM mode?
		%scanRotationSpeed = 70			//70 degree/s [4]
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode?
		%lockRotationSpeed = 70			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//No TWS? [5]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 31			//Doppler and early digital electronics. 15 db SNR?
		@radarGroundClutterFactor = 0.25	//pulse doppler and good filtering, but not really meant for air-to-ground
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 160 nmi (296 km) [5]
		//Detect "medium-sized target" at ~77 nmi (143 km) [6]
		//"raid mode" out to 40 nmi (with PSP), and can illuminate for AIM-7F out to maximum range (~38 nmi) [6]
		//Let it lock a fighter-sized target at 40 nmi (74 km)
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   1     0.00 0.20	//digital, basic processing, ~1 m^2 floor
			key = 143 20    0.56 0.56	//at 143 km, we can see a "medium-sized target" (20 m^2?)
			key = 296 367   4.96 4.96	//max range of 296 km (160 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   1     0.00 0.20	//digital, basic processing, ~1 m^2 floor
			key = 74  20    1.08 1.08	//We can lock a fighter-sized target at 74 km
			key = 296 5120  69.2 69.2	//Sure, allow lock out to max range
		}
	}
}
+PART[bdRadome1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-63psp
	@title = AN/APG-63PSP Fire Control Radar
	@manufacturer = #roMfrHughes
	@description = A late 1970s airborne radar set. Developed for the F-15C/D, the AN/APG-63PSP added the "Programmable Signal Processor", which improved flexibility of the radar and added more modes to be added, like a "raid mode" with Track-While-Scan capability.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.7315		//36" [3]
	
	@mass = 0.221	//[4]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-63PSP FC Radar
		@resourceDrain = 5.0	//~5 kW best guess [5]
		
		%directionalFieldOfView = 120	//120x120 max scan area
		%boresightFOV = 20				//20x20 scan in ACM mode?
		%scanRotationSpeed = 70			//70 degree/s [4]
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode?
		%lockRotationSpeed = 70			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 5				//"raid mode" was intended for tightly grouped targets in formation, and was apparently quite limited
		%maxLocks = 4					//"raid mode" can track up to 4 targets [5]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//No TWS, but "raid mode" for engaging formations [5]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 31			//Doppler and early digital electronics. 15 db SNR?
		@radarGroundClutterFactor = 0.33	//pulse doppler and good filtering, improved air-to-ground modes
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Basically the same range as without PSP?
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.10	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 143 20    0.56 0.56	//at 143 km, we can see a "medium-sized target" (20 m^2?)
			key = 296 367   4.96 4.96	//max range of 296 km (160 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.20	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 74  20    1.08 1.08	//We can lock a fighter-sized target at 74 km
			key = 296 5120  69.2 69.2	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-63psp]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-70
	@title = AN/APG-70 Fire Control Radar
	@manufacturer = #roMfrHughes
	@description = A mid-1980s airborne radar set. Developed for the F-15E, the AN/APG-70 added better air-to-ground capability, as well as improved range and improved Track-While-Scan.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.7315		//36" [3]
	
	@mass = 0.251	//[7]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-70 FC Radar
		@resourceDrain = 5.0	//~5 kW best guess [5]
		
		%directionalFieldOfView = 120	//120x120 max scan area
		%boresightFOV = 20				//20x20 scan in ACM mode?
		%scanRotationSpeed = 140		//140 degree/s [7]
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode?
		%lockRotationSpeed = 170		//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//Proper TWS mode, same 60 degree limit as AN/APG-68?
		%maxLocks = 10					//10 targets? (same as AN/APG-68) [5]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//Proper TWS mode [5]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 31			//Doppler and early digital electronics. 15 db SNR?
		@radarGroundClutterFactor = 0.50	//pulse doppler and good filtering, improved air-to-ground modes
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 160 nmi (296 km) (same as APG-63?)
		//detection range improved to 100 nmi (185 km) (against 20 m^2 target?)
		//idk, scale lock range up by same amount?
		//Let it lock a fighter-sized target at 96 km
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.10	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 185 20   0.43  0.43	//at 185 km, we can see a "medium-sized target" (20 m^2?)
			key = 296 131  1.77  1.77	//max range of 296 km (160 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.20	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 96  20   0.83  0.83	//We can lock a fighter-sized target at 96 km
			key = 296 1807 24.4  24.4	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-63psp]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-63v2
	@title = AN/APG-63(V)2 Fire Control Radar
	@manufacturer = #roMfrRaytheon
	@description = A late 1990s airborne radar set. Developed to replace AN/APG-70 on the F-15C/D, the APG-63(V)2 uses modernized APG-70 avionics combined with a AESA antenna.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.7315		//36" [3]
	
	@mass = 0.251	//same as AN/APG-70
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-63(V)2 FC Radar
		@resourceDrain = 5.0	//~5 kW best guess [5]
		
		%directionalFieldOfView = 120	//120x120 max scan area
		%boresightFOV = 20				//20x20 scan in ACM mode?
		%scanRotationSpeed = 360		//AESA, doesn't actually need to "scan". Just make it really fast?
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode?
		%lockRotationSpeed = 360		//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//phased array, can monopulse and doesn't need to sweep
		%multiLockFOV = 360				//AESA, no limit?
		%maxLocks = 10					//10 targets? (same as AN/APG-68) [5]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//Proper TWS mode [5]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 16			//Doppler and late 90s digital electronics. 12 db SNR?
		@radarGroundClutterFactor = 0.75	//pulse doppler and good filtering, AESA, improved air-to-ground modes
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//idk, same range as AN/APG-70, just better soft stats?
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.10	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 185 20   0.43 0.43	//at 185 km, we can see a "medium-sized target" (20 m^2?)
			key = 296 131  1.77 1.77	//max range of 296 km (160 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.20	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 96  20   0.83 0.83	//We can lock a fighter-sized target at 96 km
			key = 296 1807 24.4 24.4	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-63psp]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-63v3
	@title = AN/APG-63(V)3 Fire Control Radar
	@manufacturer = #roMfrRaytheon
	@description = An early 2010s airborne radar set. Developed as an upgrade to the APG-63 on the F-15C/J, the APG-63(V)3 is lighter and more reliable.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.7315		//36" [3]
	
	@mass = 0.142	//240 lbs lighter than (V)2 
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-63(V)3 FC Radar
		@resourceDrain = 5.0	//~5 kW best guess [5]
		
		%directionalFieldOfView = 120	//120x120 max scan area
		%boresightFOV = 20				//20x20 scan in ACM mode?
		%scanRotationSpeed = 360		//AESA, doesn't actually need to "scan". Just make it really fast?
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode?
		%lockRotationSpeed = 360		//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//phased array, can monopulse and doesn't need to sweep
		%multiLockFOV = 360				//AESA, no limit?
		%maxLocks = 10					//10 targets? (same as AN/APG-68) [5]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//Proper TWS mode [5]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 16			//Doppler and late 90s digital electronics. 12 db SNR?
		@radarGroundClutterFactor = 1.0	//pulse doppler and good filtering, AESA, improved air-to-ground modes
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Just add a flat 30% boost to all ranges?
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.10	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 243 20    0.33 0.33	//at 243 km, we can see a "medium-sized target" (20 m^2?)
			key = 296 44    0.60 0.60	//max range of 296 km (160 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.10	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 125 20    0.64 0.64	//We can lock a fighter-sized target at 125 km
			key = 296 629   8.50 8.50	//Sure, allow lock out to max range
		}
	}
}

//F-16 radars
//AN/APG-66/68/83
//Sources:
//[1] https://doi.org/10.2514/6.1984-2609
//[2] https://www.radartutorial.eu/19.kartei/08.airborne/karte015.en.html
//[3] https://en.wikipedia.org/wiki/AN/APG-66
//[4] https://www.secretprojects.co.uk/threads/mcdonnell-douglas-f-15-avionics-an-apg-63-70-radar.53/page-2
//[5] https://apps.dtic.mil/sti/tr/pdf/ADA142075.pdf
//[6] https://www.globalsecurity.org/military/systems/aircraft/systems/an-apg-66.htm
//[7] https://old-wiki.warthunder.com/AN/APG-66(V)1
//[8] https://www.f-16.net/f-16_versions_article5.html
//[9] https://www.radartutorial.eu/19.kartei/08.airborne/karte024.en.html
//[10] https://en.wikipedia.org/wiki/AN/APG-68
//[11] https://www.f-16.net/f-16_versions_article9.html
//[12] https://www.f-16.net/f-16_versions_article30.html
//[13] https://www.radartutorial.eu/19.kartei/08.airborne/karte023.en.html
//[14] http://dx.doi.org/10.1051/matecconf/201930404001
//[15] https://www.f-16.net/f-16_versions_article2.html
//[16] https://www.f-16.net/f-16_versions_article3.html
+PART[bdRadome1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-66
	@title = AN/APG-66 Fire Control Radar
	@manufacturer = #roMfrWestinghouse
	@description = A mid-1970s airborne radar set. Developed for the F-16A/B, the AN/APG-66 is a pulse-doppler radar with moderate range, capable of detecting air and ground targets. The extensive use of integrated circuits and programmable computers makes this radar very reliable and flexible. However, it has limited lock-on capabaility, and cannot guide radar missiles.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.5893		//29" radome
	
	@mass = 0.1233	//296 lb [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-66 FC Radar
		@resourceDrain = 3.580	//3580 VA [1]
		
		%directionalFieldOfView = 120	//120x120 max scan area [1]
		%boresightFOV = 20				//20x20 scan in ACM mode [6]
		%scanRotationSpeed = 55			//Eyeballing from war thunder, about 55 degree/s
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode [6]
		%lockRotationSpeed = 55			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//
		%maxLocks = 1					/
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = false		//No TWS
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 31			//Doppler and early digital electronics. 15 db SNR?
		@radarGroundClutterFactor = 0.25	//pulse doppler and good filtering, but not really meant for air-to-ground
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 80 nmi (148 km) [1]
		//detect fighter-sized target at 34.5 nmi (64 km) [6]
		//Base AN/APG-66 cannot illuminate for SARH missiles, however, this isn't an option we have
		//I have no idea what the lock range of this should be, but cap it at 3 km so it's only useful for guns
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   1     0.00 0.20	//digital, basic processing, ~1 m^2 floor
			key = 64  20    1.25 1.25	//at 64 km, we can see a fighter-sized target (20 m^2 for margin)
			key = 148 572   15.5 15.5	//max range of 148 km (80 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   1     0.00 0.00	//digital, basic processing, ~1 m^2 floor
			key = 3   1     0.00 0.00	//Still a good radar, 1 m^2 at max range
		}
	}
}
+PART[RO-anapg-66]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-66v1
	@title = AN/APG-66(V)1 Fire Control Radar
	@manufacturer = #roMfrWestinghouse
	@description = An early 1980s airborne radar set. Developed for the F-16A/B Block 15, the AN/APG-66(V)1 added support for radar-guided missiles. It is a pulse-doppler radar with moderate range, capable of detecting air and ground targets.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.5893		//same 29" radome
	
	@mass = 0.1233	//296 lb [1]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-66(V)1 FC Radar
		@resourceDrain = 3.580	//3580 VA [1]
		
		%directionalFieldOfView = 120	//120x120 max scan area [1]
		%boresightFOV = 20				//20x20 scan in ACM mode [6]
		%scanRotationSpeed = 55			//Eyeballing from war thunder, about 55 degree/s
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode [6]
		%lockRotationSpeed = 55			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//
		%maxLocks = 1					//
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = false		//No TWS
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 31			//Doppler and early digital electronics. 15 db SNR?
		@radarGroundClutterFactor = 0.25	//pulse doppler and good filtering, but not really meant for air-to-ground
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 80 nmi (148 km) [1]
		//100% chance to detect fighter-sized target at 34.5 nmi (64 km) [6]
		//I have no idea what the lock range of this should be, use 19 km from War Thunder
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.20	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 64  20    1.25 1.25	//at 64 km, we can see a fighter-sized target (20 m^2 for margin)
			key = 148 572   15.5 15.5	//max range of 148 km (80 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.60	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 19  20    4.21 4.21	//at 19 km, we can lock a fighter-sized target?
			key = 148 73631 1690 1690	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-66]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-66v2a
	@title = AN/APG-66(V)2A Fire Control Radar
	@manufacturer = #roMfrWestinghouse
	@description = A late 1990s airborne radar set. Developed for the F-16A/B Block 15 MLU (Mid Life Update) program, the AN/APG-66(V)2A added Track-While-Scan capabilities and better discrimination of ground targets, while reducing weight and power consumption with modernized avionics. It is a pulse-doppler radar with moderate range, capable of detecting air and ground targets.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.5893		//same 29" radome
	
	@mass = 0.1186	//Modernized avionics, 261.5 lb [15]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-66(V)2A FC Radar
		@resourceDrain = 3.285	//Modernized avionics, 3285 VA [15]
		
		%directionalFieldOfView = 120	//120x120 max scan area [1]
		%boresightFOV = 20				//20x20 scan in ACM mode [6]
		%scanRotationSpeed = 55			//Eyeballing from war thunder, about 55 degree/s
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode [6]
		%lockRotationSpeed = 55			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//According to DCS, about 60 degrees?
		%maxLocks = 10					//TWS up to 10 targets [15]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//10 target TWS
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 16			//Doppler and late 90s digital electronics. 12 db SNR?
		@radarGroundClutterFactor = 0.5	//pulse doppler and good filtering, improved air-to-ground capability
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 80 nmi (148 km) [1]
		//100% chance to detect fighter-sized target at 52 nmi (83 km) [2]
		//Just assume they managed to get the lock-on as good as the APG-68? (51 km)
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.15	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 83  20    0.96 0.96	//at 83 km, we can see a fighter-sized target (20 m^2 for margin)
			key = 148 202   5.46 5.46	//max range of 148 km (80 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.20	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 51  20    1.57 1.57	//at 51 km, we can lock a fighter-sized target?
			key = 148 1418  38.3 38.3	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-66]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-68
	@title = AN/APG-68 Fire Control Radar
	@manufacturer = #roMfrWestinghouse
	@description = A mid-1980s airborne radar set. Developed for the F-16C/D Block 25, the AN/APG-68 gained many improvements over the AN/APG-66, such as the ability to guide SARH missiles and TWS capability.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.5893		//same 29" radome
	
	@mass = 0.164	//362 lb [9]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-68 FC Radar
		@resourceDrain = 5.6	//5.6 kW [9]
		
		%directionalFieldOfView = 120	//120x120 max scan area [10]
		%boresightFOV = 20				//20x20 scan in ACM mode (same as APG-66?)
		%scanRotationSpeed = 110		//APG-70 doubles scan rate over APG-63. Double this vs APG-66?
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode [6]
		%lockRotationSpeed = 55			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//According to DCS, about 60 degrees?
		%maxLocks = 10					//TWS up to 10 targets [8]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//TWS up to 10 targets [8]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 31			//Doppler and early digital electronics. 15 db SNR?
		@radarGroundClutterFactor = 0.75	//pulse doppler and good filtering, improved air-to-ground capability
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max instrumented range 80 nmi (148 km) (same as APG-66V2?)
		//100% chance to detect fighter-sized target at 52 nmi (83 km) (same as APG-66V2?)
		//Lock at 27.5 nmi (51 km) in look-down mode [9]
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.15	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 83  20    0.96 0.96	//at 83 km, we can see a fighter-sized target (20 m^2 for margin)
			key = 148 202   5.46 5.46	//max range of 148 km (80 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.20	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 51  20    1.57 1.57	//at 51 km, we can lock a fighter-sized target?
			key = 148 1418  38.3 38.3	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-68]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-68v9
	@title = AN/APG-68(V)9 Fire Control Radar
	@manufacturer = #roMfrNG
	@description = An early 2000s airborne radar set. Developed for the F-16C/D Block 50/52 Plus, the AN/APG-68(V)9 increases range by 30% and adds a SAR mode for ground attack.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.5893		//same 29" radome
	
	@mass = 0.164	//362 lb [9]
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-68(V)9 FC Radar
		@resourceDrain = 5.6	//5.6 kW [9]
		
		%directionalFieldOfView = 120	//120x120 max scan area [10]
		%boresightFOV = 20				//20x20 scan in ACM mode (same as APG-66?)
		%scanRotationSpeed = 110		//APG-70 doubles scan rate over APG-63. Double this vs APG-66?
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode [6]
		%lockRotationSpeed = 55			//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//Planar array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 60				//According to DCS, about 60 degrees?
		%maxLocks = 10					//TWS up to 10 targets [8]
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//TWS up to 10 targets [8]
		@canReceiveRadarData = false	//I don't think this has datalink
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 16			//Doppler and 2000s digital electronics. 12 db SNR?
		@radarGroundClutterFactor = 1.0	//pulse doppler with SAR mode
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Just add a flat 30% boost to all ranges
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.01	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 70  1     0.06 0.06	//detect 1 m^2 target at 38 nmi [14]
			key = 148 20    0.54 0.54	//max range of 148 km (80 nmi)
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.15	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 66  20    1.21 1.21	//at 66 km, we can lock a fighter-sized target?
			key = 148 505   13.7 13.7	//Sure, allow lock out to max range
		}
	}
}
+PART[RO-anapg-68]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anapg-83
	@title = AN/APG-83 Fire Control Radar
	@manufacturer = #roMfrNG
	@description = A late 2010s airborne radar set. Developed for the F-16C/D Block 70/72, the AN/APG-83 implements AESA technology from the AN/APG-77 and AN/APG-81, greatly improving performance.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	@rescaleFactor = 0.5893		//same 29" radome
	
	@mass = 0.164	//362 lb idk, same as AN/APG-68
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APG-83 FC Radar
		@resourceDrain = 5.6	//5.6 kW (same as APG-66?)
		
		%directionalFieldOfView = 120	//120x120 max scan area (same as APG-66?)
		%boresightFOV = 20				//20x20 scan in ACM mode (same as APG-66?)
		%scanRotationSpeed = 360		//AESA, doesn't actually need to "scan". Just make it really fast?
		%showDirectionWhileScan = true	//pulse-doppler radar
		%lockAttemptFOV = 20			//20x20 scan in ACM mode (same as APG-66?)
		%lockRotationSpeed = 360		//Sweep at the same speed as we scan
		%lockRotationAngle = 0.1		//phased array, can probably monopulse and doesn't need to sweep
		%multiLockFOV = 360				//I don't think there's any limitation?
		%maxLocks = 10					//TWS up to 10 targets (same as APG-66?)
		
		@canScan = true					//
		@canLock = true					//
		@canTrackWhileScan = true		//TWS up to 10 targets (same as APG-66?)
		@canReceiveRadarData = true		//AN/APG-81 has datalink, so give it to this too?
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 10			//Doppler and 2010s digital electronics. 10 db SNR?
		@radarGroundClutterFactor = 1.0	//pulse doppler with SAR mode
		
		!radarDetectionCurve {}		//just delete and add our own
		!radarLockTrackCurve {}
		
		//Max range 200 nmi (370 km) [13]
		//Estimated detection range of 1 m^2 target ~48 nmi (89 km)
		//Radar operates at ~9.5 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.003 m^2
		radarDetectionCurve
		{
			key = 0   0.003 0.00 0.01	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 89  1     0.04 0.04	//at 89 km, we can see a 1 m^2 target
			key = 370 299   3.23 3.23	//max range of 370 km
		}
		radarLockTrackCurve
		{
			key = 0   0.003 0.00 0.15	//at 0 range, we are wavelength-limited to 0.003 m^2
			key = 85  20    0.94 0.94	//Scale to detection range from APG-68V9
			key = 370 7181  77.6 77.6	//Sure, allow lock out to max range
		}
	}
}

//US AEW radars
//AN/APS-20A/B/E
//Sources:
//[1] https://en.wikipedia.org/wiki/AN/APS-20
//[2] https://www.iwm.org.uk/collections/item/object/30005815 
//[3] https://apps.dtic.mil/sti/citations/ADA060603
//[4] https://apps.dtic.mil/sti/pdfs/ADA457262.pdf
//[5] https://apps.dtic.mil/sti/pdfs/ADA618106.pdf
//[6] https://www.radartutorial.eu/druck/TM_11-487C-1_DEC._1965.pdf
+PART[awacsRadar]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anaps-20
	@title = AN/APS-20A Airborne Early Warning Radar
	@manufacturer = #roMfrGE
	@description = A 1940s airborne radar set. Developed to provide early warning against Kamikazes, this radar was fitted to TBM-3 Avengers to increase the radar range of carrier groups. Although relatively primitive, with no automatic filtering and control systems, it has limited capability to detect ships and other large objects, and can transmit radar data to be processed.
	
	skinTempTag = Aluminum
	internalTempTag = Instruments
	
	//This still uses the old mesh system
	!mesh = null
	//Use the new system instead so we can squish it (AN/APS-20 radome was much thicker)
	MODEL
	{
		model = BDArmory/Parts/awacsRadar/model
		scale = 0.4269, 0.9, 0.4269
		position = 0.0, 0.0, 0.0
	}
	
	
	//@rescaleFactor = 0.4269	//2.54 meter dish
	@mass = 0.578	//1275 lbs [4]
	
	//This isn't working properly, and I don't really want the legs anyway
	!MODULE[ModulePartVariants] {}
	//Just kill the leg with B9PS
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = Cube
		transform = Sphere
		transform = collider
		transform = collider.collider
	}
	
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APS-20A AEW Radar
		@resourceDrain = 2.75	//2750 VA [4]
		!rotationTransformName = null	//Radome was fixed, so break the linked animation
		
		@directionalFieldOfView = 6		//6 degrees vertical FoV (horizontal FoV mostly irrelevant because this scans)
		@scanRotationSpeed = 36			//3 or 6 RPM. We'll use 6
		@showDirectionWhileScan = false	//no pulse-doppler, or really any processing at all. No direction
		
		@canReceiveRadarData = false	//Pretty dumb set, just transmitted signal directly to ground station
		
		!minSignalThreshold = null		//deprecated, remove?
		
		%radarMinTrackSCR = 1000		//No doppler, no MTI, basic filtering. 30 db SNR should be human-readable?
		@radarGroundClutterFactor = 0.1	//no pulse-doppler, basic filtering. Apparently not very good at detecting submarines either
		
		!radarDetectionCurve {}		//just delete and add our own
		
		//AN/APS-20A was tested against F6Fs in 1947 [3]
		//A single aircraft, flying directly at the AEW aircraft, had a 50% probability of being detected at about 45 nmi
		//Multiple aircraft in relatively close formation increased this range
		//[4] states 20 m^2 reference cross-section for fighter, using that
		//Radar operates at 2.85 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.01 m^2
		radarDetectionCurve
		{
		//	key = distance	rcs
			key = 0   5    0.00 0.21	//analog, no processing, set a floor at ~5m^2
			key = 70  20   0.21 1.14	//at 70 km, we can see an F6F-sized target (20 m^2)
			key = 370 15612 168  168	//max range 370 km
		}
		//Effective reduction in RCS due to speed
		//This set doesn't have any doppler capability or speed gates
		//However, high-speed targets are harder to detect because they move further between scans
		//and therefore their spots on the radar screen are dimmer
		//From [3], estimated chance of detection at 1500 knots is about 40% of the chance at 200 knots
		radarVelocityGate
		{
		//	key = speed?	rcs factor
			key = 0   1.00 0.00 0.00
			key = 100 1.00 0.00 0.00		//200 knot reference speed [3]
			key = 205 0.90 0.00 0.00		//400 knots
			key = 310 0.75 0.00 0.00		//600 knots
			key = 515 0.58 0.00 0.00		//1000 knots
			key = 770 0.41 0.00 0.00		//1500 knots
			key = 2300 0.01 0.00 0.00		//4500 knots. Extrapolated
		}
	}
}
+PART[RO-anaps-20]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anaps-20b
	@title = AN/APS-20B Airborne Early Warning Radar
	@manufacturer = #roMfrGE
	@description = A 1940s airborne radar set. Derived from the AN/APS-20A, this model has a more powerful radar for use in land-based aircraft. It was fitted to the Boeing PB-1, and Lockheed PO-1/2.
	
	@mass = 0.612	//1350 lbs [4]
	
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APS-20B AEW Radar
		@resourceDrain = 6.5	//6.5 kVA [4]
		
		!radarDetectionCurve {}		//just delete and add our own
		
		//Assuming same test demands as AN/APS-20A
		//Claimed range against aircraft 120 km (assuming same 20 m^2 reference target)
		//Claimed range against ships of 370 km
		//Radar operates at 2.85 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.01 m^2
		radarDetectionCurve
		{
			// floatcurve to define at what range (km) which minimum cross section (m^2) can be detected.
			// this defines both min/max range of the radar, and sensitivity/efficiency
			// it is recommended to define an "assured detection range", at which all craft are detected regardless
			//     of their rcs. This is achieved by using a minrcs value of zero, thus detecting everything.
			//    key = distance	rcs
			key = 0   5    0.00 0.13	//analog, no processing, set a floor at ~5m^2
			key = 120 20   0.13 0.67	//at 120 km, we can see an F6F-sized target (20 m^2)
			key = 370 1808 19.5 19.5	//max range 370 km
		}
	}
}
+PART[RO-anaps-20]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@name = RO-anaps-20e
	@title = AN/APS-20E Airborne Early Warning Radar
	@manufacturer = #roMfrGE
	@description = An early 1950s airborne radar set. An improved version of the earlier AN/APS-20 radars, the 20E increased power further, improving range against ships and performance against small, low-flying targets. Fitted to early EC-121s and P2Vs.
	
	@mass = 0.612	//More modern, but also more powerful. Same as AN/APS-20B I guess
	
	@MODULE[ModuleRadar]
	{
		@radarName = AN/APS-20E AEW Radar
		@resourceDrain = 8.574	//8574 Watts [6]
		
		@scanRotationSpeed = 90			//Up to 15 RPM
		
		!radarDetectionCurve {}		//just delete and add our own
		
		//Radar operates at 2.85 GHz. Assuming we can detect things down to half our wavelength, minimum cross section is ~0.01 m^2
		radarDetectionCurve
		{
			key = 0   5    0.00 0.08	//analog, no processing, set a floor at ~5m^2
			key = 185 20   0.08 0.43	//fighter-sized aircraft out to 100 nmi?
			key = 370 320  3.46 3.46	//max range 370 km
		}
	}
}