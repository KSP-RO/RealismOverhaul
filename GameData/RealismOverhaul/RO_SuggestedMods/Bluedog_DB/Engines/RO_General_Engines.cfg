//	================================================================================
//	General Engine Configs
//	================================================================================


// General
@PART[bluedog_E1_engine|bluedog_M1|bluedog_MB60|bluedog_MB60_deployable|bluedog_RL20_SL|bluedog_RL20_Vac|bluedog_RS30|bluedog_XLR129|bluedog_NERVA_II|bluedog_smallNuclearEngine|bluedog_NERVA_XE|bluedog_NERVA_FF]:FOR[RealismOverhaul]
{
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[engineSwitch]] {}
}


// E-1
@PART[bluedog_E1_engine]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = E1
}
@PART[bluedog_E1_engine]:AFTER[RealismOverhaulEngines]
{
	@title = E-1
	@description = Occupying a middle ground between the H-1 and the F-1 booster engines, the E-1 is a bit of a curious use case. Originally developed for the Titan I first stage (where it would be accompanied by a pair of LR-101 verniers), it was later proposed in a 4-engine cluster for the Saturn I first stage.
}

// M-1
@PART[bluedog_M1]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	@rescaleFactor = 1.6
	%engineType = M1
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = nozzle
		switcherDescription = Nozzle
		switcherDescriptionPlural = Nozzles (auto-switched)
		SUBTYPE
		{
			name = sl
			transform = nozzleSL
			NODE
			{
				name = bottom
				position = 0.0, -1.8101616, 0.0
			}
		}
		SUBTYPE
		{
			name = vac
			transform = nozzleVac
			NODE
			{
				name = bottom
				position = 0.0, -3.458046, 0.0
			}
		}
	}
}
@PART[bluedog_M1]:AFTER[RealismOverhaulEngines]
{
	@title = M-1
	@description = An almost unbelievably huge cryogenic engine, the Aerojet M-1 offers incredible thrust in the same class as the F1 combined with the efficiency of liquid hydrogen fuel. Intended for mega rockets such as improved Saturn vehicles. Originally designed for vacuum or high altitude operations, a sea level version is also available for booster applications.
	@MODULE[ModuleEngineConfigs]
	{
		@CONFIG[M-1-Spec]
		{
			%LinkB9PSModule[nozzle] { %subtype = vac }
		}
		@CONFIG[M-1]
		{
			%LinkB9PSModule[nozzle] { %subtype = vac }
		}
		@CONFIG[M-1U]
		{
			%LinkB9PSModule[nozzle] { %subtype = vac }
		}
		@CONFIG[M-1SL]
		{
			%LinkB9PSModule[nozzle] { %subtype = sl }
		}
		@CONFIG[M-1U-SL]
		{
			%LinkB9PSModule[nozzle] { %subtype = sl }
		}
	}
}


// MB60
@PART[bluedog_MB60]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = MB60
}
@PART[bluedog_MB60]:AFTER[RealismOverhaulEngines]
{
	@title = MB-60 Cryogenic Engine (BDB)
	@description = An extrememe performance evolution of the basic expander bleed cycle, this engine uses upstream boost pumps to achieve high turbo-pump and chamber pressures and produces double the thrust of a typical closed expander cycle engine. By injecting the bleed exhaust back into the nozzle for film cooling, some of the Isp loss from using the bleed cycle is also recovered. The end result is a no compromise upper stage engine.
}


// MB60 Deployable
@PART[bluedog_MB60_deployable]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = MB60
}
@PART[bluedog_MB60_deployable]:AFTER[RealismOverhaulEngines]
{
	@title = MB-60 Deployable Cryogenic Engine
	@description = An extrememe performance evolution of the basic expander bleed cycle, this engine uses upstream boost pumps to achieve high turbo-pump and chamber pressures and produces double the thrust of a typical closed expander cycle engine. By injecting the bleed exhaust back into the nozzle for film cooling, some of the Isp loss from using the bleed cycle is also recovered. The end result is a no compromise upper stage engine. This version has been modified with a deployable carbon nozzle extension for a more compact envelope.
}


// RL-20 Sea Level
@PART[bluedog_RL20_SL]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = RL20
}
@PART[bluedog_RL20_SL]:AFTER[RealismOverhaulEngines]
{
	@title = RL20-P3 Booster Engine
	@description = An early attempt at a staged combustion cycle design, this high pressure booster engine delivers high thrust and Isp in a remarkably compact package.
}


// RL-20 Vacuum
@PART[bluedog_RL20_Vac]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	!MODULE[ModuleEnginesFX]:HAS[#engineID[BDB_RL20_Vac]] {}
	MODULE
	{
		name = ModuleEnginesRF
		thrustVectorTransformName = thrustTransform
		engineID = BDB_RL20_Vac

		// For Thermal Patch, Do Not Delete
		maxThrust = 1
		atmosphereCurve
		{
			key = 1, 1
			key = 0, 0
		}

		// Back to Normal Stuff
	}
	!MODULE[ModuleDeployableEngine] {}
	%engineType = RL20Bimodal
}
@PART[bluedog_RL20_Vac]:AFTER[RealismOverhaulEngines]
{
	@MODULE[ModuleBimodalEngineConfigs]
	{
		animationName = RL20_deploy
	}
	@title = RL20-P3 Multi-Mode Engine
	@manufacturer = Pratt & Whitney
	@description = An early attempt at a staged combustion cycle design, this high pressure vacuum engine delivers high thrust and Isp. A deployable nozzle extension keeps the engine very compact even with a large expansion ratio.
}


// RS30
@PART[bluedog_RS30]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = RS30
}
@PART[bluedog_RS30]:AFTER[RealismOverhaulEngines]
{
	@title = RS-30 Advanced Space Engine
	@description = This compact engine uses scaled down SSME components and harnasses the capabilities of staged combustion to deliver astonishing performance. Although slightly less powerful than the late model RL10 engines, the combination of high chamber pressure and a 1:400 expansion ratio results in an incredible 474.5s of vacuum Isp. Designed from the ground up for extended on orbit appplications such as the IPP space tug.
}


// NERVA_XE
@PART[bluedog_NERVA_XE]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchMount]]
	{
		@SUBTYPE[0.9375m]
		{
			@name = 1.5m
		}
		@SUBTYPE[0.625m]
		{
			@name = 1m
		}
	}
	%engineType = NERVA_XE
}
@PART[bluedog_NERVA_XE]:AFTER[RealismOverhaulEngines]
{
	@title = NERVA XE Nuclear Engine
}


// NERVA_FF Aerospike
+PART[bluedog_NERVA_FF]:FOR[RealismOverhaul]
{
	@name = bluedog_NERVA_FF_Aerospike
	%RSSROConfig = True
	%rescaleFactor = 1.6
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchMount]]
	{
		@SUBTYPE[0.9375m]
		{
			@name = 1.5m
		}
		@SUBTYPE[0.625m]
		{
			@name = 1m
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		switcherDescription = Engine Config
		switcherDescriptionPlural = Engine Configs
		moduleID = meshSwitchNozzle
		SUBTYPE
		{
			name = Aerospike
			transform = aerospike
			NODE
			{
				name = bottom
				position = 0,-0.531424,0
			}
		}
	}
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = bellNozzle
	}
	%engineType = NERVA_NRX
}
@PART[bluedog_NERVA_FF_Aerospike]:AFTER[RealismOverhaulEngines]
{
	@MODULE[ModuleEngineConfigs]
	{
		@CONFIG[NERVA_NRX-Hydrogen]
		{
			@name = NERVA_NRX-Hydrogen (Aerospike)
			!atmosphereCurve {}
			atmosphereCurve
			{
				key = 0 850 // guess
				key = 1 820 // guess
			}
		}
		@configuration = NERVA_NRX-Hydrogen (Aerospike)
	}
	@title = NERVA Full Flow Flight Aerospike Engine
	@description = Using the same KIWI B reactor as the NERVA XE, this refined design uses a full flow cycle for improved performance and reliability. This variant uses an Aerospike Nozzle to shorten the overall length of the engine.
}


// NERVA_FF
@PART[bluedog_NERVA_FF]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[meshSwitchMount]]
	{
		@SUBTYPE[0.9375m]
		{
			@name = 1.5m
		}
		@SUBTYPE[0.625m]
		{
			@name = 1m
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		switcherDescription = Engine Config
		switcherDescriptionPlural = Engine Configs
		moduleID = nozzle
		SUBTYPE
		{
			name = Bell
			transform = bellNozzle

		}
	}
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = aerospike
	}
	%engineType = NERVA_NRX
}
@PART[bluedog_NERVA_FF]:AFTER[RealismOverhaulEngines]
{
	@title = NERVA Full Flow Flight Engine
	@description = Using the same KIWI B reactor as the NERVA XE, this refined design uses a full flow cycle for improved performance and reliability.
}


// NERVA_II
@PART[bluedog_NERVA_II]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = NERVAII
}
@PART[bluedog_NERVA_II]:AFTER[RealismOverhaulEngines]
{
	@title = NERVA II Nuclear Engine
	@description = Built around the incredibly powerful Phoebus II reactor, this nuclear engine emphasises thrust to enable demanding crewed interplanetary missions.
}


// Small Nuclear Engine
@PART[bluedog_smallNuclearEngine]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	%engineType = KIWIA24
}
@PART[bluedog_smallNuclearEngine]:AFTER[RealismOverhaulEngines]
{
	@title = Los Alamos KIWI NTR Engine
	@description = Using a reactor derived from the Pewee reactor from Project Rover, the creatively named "Small Engine" features an unusual sideways folding nozzle to maximise room inside the limited Space Shuttle Orbiter payload bay.
}


// XLR-129
@PART[bluedog_XLR129]:FOR[RealismOverhaul]
{
	%RSSROConfig = True
	%rescaleFactor = 1.6
	@maxTemp = 2600
	@skinMaxTemp = 2000
	!MODULE[ModuleEnginesFX]:HAS[#engineID[BDB_XLR129_SL]] {}
	!MODULE[ModuleEnginesFX]:HAS[#engineID[BDB_XLR129_vac]] {}
	!MODULE[MultiModeEngine] {}
	MODULE
	{
		name = ModuleEnginesRF
		thrustVectorTransformName = thrustTransform
		engineID = BDB_XLR129_vac

		// For Thermal Patch, Do Not Delete
		maxThrust = 1
		atmosphereCurve
		{
			key = 1, 1
			key = 0, 0
		}

		// Back to Normal Stuff
	}
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = nozzleVac
	}
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = fxTransformVac
	}
	%engineType = LR129
}
@PART[bluedog_XLR129]:AFTER[RealismOverhaulEngines]
{
	@MODULE[ModuleBimodalEngineConfigs]
	{
		animationName = deploy
	}
	@title = LR-129
	@description = Derived from RL20, the XLR-129 has murky origins, having been allegedly designed for a classified rocket spyplane. Now available for civilian use, this engine provides improved thrust and greater flexibility compared to its predecessor. It is suitable for a variety of applications such as improved Saturn rockets or even reusable spaceplanes. Of particular interest is its dual mode capability. <#ef7b06> AUTHOR'S NOTE: The engine can be used with its two position nozzle either retracted for optimal sea level performance or deployed for optimal altitude or vacuum performance. This switch can be made in flight using the mode switch via the right click part action window or an action group.</color>
}


// THERMAL PATCH
@PART[bluedog_RL20_Vac|bluedog_XLR129]:LAST[RealismOverhaul]
{
	@MODULE[ModuleEnginesRF]
	{
		!maxThrust = NULL
		!atmosphereCurve{}
	}
}
