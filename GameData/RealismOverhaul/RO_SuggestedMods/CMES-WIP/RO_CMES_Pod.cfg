//  ==================================================
//  Sources:

//  From Apollo LM to Altair:                              http://www.csc.caltech.edu/references/AIAA-2009-6404.pdf
//  The NASA Docking System (NDS):                         https://web.archive.org/web/20130215180627/http://dockingstandard.nasa.gov/Meetings/TIM_%28Nov-17-2010%29/NDS_TIM_presentation.pdf
//  Orion MPCV Quick Facts:                                https://www.nasa.gov/sites/default/files/atoms/files/fs-2014-08-004-jsc-orion_quickfacts-web.pdf
//  Orion CEV Facts:                                       https://www.nasa.gov/pdf/306407main_orion_crew%20_expl_vehicle.pdf
//  Project Orion Overview:                                https://www.nasa.gov/pdf/156298main_orion_handout.pdf
//  Challenges of the Orion CM Touchdown Roll Orientation: https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20080015885.pdf
//  Aerojet Rocketdyne MR thruster series:                 http://www.asi.org/adb/04/03/09/01/rocket-research.html
//  ECLSS (Altair, Apollo, Orion, Lunar Outpost):          http://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20090029327.pdf
//  The Orion MPCV European Service Module:                http://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/20140010527.pdf

//  ==================================================
//  Removed extra parts.
//  ==================================================

!PART[xALCOR_LanderCapsule2x]:FOR[RealismOverhaul]{}

!PART[xALCOR_LanderCapsule3x]:FOR[RealismOverhaul]{}

!PART[Xcupola2X]:FOR[RealismOverhaul]{}

!PART[Xcupola3X]:FOR[RealismOverhaul]{}

!PART[xLERroverXBodyxX]:FOR[RealismOverhaul]{}

!PART[xLERroverXBod32xX]:FOR[RealismOverhaul]{}

!PART[xLERDockPortSHABSSA]:FOR[RealismOverhaul]{}

!PART[xLERDockPortSHABSSA3xq]:FOR[RealismOverhaul]{}

!PART[xLERDockPortSHABSSA3xXq]:FOR[RealismOverhaul]{}

!PART[xndsport2x]:FOR[RealismOverhaul]{}

!PART[xndsport3x]:FOR[RealismOverhaul]{}

!PART[xndsport5x]:FOR[RealismOverhaul]{}

!PART[xparachuteRadial2x]:FOR[RealismOverhaul]{}

//  ==================================================
//  MMSEV crew cabin.

//  Dimensions: 3.6 m x 2.8 m
//  Gross Mass: 2000 Kg
//  ==================================================

@PART[xALCOR_LanderCapsulex]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    MODEL
    {
        model = CMES/Pod/ALCOR_Monkey_Rover/Part/ALCORcapsule
        scale = 1.85, 1.85, 1.85
    }

    @scale = 1.0
    @rescaleFactor = 1.0

    @node_stack_top = 0.0, 1.62, 0.0, 0.0, 1.0, 0.0, 3
    @node_stack_bottom = 0.0, -1.14, 0.0, 0.0, -1.0, 0.0, 3

    @title = MMSEV Crew Cabin
    @manufacturer = NASA
    @description = The MMSEV (Multi - Mission Space Exploration Vehicle) is a pressurized cabin exploration vehicle for either space or surface application. Features an airlock and a travel endurance for up to 10 kilometers.

    @mass = 2.0
    @crashTolerance = 8
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    @breakingForce = 250
    @breakingTorque = 250
    @vesselType = Ship
    !stagingIcon = NULL
    @CrewCapacity = 4
    %bulkheadProfiles = size3

    @MODULE[ModuleCommand]
    {
        %RESOURCE
        {
            %name = ElectricCharge
            %rate = 0.5
        }
    }

    @MODULE[ModuleSAS]
    {
        %SASServiceLevel = 3
    }

    MODULE[ModuleScienceContainer]
    {
        @storageRange = 3.0
    }

    !MODULE[ModuleFuelTanks],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        basemass = -1
        volume = 15

        //  Batteries 3.6 kWh.

        TANK
        {
            name = ElectricCharge
            amount = 12960
            maxAmount = 12960
        }
    }

    !MODULE[ModuleScienceLab],*{}

    !MODULE[ModuleReactionWheel],*{}

    !MODULE[ModuleGenerator],*{}

    !MODULE[RasterPropMonitorComputer],*{}

    !MODULE[KASModuleContainer],*{}

    !MODULE[MechJebCore],*{}

    !MODULE[ModuleConnectedLivingSpace],*{}

    MODULE:NEEDS[ConnectedLivingSpace]
    {
        name = ModuleConnectedLivingSpace
        passable = True
        impassablenodes = bottom
        surfaceAttachmentsPassable = True
    }

    !RESOURCE,*{}
}

//  ==================================================
//  MMSEV crew cabin.

//  Remote Tech compatibility.
//  ==================================================

@PART[xALCOR_LanderCapsulex]:FOR[RealismOverhaul]:NEEDS[RemoteTech]
{
    !MODULE[ModuleDataTransmitter],*{}

    !MODULE[ModuleSPU*],*{}

    !MODULE[ModuleRTAntenna*],*{}

    @MODULE[ModuleCommand]
    {
        @RESOURCE[ElectricCharge]
        {
            @rate -= 0.008
        }
    }

    MODULE
    {
        name = ModuleSPU
        IsRTCommandStation = False
        RTCommandMinCrew = 0
    }

    MODULE
    {
        name = ModuleRTAntenna
        IsRTActive = False
        Mode0OmniRange = 0
        Mode1OmniRange = 250000
        EnergyCost = 0.008
        DeployFxModules = 0
        ProgressFxModules = 1

        TRANSMITTER
        {
            PacketInterval = 1.0
            PacketSize = 1.024
            PacketResourceCost = 0.025
        }
    }
}

//  ==================================================
//  MMSEV crew cabin.

//  TAC Life Support compatibility.
//  ==================================================

@PART[xALCOR_LanderCapsulex]:FOR[RealismOverhaul]:NEEDS[TacLifeSupport]
{
    @description ^= :$: Supports 2 crew for 7 days or up to 4 crew for half the time.:

    @mass -= 0.11

    @MODULE[ModuleFuelTanks]
    {
        @volume = 350

        TANK
        {
            name = Food
            amount = 81.89
            maxAmount = 81.89
        }

        TANK
        {
            name = Water
            amount = 54.19
            maxAmount = 54.19
        }

        TANK
        {
            name = Oxygen
            amount = 8285.76
            maxAmount = 8285.76
        }

        TANK
        {
            name = CarbonDioxide
            amount = 0
            maxAmount = 256
        }

        TANK
        {
            name = Waste
            amount = 0
            maxAmount = 7.45
        }

        TANK
        {
            name = WasteWater
            amount = 0
            maxAmount = 68.95
        }

        TANK
        {
            name = LithiumHydroxide
            amount = 15.75
            maxAmount = 15.75
        }
    }

    MODULE
    {
        name = TacGenericConverter
        converterName = CO2 Scrubber
        conversionRate = 2.0
        inputResources = CarbonDioxide, 0.006216, ElectricCharge, 0.010, LithiumHydroxide, 0.0000085683
        outputResources = Water, 0.0032924498, True, Waste, 0.0000257297, False
    }
}

//  ==================================================
//  Altair ascent module (LDAC - 2 configuration).

//  Dimensions: 5.5 m x 6 m
//  Gross Mass: 10610 Kg

//  This part is currently missing from CMES but we
//  retain it's RO config for a future release.
//  ==================================================

@PART[altairPod]:FOR[RealismOverhaul]
{
    %RSSROConfig = False

    !mesh = NULL

    MODEL
    {
        model = CMES/Pod/altairPod/altairPod
        scale = 1.0, 1.0, 1.0
    }

    %scale = 1.0
    @rescaleFactor = 1.0

    @node_stack_top = 0.0, 2.22, 0.0, 0.0, 1.0, 0.0, 3
    @node_stack_bottom = 0.0, -3.8, 0.0, 0.0, -1.0, 0.0, 3

    @mass = 5.1
    %crashTolerance = 8
    %breakingForce = 250
    %breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    %fuelCrossFeed = True
    %stageOffset = 1
    %childStageOffset = 1
    %stagingIcon = LIQUID_ENGINE
    %bulkheadProfiles = size2, size3
    @CrewCapacity = 4

    %engineType = AJ10_190
    %engineTypeMult = 1
    %massOffset = 0
    %ignoreMass = True

    !INTERNAL[ALCORMonleyInternals]{}

    @MODULE[ModuleCommand]
    {
        @minimumCrew = 0

        RESOURCE
        {
            name = ElectricCharge
            rate = 1.15
        }
    }

    @MODULE[ModuleSAS]
    {
        %SASServiceLevel = 3
    }

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
        @minThrust = 26.7
        @maxThrust = 26.7
        @heatProduction = 100
        %exhaustDamageMultiplier = 0.75
        %ullage = False
        %pressureFed = True
        %ignitions = 500

        @PROPELLANT[LiquidFuel]
        {
            @name = MMH
            @ratio = 0.499
        }

        @PROPELLANT[Oxidizer]
        {
            @name = MON3
            @ratio = 0.501
            @DrawGauge = False
        }

        @atmosphereCurve
        {
            @key,0 = 0 316
            @key,1 = 1 100
        }
    }

    @MODULE[ModuleRCS]
    {
        @thrusterPower = 0.445
        !resourceName = NULL

        PROPELLANT
        {
            name = MMH
            ratio = 0.499
        }

        PROPELLANT
        {
            name = NTO
            ratio = 0.501
        }

        PROPELLANT
        {
            name = Helium
            ratio = 10.0
            ignoreForIsp = True
        }

        @atmosphereCurve
        {
            @key,0 = 0 300
            @key,1 = 1 82
        }
    }

    !MODULE[RasterPropMonitorComputer],*{}

    !MODULE[MechJebCore],*{}

    !MODULE[ModuleAlternator],*{}

    !MODULE[ModuleReactionWheel],*{}

    !MODULE[ModuleGenerator],*{}

    !MODULE[ModuleFuelTanks],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 4900
        basemass = -1

        //  Batteries 3.6 kWh.

        TANK
        {
            name = ElectricCharge
            amount = 12960
            maxAmount = 12960
        }

        //  AMAE & ACS fuel 2015 Kg.

        TANK
        {
            name = MMH
            amount = 2290
            maxAmount = 2290
        }

        //  AMAE & ACS oxidizer 3273 Kg.

        TANK
        {
            name = MON3
            amount = 2300
            maxAmount = 2300
        }

        //  AMAE & ACS Helium 9 Kg.

        TANK
        {
            name = Helium
            amount = 45900
            maxAmount = 45900
        }
    }

    !MODULE[ModuleConnectedLivingSpace],*{}

    MODULE:NEEDS[ConnectedLivingSpace]
    {
        name = ModuleConnectedLivingSpace
        passable = True
        impassablenodes = bottom
        surfaceAttachmentsPassable = True
    }

    !RESOURCE,*{}
}

//  ==================================================
//  Altair ascent module (LDAC - 2 configuration).

//  Engine configuration.
//  ==================================================

@PART[altairPod]:AFTER[RealismOverhaulEngines]
{
    @title = Altair Ascent Module
    @manufacturer = Boeing Co. & NASA
    @description = The ascent module for the Altair lunar lander.

    //  AJ10-190 has 6 degrees of gimbal for pitch and 7 for yaw.

    @MODULE[ModuleGimbal]
    {
        !gimbalRange = NULL
        %gimbalRangeXP = 6
        %gimbalRangeXN = 6
        %gimbalRangeYP = 7
        %gimbalRangeYN = 7
    }
}

//  ==================================================
//  Altair ascent module (LDAC - 2 configuration).

//  Remote Tech compatibility.
//  ==================================================

@PART[altairPod]:FOR[RealismOverhaul]:NEEDS[RemoteTech]
{
    !MODULE[ModuleDataTransmitter],*{}

    !MODULE[ModuleSPU*],*{}

    !MODULE[ModuleRTAntenna*],*{}

    @MODULE[ModuleCommand]
    {
        @RESOURCE[ElectricCharge]
        {
            @rate -= 0.015
        }
    }

    MODULE
    {
        name = ModuleSPU
        IsRTCommandStation = False
        RTCommandMinCrew = 0
    }

    MODULE
    {
        name = ModuleRTAntenna
        IsRTActive = False
        Mode0OmniRange = 1000000
        Mode1OmniRange = 1000000
        EnergyCost = 0.015
        DeployFxModules = 0
        ProgressFxModules = 1

        TRANSMITTER
        {
            PacketInterval = 1.0
            PacketSize = 1.024
            PacketResourceCost = 0.05
        }
    }
}

//  ==================================================
//  Altair ascent module (LDAC - 2 configuration).

//  TAC Life Support compatibility.
//  ==================================================

@PART[altairPod]:FOR[RealismOverhaul]:NEEDS[TacLifeSupport]
{
    @description ^= :$: Supports a 4 crew lunar sortie for up to 7 days.:

    @mass -= 0.16

    @MODULE[ModuleFuelTanks]
    {
        @volume = 5400

        TANK
        {
            name = Food
            amount = 163.8
            maxAmount = 163.8
        }

        TANK
        {
            name = Water
            amount = 15.5
            maxAmount = 15.5
        }

        TANK
        {
            name = Oxygen
            amount = 2367.5
            maxAmount = 2367.5
        }

        TANK
        {
            name = CarbonDioxide
            amount = 0
            maxAmount = 2048
        }

        TANK
        {
            name = Waste
            amount = 0
            maxAmount = 14.91
        }

        TANK
        {
            name = WasteWater
            amount = 0
            maxAmount = 137.9
        }

        TANK
        {
            name = LithiumHydroxide
            amount = 63
            maxAmount = 63
        }
    }

    MODULE
    {
        name = TacGenericConverter
        converterName = CO2 Scrubber
        conversionRate = 4.0
        inputResources = CarbonDioxide, 0.006216, ElectricCharge, 0.010, LithiumHydroxide, 0.0000085683
        outputResources = Water, 0.0032924498, True, Waste, 0.0000257297, False
    }
}

//  ==================================================
//  Linear RCS thruster (low thrust).

//  Dimensions: 0.1 m x 0.2 m
//  Inert Mass: 1.5 Kg
//  ==================================================

@PART[B9_Control_RCS_Port_R1x]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    @MODEL
    {
        %scale = 1.0, 1.0, 1.0
    }

    @scale = 1.0
    @rescaleFactor = 1.0

    @node_attach = 0.0, 0.0, 0.0, 0.0, -1.0, 0.0

    @title = R1 - A Attitude Jet (69/111N class)
    @manufacturer = Generic
    @description = A generic, single port, RCS thruster for attitude control.

    @mass = 0.0015
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    @fuelCrossFeed = True
    %bulkheadProfiles = srf

    %useRcsConfig = RCSBlockQuarter
    %useRcsMass = True
    %useRcsCostMult = 0.25

    @MODULE[ModuleRCS]
    {
        @thrusterPower = 0.069
        !resourceName = NULL
        @resourceFlowMode = STACK_PRIORITY_SEARCH

        PROPELLANT
        {
            name = Hydrazine
            ratio = 1.0
        }

        @atmosphereCurve
        {
            @key,0 = 0 254
            @key,1 = 1 82
        }
    }
}

//  ==================================================
//  Linear RCS thruster (medium thrust).

//  Dimensions: 0.15 m x 0.3 m
//  Inert Mass: 3 Kg
//  ==================================================

@PART[B9_Control_RCS_Port_R1X1x]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    @MODEL
    {
        %scale = 1.5, 1.5, 1.5
    }

    @scale = 1.0
    @rescaleFactor = 1.0

    @node_attach = 0.0, 0.0, 0.0, 0.0, -1.0, 0.0

    @title = R1 - B Attitude Jet (138/233N class)
    @manufacturer = Generic
    @description = A generic, single port, RCS thruster for attitude control.

    @mass = 0.003
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    @fuelCrossFeed = True
    %bulkheadProfiles = srf

    %useRcsConfig = RCSBlockHalf
    %useRcsMass = True
    %useRcsCostMult = 0.25

    @MODULE[ModuleRCS]
    {
        @thrusterPower = 0.138
        !resourceName = NULL
        @resourceFlowMode = STACK_PRIORITY_SEARCH

        PROPELLANT
        {
            name = Hydrazine
            ratio = 1.0
        }

        @atmosphereCurve
        {
            @key,0 = 0 254
            @key,1 = 1 82
        }
    }
}

//  ==================================================
//  Linear RCS thruster (high thrust).

//  Dimensions: 0.15 m x 0.3 m
//  Inert Mass: 12 Kg
//  ==================================================

@PART[B9_Control_RCS_Port_R1Ox]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @MODEL
    {
        %scale = 2.5, 2.5, 2.5
    }

    @scale = 1.0
    @rescaleFactor = 1.0

    @node_attach = 0.0, 0.0, 0.0, 0.0, -1.0, 0.0

    @title = R1 - C Attitude Jet (550/890N class)
    @manufacturer = Generic
    @description = A generic, single port, RCS thruster for attitude control.

    @mass = 0.012
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    @fuelCrossFeed = True
    %bulkheadProfiles = srf

    %useRcsConfig = RCSBlockDouble
    %useRcsMass = True
    %useRcsCostMult = 0.25

    @MODULE[ModuleRCS]
    {
        @thrusterPower = 0.55
        !resourceName = NULL
        @resourceFlowMode = STACK_PRIORITY_SEARCH

        PROPELLANT
        {
            name = Hydrazine
            ratio = 1.0
        }

        @atmosphereCurve
        {
            @key,0 = 0 254
            @key,1 = 1 82
        }
    }
}

//  ==================================================
//  Mobile base chassis.

//  Dimensions: 2.5 m x 5.3 m
//  Inert Mass: 400 Kg
//  ==================================================

@PART[xLERroverBodyx]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    MODEL
    {
        model = CMES/Pod/LER_base/model
        scale = 2.125, 2.125, 1.85
    }

    %scale = 1.0
    @rescaleFactor = 1.0

    @node_stack_top = 0.0, 0.125, 0.0, 0.0, 1.0, 0.0, 3
    @node_stack_bottom = 0.0, -0.95, 0.0, 0.0, -1.0, 0.0, 3
    !node_stack_1 = NULL
    !node_stack_2 = NULL
    !node_stack_3 = NULL
    !node_stack_4 = NULL
    !node_stack_5 = NULL
    !node_stack_6 = NULL

    @title = Mobile Base Chassis
    @manufacturer = NASA
    @description = A modular structural frame. Can be used as a chassis for the MMSEV rover or for mobile surface habitats.

    @mass = 0.4
    @crashTolerance = 14
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    !explosionPotential = NULL
    %bulkheadProfiles = size2, size3
    !CoMOffset = NULL
    !CoLOffset = NULL

    !MODULE,*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Surface Docking Mechanism (SDM).

//  Dimensions: 1.2 m x 1.7 m
//  Inert Mass: 350 Kg
//  ==================================================

@PART[xLERDockPortxs]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    MODEL
    {
        model = CMES/Pod/LER_dockport/model
        scale = 1.6, 1.6, 1.6
    }

    %scale = 1.0
    @rescaleFactor = 1.0

    @node_attach = 0.0, -0.2, 0.0, -1.0, 0.0, 0.0

    @title = Surface Docking Mechanism (SDM)
    %manufacturer = Boeing Co.
    @description = The SDM provides a safe pressurized passage for crew and cargo between surface - landed modules or exploration rovers.

    @mass = 0.35
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    !stagingIcon = NULL
    %bulkheadProfiles = srf

    @MODULE[ModuleDockingNode]
    {
        @nodeType = NASADockSurf
        %acquireForce = 0.5
        %acquireMinFwdDot = 0.8
        %acquireminRollDot = -3.40282347E+38
        %acquireRange = 0.25
        %acquireTorque = 0.5
        %captureMaxRvel = 0.1
        %captureMinFwdDot = 0.998
        %captureMinRollDot = -3.40282347E+38
        %captureRange = 0.05
        %minDistanceToReEngage = 0.25
        %undockEjectionForce = 0.1
    }

    @MODULE[ModuleAnimateGeneric]
    {
        @startEventGUIName = Deploy Docking Port
        @endEventGUIName = Retract Docking Port
        %actionGUIName = Toggle Docking Port
        %allowAnimationWhileShielded = False
    }

    !MODULE[ModuleConnectedLivingSpace],*{}

    MODULE:NEEDS[ConnectedLivingSpace]
    {
        name = ModuleConnectedLivingSpace
        passable = True
        passableWhenSurfaceAttached = True
    }
}

//  ==================================================
//  Orion EFT Crew Module LES decoupling system.

//  Dimensions: 2.7 m x 1 m
//  Gross Mass: 600 Kg
//  ==================================================

@PART[OrionDockingPortXx]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    @MODEL
    {
        @scale = 1.575, 1.35, 1.575
    }

    @scale = 1.0
    @rescaleFactor = 1.0

    @node_stack_top = 0.0, 0.625, 0.0, 0.0, 1.0, 0.0, 2
    @node_stack_bottom = 0.0, -0.185, 0.0, 0.0, -1.0, 0.0, 2

    %fx_gasBurst_white = 0.0, 0.625, 0.0, 0.0, 1.0, 0.0, decouple

    %sound_decoupler_fire = decouple

    @title = Orion EFT LAS Decoupler
    %manufacturer = Lockheed Martin
    @description = The Launch Abort System (LAS) explosive bolt decoupler of the Orion EFT Crew Module.

    @mass = 0.6
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 773.15
    %skinMaxTemp = 873.15
    @fuelCrossFeed = False
    %stageOffset = 1
    %childStageOffset = 1
    %emissiveConstant = 0.7
    @bulkheadProfiles = size2

    !MODULE,*{}

    MODULE
    {
        name = ModuleDecouple
        ejectionForce = 0
        explosiveNodeID = top
    }

    !RESOURCE,*{}
}

//  ==================================================
//  Orion MPCV crew module docking system.

//  Dimensions: 2.7 m x 1 m
//  Inert Mass: 600 Kg
//  ==================================================

@PART[OrionDockingPortXWSTANDARDDOCKPORT]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    @MODEL
    {
        @scale = 1.575, 1.35, 1.575
    }

    @scale = 1.0
    @rescaleFactor = 1.0

    @node_stack_top = 0.0, 0.625, 0.0, 0.0, 1.0, 0.0, 2
    @node_stack_bottom = 0.0, -0.185, 0.0, 0.0, -1.0, 0.0, 2

    @title = Orion MPCV Docking System
    %manufacturer = Lockheed Martin
    @description = The NASA docking system for the Orion MPCV Crew Module.

    @mass = 0.6
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 773.15
    %skinMaxTemp = 873.15
    @fuelCrossFeed = False
    %stageOffset = 1
    %childStageOffset = 1
    %emissiveConstant = 0.7
    %bulkheadProfiles = size2

    !MODULE[ModuleDockingNode],*{}

    MODULE
    {
        name = ModuleDockingNode
        nodeType = NASADock
        referenceAttachNode = top
        acquireForce = 0.5
        acquireMinFwdDot = 0.8
        acquireminRollDot = -3.40282347E+38
        acquireRange = 0.25
        acquireTorque = 0.5
        captureMaxRvel = 0.1
        captureMinFwdDot = 0.998
        captureMinRollDot = -3.40282347E+38
        captureRange = 0.05
        minDistanceToReEngage = 0.25
        undockEjectionForce = 0.1
        stagingEnabled = False
    }

    !MODULE[MechJebCore],*{}

    !MODULE[ModuleConnectedLivingSpace],*{}

    MODULE:NEEDS[ConnectedLivingSpace]
    {
        name = ModuleConnectedLivingSpace
        passable = True
    }
}

//  ==================================================
//  Orion Crew Module (EFT & MPCV) Launch Abort System (LAS).

//  Dimensions: 4.8 m x 13.3 m
//  Gross Mass: 6180 Kg
//  ==================================================

@PART[XOrionLES]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    !mesh = NULL

    @MODEL
    {
        @scale = 1.58, 1.4125, 1.58
    }

    //  ACM thrusters.

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = 0.0, 8.775, -0.34
        rotation = -90.0, 0.0,  0.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = 0.0, 8.775, 0.34
        rotation = 90.0, 0.0, 0.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = 0.34, 8.775, 0.0
        rotation = 0.0, 0.0, -90.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = -0.34, 8.775, 0.0
        rotation = 0.0, 0.0, 90.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = -0.23, 8.775, -0.23
        rotation = -90.0, 45.0, 0.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = 0.25, 8.775, 0.25
        rotation = 90.0, 45.0, 0.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = -0.225, 8.775, 0.225
        rotation = 90.0, -45.0, 0.0
    }

    MODEL
    {
        model = RealismOverhaul/Models/LinearRCS
        scale = 0.1, 0.1, 0.1
        position = 0.225, 8.775, -0.225
        rotation = -90.0, -45.0,  0.0
    }

    %scale = 1.0
    @rescaleFactor = 1.0

    @node_stack_bottom = 0.0, -0.95, 0.0, 0.0, -1.0, 0.0, 2

    @title = Orion Launch Abort System (LAS)
    @manufacturer = Orbital ATK
    @description = The launch escape tower of the Orion command module. Activates in the case of an emergency and carries the crew of the Orion safely away from the launch vehicle.

    @mass = 4.13
    @crashTolerance = 14
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 673.15
    %heatConductivity = 0.06
    %skinInternalConductionMult = 4.0
    %emissiveConstant = 0.5
    %fuelCrossFeed = False
    %stageOffset = 1
    %childStageOffset = 1
    %emissiveConstantant = 0.7
    %bulkheadProfiles = size2

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
        @minThrust = 1760
        @maxThrust = 1760
        @heatProduction = 100
        %ullage = False
        %pressureFed = False
        %ignitions = 1

        @PROPELLANT[SolidFuel]
        {
            @name = HTPB
        }

        @atmosphereCurve
        {
            @key,0 = 0 290
            @key,1 = 1 245
        }
    }

    !MODULE[ModuleDecouple],*{}

    MODULE
    {
        name = ModuleRCS
        thrusterTransformName = RCSthruster
        thrusterPower = 22.3

        PROPELLANT
        {
            name  = Hydrazine
            ratio = 1.0
        }

        atmosphereCurve
        {
            key = 0 254
            key = 1 82
        }
    }

    !MODULE[ModuleFuelTanks],*{}

    MODULE
    {
        name = ModuleFuelTanks
        volume = 1071.42
        type = HTPB
        basemass = -1

        //  HTPB/AP propellant mixture ~1900 Kg.

        TANK
        {
            name = HTPB
            amount = 1071.42
            maxAmount = 1071.42
        }
    }

    !MODULE[ModuleEngineConfigs],*{}

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = Orion-LAS
        modded = False

        CONFIG
        {
            name = Orion-LAS
            minThrust = 1760
            maxThrust = 1760
            heatProduction = 100
            ullage = False
            pressureFed = False
            ignitions = 1

            PROPELLANT
            {
                name = HTPB
                ratio = 1.0
                DrawGauge = True
            }

            atmosphereCurve
            {
                key = 0 290
                key = 1 245
            }
        }
    }

    !RESOURCE,*{}

    //  ACM propellant 150 Kg.

    RESOURCE
    {
        name = Hydrazine
        amount = 150
        maxAmount = 150
    }
}

//	==================================================
//	Orion EFT Crew Module.

//	Realism Overhaul configuration.

//	Dimensions: 3.300 x 5.030 m
//	Gross Mass: 8900.000 Kg
//	==================================================

	@PART[XOrionPodXbb31]:FOR[RealismOverhaul]
	{
		@module		 = Part
		%RSSROConfig = true

		@MODEL
		{
			@scale	  = 1.500, 1.200, 1.500
			%position = 0.000, 0.000, 0.000
			%rotation = 0.000, 0.000, 0.000
		}

		//	Linear negative pitch thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =   0.000, 0.880, -1.390
			rotation = -90.000, 0.000,  0.000
		}

		//	Linear positive pitch thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =   0.000, 0.070, -1.950
			rotation = -55.000, 0.000,  0.000
		}

		//	Linear negative yaw thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 = 0.100, 0.100,   0.100
			position = 1.900, 0.040,   0.000
			rotation = 0.000, 0.000, -55.000
		}

		//	Linear positive yaw thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =  0.100, 0.100,  0.100
			position = -1.900, 0.040,  0.000
			rotation =  0.000, 0.000, 55.000
		}

		//	Linear negative roll thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =  -1.450, 0.030, -1.320
			rotation = -90.000, 0.000,  0.000
		}

		//	Linear positive roll thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =   1.450, 0.030, -1.320
			rotation = -90.000, 0.000,  0.000
		}

		!mesh		   = NULL
		@scale		   = 1.000
		@rescaleFactor = 1.000

		@node_stack_bottom = 0.000, -1.045, 0.000, 0.000, -1.000, 0.000, 3
		@node_stack_top	   = 0.000,  0.960, 0.000, 0.000,  1.000, 0.000, 3
		@node_stack_1	   = 0.000,  1.250, 0.000, 0.000,  1.000, 0.000, 2

		@title		  = Orion EFT Crew Module
		@manufacturer = Lockheed Martin
		@description  = The Exploration Flight Test (EFT) article for the Orion MPCV.

		@mass		      = 6.6250
		@crashTolerance   = 12
		@breakingForce    = 250
		@breakingTorque   = 250
		@maxTemp	      = 800
		%emissiveConstant	  = 0.850
		@CrewCapacity     = 0
		@vesselType		  = Probe
		%fuelCrossFeed    = true
		@CoMOffset 		  = 0.000, -0.670, 0.000
		!CoLOffset 		  = NULL
		!CoDOffset 		  = NULL
		%bulkheadProfiles = size2, size3

		!INTERNAL[ALCOR_Monley_Internals]{}

		@MODULE[ModuleCommand]
		{
			RESOURCE
			{
				name = ElectricCharge
				rate = 1.350
			}
		}

		@MODULE[ModuleSAS]
		{
			%SASServiceLevel = 3
		}

		!MODULE[ModuleReactionWheel]{}

		!MODULE[ModuleScienceContainer]{}

		!MODULE[ModuleScienceLab]{}

		!MODULE[ModuleDataTransmitter]{}

		!MODULE[MechJebCore]{}

		!MODULE[ModuleGenerator]{}

		!MODULE[RasterPropMonitorComputer]{}

		!MODULE[ModuleAblator]{}

		!MODULE[ModuleHeatShield]{}

		!MODULE[ModuleAeroReentry]{}

		MODULE
		{
			name				  = ModuleRCS
			thrusterTransformName = RCSthruster
			thrusterPower		  = 0.237

			PROPELLANT
			{
				name  = Hydrazine
				ratio = 1.000
			}

			atmosphereCurve
			{
				key = 0 254.00
				key = 1 82.08
			}
		}

		MODULE
		{
			name		   = CoMShifter
			DescentModeCoM = 0.000, 0.000, -0.300
		}

		%skinMaxTemp = 3600
		%skinMassPerArea = 4
		MODULE
		{
			name = ModuleAblator
			ablativeResource = Ablator
			lossExp = -8000
			lossConst = 0.06
			pyrolysisLossFactor = 26000
			ablationTempThresh = 500
			reentryConductivity = 0.01
			charMax = 1
			charMin = 1
		}

		MODULE
		{
			name	 = ModuleFuelTanks
			basemass = -1
			type	 = ServiceModule
			volume	 = 150

			TANK
			{
				name	  = ElectricCharge
				amount	  = 43200
				maxAmount = 43200
			}

			TANK
			{
				name	  = Hydrazine
				amount	  = 85
				maxAmount = 85
			}
		}

		RESOURCE
		{
			name	  = Ablator
			amount	  = 1500
			maxAmount = 1500
		}

		!RESOURCE[AblativeShielding]{}

		!RESOURCE[ElectricCharge]{}

		!RESOURCE[MonoPropellant]{}
	}

//	==================================================
//	Orion MPCV Crew Module.

//	Realism Overhaul configuration.

//	Dimensions: 3.300 x 5.030 m
//	Gross Mass: 8900.000 Kg
//	==================================================

	@PART[XOrionPodX]:FOR[RealismOverhaul]
	{
		@module		 = Part
		%RSSROConfig = true

		@MODEL
		{
			@scale	  = 1.500, 1.200, 1.500
			%position = 0.000, 0.000, 0.000
			%rotation = 0.000, 0.000, 0.000
		}

		//	Linear negative pitch thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =   0.000, 0.880, -1.390
			rotation = -90.000, 0.000,  0.000
		}

		//	Linear positive pitch thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =   0.000, 0.070, -1.950
			rotation = -55.000, 0.000,  0.000
		}

		//	Linear negative yaw thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 = 0.100, 0.100,   0.100
			position = 1.900, 0.040,   0.000
			rotation = 0.000, 0.000, -55.000
		}

		//	Linear positive yaw thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =  0.100, 0.100,  0.100
			position = -1.900, 0.040,  0.000
			rotation =  0.000, 0.000, 55.000
		}

		//	Linear negative roll thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =  -1.450, 0.030, -1.320
			rotation = -90.000, 0.000,  0.000
		}

		//	Linear positive roll thruster.

		MODEL
		{
			model	 = RealismOverhaul/Models/LinearRCS
			scale	 =   0.100, 0.100,  0.100
			position =   1.450, 0.030, -1.320
			rotation = -90.000, 0.000,  0.000
		}

		!mesh		   = NULL
		@scale		   = 1.000
		@rescaleFactor = 1.000

		@node_stack_bottom = 0.000, -1.045, 0.000, 0.000, -1.000, 0.000, 3
		@node_stack_top	   = 0.000,  0.960, 0.000, 0.000,  1.000, 0.000, 3
		@node_stack_1	   = 0.000,  1.250, 0.000, 0.000,  1.000, 0.000, 2

		@title		  = Orion MPCV Crew Module (CM)
		@manufacturer = Lockheed Martin
		@description  = The next - generation NASA spacecraft for beyond LEO exploration. Can support 6 crew for up to 21 days of active time.

		@mass		      = 6.8310
		@crashTolerance   = 12
		@breakingForce    = 250
		@breakingTorque   = 250
		@maxTemp	      = 800
		%skinMaxTemp	  = 2300
		%emissiveConstant	  = 0.850
		@CrewCapacity     = 6
		%fuelCrossFeed    = true
		@CoMOffset 		  = 0.000, -0.670, 0.000
		!CoLOffset 		  = NULL
		!CoDOffset 		  = NULL
		%bulkheadProfiles = size2, size3

		!INTERNAL[ALCOR_Monley_Internals]{}

		@MODULE[ModuleCommand]
		{
			RESOURCE
			{
				name = ElectricCharge
				rate = 1.350
			}
		}

		@MODULE[ModuleSAS]
		{
			%SASServiceLevel = 3
		}

		!MODULE[ModuleReactionWheel]{}

		@MODULE[ModuleScienceContainer]
		{
			@storageRange = 2.600
		}

		!MODULE[ModuleScienceLab]{}

		!MODULE[ModuleDataTransmitter]{}

		!MODULE[MechJebCore]{}

		!MODULE[ModuleGenerator]{}

		!MODULE[RasterPropMonitorComputer]{}

		!MODULE[ModuleAblator]{}

		!MODULE[ModuleHeatShield]{}

		!MODULE[ModuleAeroReentry]{}

		MODULE
		{
			name				  = ModuleRCS
			thrusterTransformName = RCSthruster
			thrusterPower		  = 0.237

			PROPELLANT
			{
				name  = Hydrazine
				ratio = 1.000
			}

			atmosphereCurve
			{
				key = 0 254.00
				key = 1 82.08
			}
		}

		MODULE
		{
			name		   = CoMShifter
			DescentModeCoM = 0.000, 0.000, -0.300
		}

		%skinMaxTemp = 3600
		%skinMassPerArea = 4
		MODULE
		{
			name = ModuleAblator
			ablativeResource = Ablator
			lossExp = -8000
			lossConst = 0.06
			pyrolysisLossFactor = 26000
			ablationTempThresh = 500
			reentryConductivity = 0.01
			charMax = 1
			charMin = 1
		}

		MODULE
		{
			name	 = ModuleFuelTanks
			basemass = -1
			type	 = ServiceModule
			volume	 = 130

			TANK
			{
				name	  = ElectricCharge
				amount	  = 43200
				maxAmount = 43200
			}

			TANK
			{
				name	  = Hydrazine
				amount	  = 85
				maxAmount = 85
			}
		}

		RESOURCE
		{
			name	  = Ablator
			amount	  = 1500
			maxAmount = 1500
		}

		!RESOURCE[AblativeShielding]{}

		!RESOURCE[ElectricCharge]{}

		!RESOURCE[MonoPropellant]{}
	}

//	==================================================
//	Orion Crew Module (EFT & MPCV).

//	Deadly Reentry configuration.
//	==================================================

	@PART[XOrionPodXbb31|XOrionPodX]:FOR[RealismOverhaul]:NEEDS[DeadlyReentry]
	{
		@MODULE[ModuleAblator]:NEEDS[DeadlyReentry]
		{
			@name			= ModuleHeatShield
			depletedMaxTemp = 1200
		}

		MODULE
		{
			name 				 = ModuleAeroReentry
			%skinMaxTemp 		 = 2500
			%skinThicknessFactor = 0.050
		}
	}

//	==================================================
//	Orion Crew Module (EFT & MPCV).

//	Remote Tech configuration.
//	==================================================

	@PART[XOrionPodXbb31|XOrionPodX]:FOR[RealismOverhaul]:NEEDS[RemoteTech]
	{
		MODULE
		{
			name = ModuleSPU
		}

		MODULE
		{
			name			  = ModuleRTAntenna
			IsRTActive		  = false
			Mode0OmniRange	  = 0
			Mode1OmniRange	  = 1000000
			EnergyCost		  = 0.005
			DeployFxModules	  = 0
			ProgressFxModules = 1

			TRANSMITTER
			{
				PacketInterval	   = 0.200
				PacketSize		   = 0.470
				PacketResourceCost = 0.050
			}
		}
	}

//	==================================================
/	Orion Crew Module (MPCV).

//	TAC Life Support configuration.
//	==================================================

	@PART[XOrionPodX]:FOR[RealismOverhaul]:NEEDS[TacLifeSupport]
	{
		@MODULE[ModuleFuelTanks]
		{
			@volume = 1700

			TANK
			{
				name	  = Food
				amount	  = 737
				maxAmount = 737
			}

			TANK
			{
				name	  = Water
				amount	  = 23.22
				maxAmount = 23.22
			}

			TANK
			{
				name	  = Oxygen
				amount	  = 3550
				maxAmount = 3550
			}

			TANK
			{
				name	  = CarbonDioxide
				amount	  = 0
				maxAmount = 1530
			}

			TANK
			{
				name	  = Waste
				amount	  = 0
				maxAmount = 67.06
			}

			TANK
			{
				name	  = WasteWater
				amount	  = 0
				maxAmount = 620.53
			}

			TANK
			{
				name	  = LithiumHydroxide
				amount	  = 63
				maxAmount = 63
			}
		}

		MODULE
		{
			name		    = TacGenericConverter
			converterName   = CO2 Scrubber
			conversionRate  = 6.000
			inputResources  = CarbonDioxide, 0.006216, ElectricCharge, 0.010, LithiumHydroxide, 0.0000085683
			outputResources = Water, 0.0032924498, true, Waste, 0.0000257297, false
		}
	}

//	==================================================
//	SpaceX Dragon V2 Crew Module ladder.

//	Dimensions: 0.200 x 1.000 m
//	Gross Mass: 12.00 Kg
//	==================================================

	@PART[xDragonLadderx]:FOR[RealismOverhaul]
	{
		@module		 = Part
		%RSSROConfig = true

		MODEL
		{
			model	 = CMES/Pod/Parts/LazTekDragonV2Ladder/model
			scale	 = 1.125, 1.125, 1.125
			position = 0.000, 0.000, 0.000
			rotation = 0.000, 0.000, 0.000
		}

		!mesh		   = NULL
		@scale		   = 1.000
		@rescaleFactor = 1.000

		@node_attach = 0.000, 0.000, 0.000, 0.000, 0.000, -1.000

		@title		  = Dragon V2 Mobility Enhancer
		@manufacturer = SpaceX
		%description  = A mobility enhancement system.

		@mass			  = 0.0120
		@crashTolerance	  = 12
		%breakingForce	  = 250
		%breakingTorque	  = 250
		@maxTemp		  = 1073.15
		%fuelCrossFeed	  = false
		%bulkheadProfiles = srf
	}
