// ============================================================
// Laucnhers Pack RO configs Falcon 9 Block 4

// Source: 

//	SFI		 -							http://www.spaceflightinsider.com/hangar/falcon/
//  SpaceX 	 - Falcon 9 Users Guide:    http://www.spacex.com/sites/spacex/files/falcon_9_users_guide_rev_2.0.pdf
//  SpaceX   - Falcon 9 Merlin:			https://web.archive.org/web/20130715094112/http://www.spacex.com/falcon9#merlin_engine
//	Analysis - Falcon 9 Merlin: 		https://drive.google.com/file/d/0B-f734HRBdAeaEtTRWRiWFljaWs/view
//	RCS Fuel - Draco RCS: 				http://www.parabolicarc.com/2018/04/12/spacex-proposes-recovering-dragon-spacecraft-gulf-mexico/

// ============================================================

// =========================================

// Faclon 9 Block 4 Main Tank

// =========================================

@PART[KK_SPX_F93_S1tank]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon 9 Block 4 Main Fuel Tank
	@manufacturer = SpaceX
	@mass = 25.6
	
	MODULE{
	
		name = ModuleFuelTanks
		volume = 387532
		type = Cryogenic
		
		TANK{
			name = Kerosene
			amount = full
			maxAmount = 144064
		}
		TANK{
			name = LqdOxygen
			amount = full
			maxAmount = 243468
		}
	}
	
	!RESOURCE,*{}
}

// =========================================

// Faclon 9 Block 4 Upper Tank

// =========================================

@PART[KK_SPX_F93_S2tank]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon 9 Block 4 Upper Fuel Tank
	@manufacturer = SpaceX
	@mass = 3.9
	
	MODULE{
	
		name = ModuleFuelTanks
		volume = 91077
		type = Cryogenic
		
		TANK{
			name = Kerosene
			amount = full
			maxAmount = 33738.7
		}
		TANK{
			name = LqdOxygen
			amount = full
			maxAmount = 57018.3
		}
		TANK{
			name = NTO
			amount = full
			maxAmount = 200
		}
		TANK{
			name = MMH
			amount = full
			maxAmount = 320
		}
	}
	
	!RESOURCE,*{}
	
	MODULE
	{
		name = ModuleCommand
		minimumCrew = 0
	
		RESOURCE
		{
			name = ElectricCharge	
			rate = 0.2
		}
	}
	MODULE
	{
		name = ModuleProbeControlPoint
		minimumCrew = 1
		multiHop = False
	}
	MODULE
	{
		name = ModuleKerbNetAccess
		MinimumFoV = 5
		MaximumFoV = 90
		AnomalyDetection = 0.3
		DISPLAY_MODES
		{
			Mode = Biome
			Mode = Terrain
		}
	}
	MODULE
	{
		name = ModuleDataTransmitter
		antennaType = INTERNAL
		packetInterval = 1.0
		packetSize = 2
		packetResourceCost = 12.0
		requiredResource = ElectricCharge
		antennaPower = 5000
		optimumRange = 2500
		packetFloor = .1
		packetCeiling = 5
	}
	RESOURCE
	{
		name = ElectricCharge
		amount = 4000
		maxAmount = 4000
	}

	MODULE
	{
		name = ModuleSAS
		SASServiceLevel = 3
	}	
	
	@MODULE[ModuleRCSFX]{
	
		!resourceName = NULL
		@thrusterPower = .4
		
		PROPELLANT{
		
			name = MMH
			ratio = 1.0
		}
		
		PROPELLANT{
		
			name = NTO
			ratio = 1.6
		}
		
		@atmosphereCurve
        {
            @key,0 = 0 300
            @key,1 = 1 85
        }
	}
}

// =========================================
//
// Faclon 9 1875mm Payload Adapter
//
// =========================================

@PART[KK_SPX_F9_1875mmPA]:FOR[RealismOverhaul]{
	
	%RSSROConfig = True
	
	@title = Falcon 9 Block 4 Payload Adapter
	@manufacturer = SpaceX
	@description = Payload adapter for the Falcon 9 Block 4.
}

// =========================================
//
// Faclon 9 Block 4 Heavy Separator
//
// =========================================

@PART[KK_SPX_F93Heavy_seperator]:FOR[RealismOverhaul]{
	
	%RSSROConfig = True
	
	@title = Falcon Heavy Side Tank Separator
	@manufacturer = SpaceX
	@description = The separator used for the side booster tanks on the Falcon Heavy rocket.
	
	!MODULE[ModuleEngines]{}
	!RESOURCE,*{}
}

// =========================================
//
// Falcon 9 Block 4 Interstage
//
// =========================================

@PART[KK_SPX_F93_interstage]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon 9 Block 4 Interstage
	@manufacturer = SpaceX
}

// =========================================
//
// Falcon 9 Block 4 Octaweb
//
// =========================================

@PART[KK_SPX_F9_Octaweb]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon 9 Block 4 Octaweb
	@manufacturer = SpaceX
}

// =========================================
//
// Falcon 9 Heavy Nose Cone
//
// =========================================

@PART[KK_SPX_F_nosecone]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon Heavy Nose Cone
	@manufacturer = SpaceX
}

// =========================================
//
// Falcon 9 Heavy Nose Cone
//
// =========================================

@PART[KK_SPX_Falcon9_FC]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon 9 Flight Control System
	@manufacturer = SpaceX
}

// =========================================
//
// Falcon Landing Leg
//
// =========================================

@PART[KK_SPX_F9LandingLeg]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon Landing Leg
	@manufacturer = SpaceX
}

// =========================================
//
// Falcon Payload Fairing
//
// =========================================

@PART[KK_SPX_FalconPayloadFairing]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon Block 4/Heavy Payload Fairing
	@manufacturer = SpaceX
	
	MODULE{
	
		name = ModuleAnchoredDecoupler
		ejectionForce = -9000
		explosiveNodeID = bottom
	}
	
	!MODULE[ModuleEngines]{}
	!MODULE[ModuleDecouple]{}
	
	!RESOURCE,*{}
}

// =========================================
//
// Falcon Gridfin
//
// may have to eliminate roll torque?
// =========================================

@PART[KK_SPX_FalconGridfin_FT]:FOR[RealismOverhaul]{

	%RSSROConfig = True
	
	@title = Falcon Block 4/Heavy Gridfin
	@manufacturer = SpaceX
}

// =========================================
//
// Merlin 1D++
//
// =========================================

@PART[KK_SPX_Merlin1D+]:FOR[RealismOverhaul] {

	%title = Merlin 1D++
	%category = Engine
	%manufacturer = SpaceX
	%RSSROConfig = True
	
	@MODULE[ModuleEnginesFX] {
	
		@minThrust = 356.46
        @maxThrust = 914
		%heatProduction = 248
		%massMult = 0.6184
		%ullage = True
		%pressureFed = False
		%ignitions = 4
		
		!PROPELLANT,*{}
		!atmosphereCurve,*{}
		
		PROPELLANT {
			name = Kerosene
			ratio = 0.3709
			DrawGauge = True
		}

		PROPELLANT {
			name = LqdOxygen
			ratio = 0.6291
			DrawGauge = False
		}
		
		atmosphereCurve {
			key = 0 348
			key = 1 322 //rounded from 321.703
		}

		IGNITOR_RESOURCE {
			name = ElectricCharge
			amount = 0.5
		}

		IGNITOR_RESOURCE {
			name = TEATEB
			amount = 1.0
		}
	}
	
	RESOURCE {
		name = TEATEB
		amount = 1
		maxAmount = 1
	}
	
	@MODULE[ModuleGimbal] {
		@gimbalRange = 5.0
		%useGimbalResponseSpeed = True
		%gimbalResponseSpeed = 16
	}

}

// =========================================
//
// Merlin 1D Vacuum+
//
// =========================================

@PART[KK_SPX_Merlin1DV+]:FOR[RealismOverhaul] {

	%title = Merlin 1D Vacuum+
	%category = Engine
	%manufacturer = SpaceX
	%RSSROConfig = True
	
	@MODULE[ModuleEnginesFX] {
	
		@minThrust = 364
        @maxThrust = 934.12
		%heatProduction = 225
		%massMult = 0.6447
		%ullage = True
		%pressureFed = False
		%ignitions = 4
		
		!PROPELLANT,*{}
		!atmosphereCurve,*{}
		
		PROPELLANT{
			name = Kerosene
			ratio = 0.3709
			DrawGauge = True
		}

		PROPELLANT{
			name = LqdOxygen
			ratio = 0.6291
			DrawGauge = False
		}
		
		atmosphereCurve{
			key = 0 348
			key = 1 310
		}

		IGNITOR_RESOURCE{
			name = ElectricCharge
			amount = 0.5
		}

		IGNITOR_RESOURCE{
			name = TEATEB
			amount = 1.0
		}
	}
	
	@MODULE[ModuleGimbal] {
		@gimbalRange = 5.0 //can't find any reliable documentation on this. 5 seems reasonable??
		%useGimbalResponseSpeed = True
		%gimbalResponseSpeed = 16
	}
	
	RESOURCE{
		name = TEATEB
		amount = 4
		maxAmount = 4
	}

}