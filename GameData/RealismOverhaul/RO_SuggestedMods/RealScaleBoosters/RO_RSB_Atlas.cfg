//  ==================================================
//  Sources:

//  ULA - Atlas V Launch Services User's Guide (2010): http://www.ulalaunch.com/uploads/docs/AtlasVUsersGuide2010.pdf
//  ULA - The Centaur Upper Stage History:             http://www.ulalaunch.com/uploads/docs/Published_Papers/Upper_Stages/TheCentaurUpperStageVehicleHistory.pdf
//  ULA - Qualification for the MR-107S RCS thrusters: http://www.ulalaunch.com/uploads/docs/Published_Papers/Supporting_Technologies/DeltaQualificationTestofAerojetHydrazineThrustersforUseonCentaurduringtheLROandLCROSSMissions20095481.pdf
//  ULA - Centaur Upperstage:                          http://www.ulalaunch.com/uploads/docs/Published_Papers/Upper_Stages/CentaurUpperstageApplicabilityforSeveralDayMissionDurationswithMinorInsulationModificationsAIAA20075845.pdf
//  ULA - United Launch Alliance - Atlas V:            http://www.ulalaunch.com/products_atlasv.aspx
//  Spaceflight 101 - Atlas V:                         http://spaceflight101.com/spacerockets/atlas-v-401/

//  ==================================================
//  Atlas V 400 series LPF.

//  Dimensions: 4.2 m x 12 m
//  Inert Mass: 1064 Kg (per halve)
//  ==================================================

@PART[RSB_PLF_AtlasV400_1]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 400 Series LPF (12m)
    @manufacturer = RUAG Space
    @description = The Large Payload Fairing (LPF) for the Atlas V 400 series.

    @mass = 1.058
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @CoMOffset = -0.6, -1.0, 0.0

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 6000
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V 400 series EPF.

//  Dimensions: 4.2 m x 12.9 m
//  Inert Mass: 1153 Kg (per halve)
//  ==================================================

@PART[RSB_PLF_AtlasV400_2]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 400 Series EPF (12.9m)
    @manufacturer = RUAG Space
    @description = The Extended Payload Fairing (EPF) for the Atlas V 400 series.

    @mass = 1.147
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @CoMOffset = -0.6, -1.0, 0.0

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 6000
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V 400 series XEPF.

//  Dimensions: 4.2 m x 13.8 m
//  Inert Mass: 1244 Kg (per halve)
//  ==================================================

@PART[RSB_PLF_AtlasV400_3]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 400 Series XEPF (13.8m)
    @manufacturer = RUAG Space
    @description = The Extra Extended Payload Fairing (XEPF) for the Atlas V 400 series.

    @mass = 1.238
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @CoMOffset = -0.6, -1.0, 0.0

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 6000
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V 500 series SPLF.

//  Dimensions: 5.4 m x 20.7 m
//  Inert Mass: 1762 Kg (per halve)
//  ==================================================

@PART[RSB_PLF_AtlasV500_1]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 500 Series SPLF (20.7m)
    @manufacturer = RUAG Space
    @description = The Short Payload Fairing (SPLF) for the Atlas V 500 series.

    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @CoMOffset = -1.0, -1.0, 0.0

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 9000
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V 500 series MPLF.

//  Dimensions: 5.4 m x 23.4 m
//  Inert Mass: 2001 Kg (per halve)
//  ==================================================

@PART[RSB_PLF_AtlasV500_2]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 500 Series MPLF (23.4m)
    @manufacturer = RUAG Space
    @description = The Medium Payload Fairing (MPLF) for the Atlas V 500 series.

    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @CoMOffset = -1.0, -1.0, 0.0

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 9000
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V 500 series LPLF.

//  Dimensions: 5.4 m x 26.5 m
//  Inert Mass: 2189 Kg (per halve)
//  ==================================================

@PART[RSB_PLF_AtlasV500_3]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 500 Series LPLF (26.5m)
    @manufacturer = RUAG Space
    @description = The Large Payload Fairing (LPLF) for the Atlas V 500 series.

    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @CoMOffset = -1.0, -1.0, 0.0

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 9000
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V Forward Load Reactor.

//  Dimensions: 5.4 m
//  Inert Mass: 200 Kg
//  ==================================================

@PART[RSB_PLF_AtlasV500_CFLR]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Centaur Forward Load Reactor
    @manufacturer = United Launch Alliance (ULA)

    @mass = 0.2
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15

    @MODULE[ModuleAnchoredDecoupler]
    {
        @ejectionForce = 500
    }

    !MODULE[ModuleEngines*],*{}

    !RESOURCE,*{}
}

//  ==================================================
//  Atlas V 400 series payload fairing base.

//  Dimensions: 3.75 m x 0.8 m
//  Inert Mass: 450 Kg
//  ==================================================

@PART[RSBfairingAtlasCentaur305]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Centaur Payload Fairing Base
    @manufacturer = United Launch Alliance (ULA)
    @description = A 3.75 meter procedural payload fairing base designed for the Atlas V 400 series Common Centaur.

    @mass = 0.45
    @crashTolerance = 14
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
}

//  ==================================================
//  Atlas V 500 series payload attach fitting.

//  Dimensions: 3.05 m x 1.1 m
//  Inert Mass: 180 Kg
//  ==================================================

@PART[RSBdecouplerAtlas500Payload]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @MODEL
    {
        @scale = 1.0, 1.375, 1.0
    }

    @node_stack_top = 0.0, 0.55, 0.0, 0.0, 1.0, 0.0, 2
    @node_stack_bottom = 0.0, -0.55, 0.0, 0.0, -1.0, 0.0, 3

    @title = Centaur Payload Attach Fitting T3302
    @manufacturer = United Launch Alliance (ULA)
    @description = A 3.05 meter payload attach fitting designed for the Atlas V 500 series Common Centaur.

    @mass = 0.18
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15

    @MODULE[ModuleDecouple]
    {
        @ejectionForce = 5
    }
}

//  ==================================================
//  Atlas V CCB nose cone.

//  Dimensions: 3.81 m x 2.8 m
//  Inert Mass: 425 Kg
//  ==================================================

@PART[RSBnosecone381]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V CCB Nose Cone
    @manufacturer = Orbital ATK
    @description = A 3.8 meter aerodynamic nose cone for the Atlas V HLV.

    @mass = 0.425
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
}

//  ==================================================
//  Common Centaur nose cone.

//  Dimensions: 3.05 m x 2.3 m
//  Inert Mass: 260 Kg
//  ==================================================

@PART[RSBnosecone305]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Common Centaur Nose Cone
    @manufacturer = Orbital ATK
    @description = A 3 meter aerodynamic nose cone for the Common Centaur upper stage.

    @mass = 0.26
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
}

//  ==================================================
//  Common Centaur.

//  Dimensions: 3.05 m x 10.5 m
//  Gross Mass: 23075 Kg

//  Stage includes the missing Helium mass that is
//  used for propellant pressurization.
//  ==================================================

@PART[RSBtankAtlasCentaur]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    %node_stack_payload = 0.0, 4.455, 0.0, 0.0, 1.0, 0.0, 2

    @title = Common Centaur
    @manufacturer = United Launch Alliance (ULA)
    @description = The second stage of an Atlas V. Contains the necessary avionics, communications and power supply for mission times of up to 6 hours.

    @mass = 2.05
    @crashTolerance = 10
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    %vesselIcon = Probe
    !ActivatesEvenIfDisconnected = NULL
    !stagingIcon = NULL

    !MODULE[ModuleDecouple],*{}

    //  Two sets of RCS thrusters for three axis control and ullage:
    //  Eight Aerojet Rocketdyne MR-106J (40 N) for attitude control.
    //  Four Aerojet Rocketdyne MR-106K (27 N) for ullage control.

    @MODULE[ModuleRCS*]
    {
        @thrusterPower = 0.428
        !resourceName = NULL

        !transformMultipliers,*{}

        transformMultipliers
        {
            trf0  = 0.09346
            trf1  = 0.09346
            trf2  = 0.09346
            trf3  = 0.09346
            trf4  = 0.09346
            trf5  = 0.09346
            trf6  = 0.09346
            trf7  = 0.09346
            trf8  = 0.06308
            trf9  = 0.06308
            trf10 = 0.06308
            trf11 = 0.06308
        }

        PROPELLANT
        {
            name = Hydrazine
            ratio = 1.0
        }

        PROPELLANT
        {
            name = Helium
            ratio = 10.0
            ignoreForIsp = True
        }

        @atmosphereCurve
        {
            @key,0 = 0 235
            @key,1 = 1 85
        }
    }

    @MODULE[ModuleCommand]
    {
        @RESOURCE[ElectricCharge]
        {
            @rate = 0.2
        }
    }

    MODULE
    {
        name = ModuleFuelTanks
        type = BalloonCryo
        volume = 60678.3
        basemass = -1

        //  Centaur fuel and oxidizer mass 20830 Kg.
        //  Following masses calculated from a 5.5:1 mixture ratio:

        //  Centaur fuel mass 3204.6 Kg.

        TANK
        {
            name = LqdHydrogen
            amount = 45231.0
            maxAmount = 45231.0 // Actual tank volume is 1706ft^3 = 48308.5L
        }

        //  Centaur oxidizer mass 17625.4 Kg.

        TANK
        {
            name = LqdOxygen
            amount = 15447.3
            maxAmount = 15447.3 // Actual tank volume is 570ft^3 = 16140.6L
        }
    }

    !MODULE[ModuleSPU*],*{}

    !MODULE[ModuleRTAntenna*],*{}

    !RESOURCE,*{}

    //  Batteries 4.3 kWh.
    //  Can support the Centaur for flights up to 6 hours in duration.
    //  Assumes that the electricity consumption of the Centaur avionics is 200 W.

    RESOURCE
    {
        name = ElectricCharge
        amount = 4300
        maxAmount = 4300
    }

    //  ACS propellant mass 155 Kg.

    RESOURCE
    {
        name = Hydrazine
        amount = 155
        maxAmount = 155
    }

    // ACS pressurization gas mass ~0.28 Kg.

    RESOURCE
    {
        name = Helium
        amount = 1550
        maxAmount = 1550
    }
}

//  ==================================================
//  Common Centaur.

//  Remote Tech compatibility.
//  ==================================================

@PART[RSBtankAtlasCentaur]:AFTER[RealismOverhaul]:NEEDS[RemoteTech]
{
    !MODULE[ModuleSPU*],*{}

    !MODULE[ModuleRTAntenna*],*{}

    @MODULE[ModuleCommand]
    {
        @RESOURCE[ElectricCharge]
        {
            @rate -= 0.025
        }
    }

    MODULE
    {
        name = ModuleSPU
        IsRTCommandStation = False
        RTCommandMinCrew = 0
    }

    MODULE
    {
        name = ModuleRTAntenna
        IsRTActive = True
        Mode0OmniRange = 0
        Mode1OmniRange = 1500000
        EnergyCost = 0.025

        TRANSMITTER
        {
            PacketInterval = 1.0
            PacketSize = 1.024
            PacketResourceCost = 0.0075
        }
    }
}

//  ==================================================
//  Atlas V 400 series ISA/ASA.

//  Dimensions: 3.81 m x 4.1 m
//  Inert Mass: 1140 Kg

//  The mass is the average value between the SEC and
//  the DEC versions.
//  ==================================================

@PART[RSBinterstageAtlasCentaur400]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 400 Series Interstage Adapter
    @manufacturer = Orbital ATK
    @description = The Interstage Structural Adapter (ISA) for the Atlas V 400 series.

    @mass = 1.14
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15

    @MODULE[ModuleDecouple]
    {
        @ejectionForce = 0
    }
}

//  ==================================================
//  Atlas V 500 series C-ISA.

//  Dimensions: 5.41 m x 2.2 m
//  Inert Mass: 980 Kg
//  ==================================================

@PART[RSBatlasVboattail]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @category = Structural
    @title = Atlas V 500 C-ISA
    @manufacturer = Orbital ATK
    @description = The forward Conical Interstage Structural Adapter (C-ISA) for Atlas V 500 series. Simply attach the 500 series interstage to the Centaur upper stage first, then snap this onto it. Payload fairing panels can then be attached to this base.

    @mass = 0.98
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    !stageOffset = NULL
    !childStageOffset = NULL
}

//  ==================================================
//  Atlas V 500 series C-ISA (procedural).

//  Dimensions: 5.41 m x 2.2 m
//  Inert Mass: 980 Kg
//  ==================================================

@PART[RSBfairingAtlasCentaur381]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @category = Structural
    @title = Atlas V 500 C-ISA (Procedural)
    @manufacturer = Orbital ATK
    @description = The procedural fairing version of the forward Conical Interstage Structural Adapter (C-ISA) for Atlas V 500 series. Simply attach the 500 series interstage to the Centaur upper stage first, then snap this onto it. Then build the fairing around it.

    @mass = 0.98
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
}

//  ==================================================
//  Atlas V 500 series aft stub adapter.

//  Dimensions: 3.81 m x 4.1 m
//  Inert Mass: 1525 Kg
//  ==================================================

@PART[RSBinterstageAtlasCentaur500]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V 500 Series Aft CIA
    @manufacturer = United Launch Alliance (ULA)
    @description = The aft Centaur Interstage Adapter (CIA) for the Atlas V 500 series. Typically used with a 500 series Atlas V fairing base encapsulating the entire Centaur upper stage. Place this interstage first, then snap the 500 series fairing base onto the "gap".

    @mass = 1.525
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15

    @MODULE[ModuleDecouple]
    {
        @ejectionForce = 0
    }
}

//  ==================================================
//  Atlas 500 series aft stub adapter (procedural).

//  Dimensions: 3.81 m x 4.1 m
//  Inert Mass: 1525 Kg
//  ==================================================

@PART[RSBfairingAtlas500]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @category = Structural
    @title = Atlas V 500 Series Aft CIA (Procedural)
    @manufacturer = United Launch Alliance (ULA)
    @description = The procedural fairing version of the aft Centaur Interstage Adapter (CIA) for the Atlas V 500 series. Typically used with a 500 series Atlas V fairing base encapsulating the entire Centaur upper stage. Place this interstage first, then snap the 500 series fairing base onto the "gap".

    @mass = 1.525
    @crashTolerance = 16
    @breakingForce = 250
    @breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
}

//  ==================================================
//  Atlas V Common Core Booster (CCB).

//  Dimensions: 3.81 m x 29 m
//  Gross Mass: 299490 Kg
//  ==================================================

@PART[RSBtankAtlasVcore]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Atlas V Common Core Booster
    @manufacturer = United Launch Alliance (ULA)
    @description = This common booster core can either function as a single core, or center core, or strap-on booster.

    @mass = 15.075
    @crashTolerance = 12
    @maxTemp = 673.15
    %skinMaxTemp = 773.15
    @breakingForce = 250
    @breakingTorque = 250

    !MODULE[ModuleFuelTanks],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = Default
        volume = 275182
        basemass = -1

        //  CCB fuel mass 76367 Kg.

        TANK
        {
            name = Kerosene
            amount = 93131
            maxAmount = 93131
        }

        //  CCB oxidizer mass 207720 Kg.

        TANK
        {
            name = LqdOxygen
            amount = 182051
            maxAmount = 182051
        }
    }

    //  Eight STAR 5F solid rocket motors (6 kN each) to aid the separation of the Centaur upper stage.

    @MODULE[ModuleEngines*]
    {
        @minThrust = 48
        @maxThrust = 48
        @heatProduction = 100
        %ullage = False
        %pressureFed = False
        %ignitions = 1

        @PROPELLANT[SolidFuel]
        {
            @name = HTPB
        }

        @atmosphereCurve
        {
            @key,0 = 0 254
            @key,1 = 1 160
        }
    }

    !RESOURCE,*{}

    //  Batteries 50 Wh.
    //  Supports the CCB for the initial duration of the flight (approximately 5 minutes).
    //  Assumes that the electricity consumption of the CCB avionics is 200 W.

    RESOURCE
    {
        name = ElectricCharge
        amount = 180
        maxAmount = 180
    }

    //  STAR-5F retro motors HTPB/AP propellant mixture mass ~31 Kg.

    RESOURCE
    {
        name = HTPB
        amount = 17.25
        maxAmount = 17.25
    }
}

//  ==================================================
//  Atlas V Common Core Booster (CCB).

//  Category configuration.
//  ==================================================

@PART[RSBtankAtlasVcore]:AFTER[zzzRealismOverhaul]
{
    @category = FuelTank
}

//  ==================================================
//  Common Centaur ACS propellant tank.

//  Dimensions: 0.65 m x 0.65 m
//  Inert Mass: 6 Kg
//  ==================================================

@PART[RSBtankSphereCentaur]:FOR[RealismOverhaul]
{
    %RSSROConfig = True

    @title = Spherical Tank (Centaur)
    @manufacturer = Generic
    @description = A general purpose spherical propellant tank.

    @mass = 0.006
    @crashTolerance = 14
    %breakingForce = 250
    %breakingTorque = 250
    @maxTemp = 673.15
    %skinMaxTemp = 773.15

    !MODULE[ModuleFuelTanks],*{}

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 120
        basemass = -1
    }

    !RESOURCE,*{}
}
