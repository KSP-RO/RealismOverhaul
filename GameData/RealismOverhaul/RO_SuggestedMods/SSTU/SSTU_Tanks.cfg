//*******************************************************************************
// SSTU FUEL TANKS
//
// There is a lot of data that we will globally set for all of the fuel tanks
// using wildcards. The individual types of tanks will have some values
// explicitly set for them.
// 
// Major changes include incrementing the tank diameter by 0.1 (down from 0.625),
// setting Crossfeed Enabled as default behavior, and turning the Interstage
// node on as default on the Standard tank.
//
//*******************************************************************************

//*******************************************************************************
// Global Fuel Tank Patches
//*******************************************************************************
@PART[SSTU-SC-TANK-MFT-*]:NEEDS[RealFuels&SSTU]:AFTER[SSTU]
{
	%RSSROConfig = True
	@maxTemp = 800
	%skinMaxTemp = 900
	
	@MODULE[SSTUModularFuelTank]
	{
		@maxTankDiameter = 99.0
		@minTankDiameter = 0.1
		@tankDiameterIncrement = 0.1
		!UPGRADES,* {}
	}
	@MODULE[SSTUNodeFairing],*
	{
		%maxTopDiameter = 99
		%maxBottomDiameter = 99
		%topDiameterIncrement = 0.1
		%bottomDiameterIncrement = 0.1
	}
	@MODULE[ModuleToggleCrossfeed]
	{
		%crossfeedStatus = true
	}
}
@PART[SSTU-SC-TANK-*]:AFTER[SSTU]:NEEDS[RealFuels&SSTU]
{
	@MODULE[ModuleFuelTanks]
	{
		@volume = 1060
		%utilizationTweakable = true
	}
}

@PART[SSTU-SC-TANK-MUS]:AFTER[SSTU]:NEEDS[RealFuels&SSTU]
{
    @MODULE[ModuleFuelTanks]
    {
        @volume = 1060
        %utilizationTweakable = true
    }
}

//*******************************************************************************
// Standard Tank
//*******************************************************************************
@PART[SSTU-SC-TANK-MFT-A]:AFTER[SSTU]
{
	@title = Modular Standard Fuel Tank
	@description = The standard fuel tank that includes selectable mount and nosecone options as well as variable diameter, length, and paint-scheme.
	@MODULE[SSTUSelectableNodes]
	{
		@startsEnabled = true
	}
	@MODULE[SSTUModularFuelTank]
	{
		CAP
		{
			name = Adapter-Dome-A
		}
				CAP
		{
			name = Adapter-Dome-B
		}
	}
}

//*******************************************************************************
// Modify the Dome
//*******************************************************************************
@SSTU_MODEL[Adapter-Dome-A]
{
	@invertForBottom = true
	%node = 0, 1.1150, 0, 0, 1, 0, 2
}
@SSTU_MODEL[Adapter-Dome-B]
{
	@invertForBottom = true
	%node = 0, 1.1150, 0, 0, 1, 0, 2
}

//*******************************************************************************
// Booster Tank
//*******************************************************************************
@PART[SSTU-SC-TANK-MFT-D]:AFTER[SSTU]
{
	@title = Modular Booster Fuel Tank
	@description = These specially shaped tanks are designed to be used as booster tanks like the Soviet R-7 rockets. Includes variable diameter, length, and paint-scheme.
}

//*******************************************************************************
// Lander Tank
//*******************************************************************************
@PART[SSTU-SC-TANK-MFT-L]:AFTER[SSTU]
{
	@title = Modular Lander Fuel Tank
	@description = These specially shaped tanks are designed to be used for landing craft. Includes variable diameter, length, and paint-scheme as well as multiple options for mounts.
}

//*******************************************************************************
// Radial Tank
//*******************************************************************************
@PART[SSTU-SC-TANK-MFT-R]:AFTER[SSTU]
{
	@title = Modular Radial Fuel Tank
	@description = These specially shaped tanks are designed to be used as radial mounted (surface attached) tanks.
}

//*******************************************************************************
// Spherical Tank
//*******************************************************************************
@PART[SSTU-SC-TANK-MFT-S]:AFTER[SSTU]
{
	@title = Modular Spherical Fuel Tank
	@description = These specially shaped spherical tanks are designed to include selectable mount and nosecone options as well as variable diameter, length, and paint-scheme.
}

//*******************************************************************************
// Modular Upper Stage
// Removed the ability for it to control infinite mass with Avionics
//*******************************************************************************
@PART[SSTU-SC-TANK-MUS]:NEEDS[RealFuels&SSTU]:AFTER[SSTU] // FIXME for 1.3
{
	%RSSROConfig = True
	%useRcsConfig = RCSBlock
	@maxTemp = 800
	%skinMaxTemp = 900
	@mass = 0.5
	@MODULE[SSTUModularUpperStage]
	{
		@defaultDiameter = 1.5
		@maxTankHeight = 99.0
		@maxTankDiameter = 99.0
		@minTankDiameter = 0.1
		@tankDiameterIncrement = 0.1
		@tankHeightIncrement = 0.1
		@defaultRcsThrust = 0.1
		!UPGRADES,* {}
	}
	@MODULE[SSTUNodeFairing],*
	{
		%maxTopDiameter = 99.0
		%maxBottomDiameter = 99.0
		%topDiameterIncrement = 0.5
		%bottomDiameterIncrement = 0.5
	}
	!MODULE[ModuleSAS] {}
	!MODULE[ModuleResourceConverter] {}
	!MODULE[SSTUVolumeContainer]{}
	!MODULE[SSTUResourceBoiloff]{}
	!MODULE[ModuleRCS],* {}
	MODULE
	{
		name = ModuleRCS
		thrusterTransformName = SC-GEN-RCS-4F-T-ThrustTransform
		resourceFlowMode = STAGE_PRIORITY_FLOW
		enableRoll = true
		enableYaw = true
		enablePitch = true
		enableX = true
		enableY = true
		enableZ = true
		atmosphereCurve
		{
			key = 0 220
			key = 1 100
			key = 4 0.001
		}
		//PROPELLANT
		//{
		//	ratio = 1.0
		//	name = Hydrazine
		//	resourceFlowMode = NO_FLOW
		//}
	}
	
	@MODULE[SSTUSelectableNodes]
	{
		@startsEnabled = true
	}

    %MODULE[ModuleSPU]:NEEDS[RemoteTech]
	{
		%IsRTCommandStation = false
    }

    %MODULE[ModuleRTAntennaPassive]:NEEDS[RemoteTech]
	{
        %TechRequired = start
        %OmniRange = 300000
        
        %TRANSMITTER
	{
            %PacketInterval = 1.0
            %PacketSize = 0.1
            %PacketResourceCost = 15.0
        }
    }
	MODULE
		{
			name = ModuleEngineConfigs
			type = ModuleRCS
			thrustRating = thrusterPower
			techLevel = 0
			minTechLevel = 0
			origTechLevel = 2
			engineType = L
			configuration = Hydrazine
			modded = false
			CONFIG
			{
				name = HTP
				thrusterPower = 0.06375
				IspSL = 0.177
				IspV = 0.465
				techRequired = earlyRocketry
				cost = 1.25
				PROPELLANT
				{
					ratio = 1.0
					name = HTP
					DrawGauge = True
				}
			}
			CONFIG
			{
				name = Hydrazine
				thrusterPower = 0.06875
				IspSL = 0.274
				IspV = 0.72
				techRequired = earlyFlightControl
				cost = 2.5
				PROPELLANT
				{
					ratio = 1.0
					name = Hydrazine
					DrawGauge = True
				}
			}
			CONFIG
			{
				name = NitrousOxide
				thrusterPower = 0.06625
				IspSL = 0.2
				IspV = 0.525
				techRequired = orbitalRocketry1956
				cost = 1.5
				PROPELLANT
				{
					ratio = 1.0
					name = NitrousOxide
					DrawGauge = True
				}
			}
			CONFIG
			{
				name = Helium
				thrusterPower = 0.018
				IspSL = 0.203
				IspV = 0.453
				techRequired = basicRocketryRP0
				cost = 0.5
				PROPELLANT
				{
					ratio = 1.0
					name = Helium
					DrawGauge = True
				}
			}
			CONFIG
			{
				name = Nitrogen
				thrusterPower = 0.0285
				IspSL = 0.1001462
				IspV = 0.195
				techRequired = start
				cost = 0
				PROPELLANT
				{
					ratio = 1.0
					name = Nitrogen
					DrawGauge = True
				}
			}
			CONFIG
			{
				name = MMH+NTO
				thrusterPower = 0.11125
				IspSL = 0.362
				IspV = 0.952
				techRequired = earlyDocking
				cost = 8.75
				PROPELLANT
				{
					name = MMH
					ratio = 0.5
					DrawGauge = True
				}
				PROPELLANT
				{
					name = NTO
					ratio = 0.50
				}
			}
			CONFIG
			{
				name = MMH+MON3
				thrusterPower = 0.11125
				IspSL = 0.362
				IspV = 0.952
				techRequired = earlyDocking
				cost = 9
				PROPELLANT
				{
					name = MMH
					ratio = 0.499
					DrawGauge = True
				}
				PROPELLANT
				{
					name = MON3
					ratio = 0.501
				}
			}
			CONFIG
			{
				name = UDMH+NTO
				thrusterPower = 0.1105
				IspSL = 0.361
				IspV = 0.943
				techRequired = earlyDocking
				cost = 6.25
				PROPELLANT
				{
					name = UDMH
					ratio = 0.413
					DrawGauge = True
				}
				PROPELLANT
				{
					name = NTO
					ratio = 0.587
				}
			}
			CONFIG
			{
				name = Aerozine50+NTO
				thrusterPower = 0.11375
				IspSL = 0.366
				IspV = 0.955
				techRequired = earlyDocking
				cost = 8.75
				PROPELLANT
				{
					name = Aerozine50
					ratio = 0.502
					DrawGauge = True
				}
				PROPELLANT
				{
					name = NTO
					ratio = 0.498
				}
			}
			CONFIG
			{
				name = Cavea-B
				thrusterPower = 0.10625
				IspSL = 0.274
				IspV = 0.939
				techRequired = stabilityRP0
				cost = 6.25
				PROPELLANT
				{
					ratio = 1.0
					name = CaveaB
					DrawGauge = True
				}
			}
		}
}
