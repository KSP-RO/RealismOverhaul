@PART[Space_Shuttle_Crew?Module]
{
	@name = Space_Shuttle_Crew
}
@PART[Space_Shuttle_Crew?ModuleOld]
{
	@name = Space_Shuttle_Crew_Analog
}


// https://science.ksc.nasa.gov/shuttle/technology/sts-newsref/sts-rcs.html
// https://spaceflight.nasa.gov/shuttle/reference/shutref/orbiter/rcs/overview.html
// https://www.alternatewars.com/BBOW/Space_Engines/Shuttle_Propulsion_1990.pdf
// https://www.smashwords.com/extreader/read/126031/3/americas-space-shuttle-reaction-control-system-nasa-astronaut-training-manual-rcs-2102a
// 418.6 kg MMH (475.76 L) and 664 kg (461.1 L) NTO RCS propellant
// RCS ISP taken from generic config
// Primary RCS thrust : 3.87 kN (870 lbf)
// Vernier RCS thrust : 0.11 kN (24 lbf)


@PART[Space_Shuttle_Crew|Space_Shuttle_Crew_Analog]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	
	%rescaleFactor = 1.5625
	
	@mass = 11.556
	
	@maxTemp = 1400
	%skinMaxTemp = 2700
	
	@MODULE[KSPWheelBase]
	{
		%showControls = false
	}
	
	@MODULE[KSPWheelBrakes]
	{
		@maxBrakeTorque = 70
	}
	
	!MODULE[ModuleLiftingSurface]{}
	
	@MODULE[ModuleRCS*],*
	{
		!resourceName = DELETE
		PROPELLANT
		{
			name = MMH
			ratio = 0.5078
		}
		PROPELLANT
		{
			name = MON3
			ratio = 0.4922
		}
		
		@atmosphereCurve
		{
			@key, 0 = 0 320
			@key, 1 = 1 110
		}
	}
	
	@MODULE[ModuleRCS*]:HAS[#thrusterTransformName[RCSthruster2]]
	{
		%engineID = vernier
		@thrusterPower = 0.11
	}
	@MODULE[ModuleRCS*]:HAS[~thrusterTransformName[RCSthruster2]]
	{
		%engineID = primary
		@thrusterPower = 3.87
	}
	
	!RESOURCE[MonoPropellant]{}
	
	
	// https://www.bernd-leitenberger.de/space-shuttle.shtml
	// three nickel-cadmium batteries with 10 amperehours each at 28 volts, so in total 3024 kJ
	MODULE
	{
		name = ModuleFuelTanks
		volume = 936.86
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = MMH
			amount = 475.76
			maxAmount = 475.76
		}
		TANK
		{
			name = MON3
			amount = 461.1
			maxAmount = 461.1
		}
		TANK
		{
			name = ElectricCharge
			amount = 3024
			maxAmount = 3024
		}
	}
}

@PART[SHUTTLE_Fuselase_Radiator]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	
	%rescaleFactor = 1.5625
	
	@maxTemp = 1400
	%skinMaxTemp = 2400
	
	@mass = 18.806
	%CoMOffset = 0,0,1.5
	
	//https://www.bernd-leitenberger.de/space-shuttle.shtml
	// 3 LqdHydrogen tanks with 42 kg (593.2 L) each, and 3 LqdOxygen tanks with 354 kg (310.2 L) each.
	// These tanks also provide Oxygen and Hydrogen to life support. (51 kg)
	MODULE
	{
		name = ModuleFuelTanks
		volume = 2710.3
		type = Cryogenic
		basemass = -1
		TANK
		{
			name = LqdHydrogen
			amount = 1779.6
			maxAmount = 1779.6
		}
		TANK
		{
			name = LqdOxygen
			amount = 930.7
			maxAmount = 930.7
		}
	}
	
	!MODULE[ModuleReactionWheel]{}
	
	!MODULE[ModuleLight],* {}
}


@PART[Shuttle_Engine_Mout]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	
	@mass = 10.7
	
	%skinMaxTemp = 2700
	%maxTemp = 1173
	
	%rescaleFactor = 1.5625
	
	MODULE
	{
		name = ModuleCommand
		
		minimumCrew = 0
		
		%defaultControlPointDisplayName = Default
		%CONTROLPOINT
		{
			name = forward
			displayName = SSME Vector
			orientation = 9.95,0,0
		}
	}
	
	// https://www.bernd-leitenberger.de/space-shuttle.shtml
	// three fuel cells
	// 7kW sustained load, and 0.6 l water per kWh
	@MODULE[ModuleResourceConverter]
	{
		@name = ModuleResourceConverter
		@ConverterName = Fuel Cell
		@StartActionName = Start Fuel Cell
		@StopActionName = Stop Fuel Cell
		@ToggleActionName = Toggle Fuel Cell
		@FillAmount = 0.95
		@AutoShutdown = False
		@GeneratesHeat = False
		@UseSpecialistBonus = False
		
		!INPUT_RESOURCE,* {}
		!OUTPUT_RESOURCE,* {}
		
		INPUT_RESOURCE
		{
			ResourceName = LqdHydrogen
			Ratio = 0.0001010385
		}

		INPUT_RESOURCE
		{
			ResourceName = LqdOxygen
			Ratio = 0.00007169925
		}

		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 7
			DumpExcess = False
		}

		OUTPUT_RESOURCE
		{
			ResourceName = Water
			Ratio = 0.00008895
			DumpExcess = True
		}
	}
}