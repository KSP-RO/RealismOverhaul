//###### Tantares/Soyuz ######
//Tantares CM
@PART[Tantares_Crew_A]:NEEDS[RealismOverhaul]
{
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 1.894
	%node_stack_bottom = 0.0, -0.8657, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  0.8657, 0.0, 0.0, 1.0, 0.0, 2
	
	%title = Soyuz Reentry Capsule
	%description = A bell-shaped custom for controlled reentries. Sits only two in this version
	
	@MODULE[ModuleCommand]
	{
		@minimumCrew = 0
	}
	!MODULE[TweakScale]
	{
	}
	!MODULE[ModuleReactionWheel]
	{
	}
	MODULE
	{
    name = ModuleFuelTanks
    volume = 785
    type = ServiceModule
    basemass = -1
    TANK
    {
      name = Food
      amount = 126
      maxAmount = 126
    }
    TANK
    {
      name = Water
      amount = 71.4
      maxAmount = 71.4
    }
    TANK
    {
      name = Oxygen
      amount = 1890
      maxAmount = 26460
    }
    TANK
    {
      name = Waste
      amount = 0.0
      maxAmount = 63
    }
    TANK
    {
      name = WasteWater
      amount = 0.0
      maxAmount = 113.4
    }
    TANK
    {
      name = CarbonDioxide
      amount = 0.0
      maxAmount = 900
    }
    TANK
    {
    name = ElectricCharge
    amount = 43200
    maxAmount = 43200
    }
    TANK
    {
      name = HTP
      amount = 20
      maxAmount = 20
    }
	}
	MODULE
	{
    name = ModuleRCSFX
    thrusterTransformName = RCSthruster
    resourceFlowMode = STACK_PRIORITY_SEARCH
    thrusterPower = 0.07
    PROPELLANT
    {
      name = HTP
      ratio = 1.0
    }
    atmosphereCurve
    {
      key = 0 144.1
      key = 1 49.4
    }
	}
	%maxTemp = 2473.15
	!MODULE[ModuleAblator]
	{
	}
	MODULE
	{
		name = ModuleAblator
		ablativeResource = Ablator
		lossExp = -9000
		lossConst = 20
		pyrolysisLossFactor = 23000
		ablationTempThresh = 500
		reentryConductivity = 0.01
		//reentryConductivity = 0.12
		//@reentryConductivity = #$../heatConductivity$ // if it exists, use it
		charMax = 1
		charMin = 1
	}
	@RESOURCE[Ablator]
	{
		@amount = 250
		@maxAmount = 250
	}
	MODULE
	{
		name = CoMShifter
		DescentModeCoM = 0.0, 0.0, -0.1
	}
	MODULE
	{
		name = ModuleGenerator
		isAlwaysActive = true
		OUTPUT_RESOURCE
		{
			name = ElectricCharge
			rate = -0.2 //200W for life support base
		}
	}
}

//Tantares OM
@PART[Tantares_Orbital_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 1.0
	%node_stack_bottom = 0.0, -1.122, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  1.122, 0.0, 0.0, 1.0, 0.0, 2
	
	%title = Soyuz Orbital Block
	%description = A spherical capsule to make life in orbit more comfortable
	
	!MODULE[TweakScale]
	{
	}
	!MODULE[ModuleReactionWheel]
	{
	}
	MODULE
	{
		name = ModuleFuelTanks
		basemass = -1
		type = ServiceModule
		volume = 785
		TANK
		{
			name = ElectricCharge
			amount = 43200
			maxAmount = 43200
		}
		TANK
		{
			name = Oxygen
			amount = 1890
			maxAmount = 26460
		}
		TANK
		{
			name = Food
			amount = 126
			maxAmount = 126
		}
		TANK
		{
			name = Water
			amount = 71.4
			maxAmount = 71.4
		}
		TANK
		{
			name = CarbonDioxide
			amount = 0
			maxAmount = 900
		}
		TANK
		{
			name = Waste
			amount = 0
			maxAmount = 63
		}
		TANK
		{
			name = WasteWater
			amount = 0
			maxAmount = 113.4
		}
		TANK
		{
			name = LithiumHydroxide
			amount = 31.5
			maxAmount = 31.5
		}
	}
	MODULE
	{
		name = TacGenericConverter
		converterName = CO2 Scrubber
		conversionRate = 2.0	// # of people - Figures based on per/person
		inputResources = CarbonDioxide, 0.0058912100, ElectricCharge, 0.010, LithiumHydroxide, 0.0000085683
		outputResources = Water, 0.0032924498, true, Waste, 0.0000257297, false
	}
	MODULE
	{
		name = ModuleGenerator
		isAlwaysActive = true
		OUTPUT_RESOURCE
		{
			name = ElectricCharge
			rate = -0.2 //200W for life support base
		}
	}
}

//Tantares SM
@PART[Tantares_Engine_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 1.37
	%node_stack_bottom = 0.0, -1.122, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  1.122, 0.0, 0.0, 1.0, 0.0, 2
	
	%title = Soyuz PAO Propulsion module
	%description = Contains all the required fuel and batteries
	
	!MODULE[TweakScale]
	{
	}
	!MODULE[ModuleReactionWheel]
	{
	}
	@MODULE[ModuleEngines*]
	{
		%minThrust = 11.8
		%maxThrust = 11.8
		%heatProduction = 100
		@PROPELLANT[UDMH]
		{
			%name = UDMH
			%ratio = 0.349
		}
		@PROPELLANT[NTO]
		{
			%name = NTO
			%ratio = 0.651
		}
		@atmosphereCurve
		{
			@key,0 = 0 282
			@key,1 = 1 150
		}
		%ullage = False
		%pressureFed = True
		%ignitions = -1
		!IGNITOR_RESOURCE,* {}
		IGNITOR_RESOURCE
		{
			name = ElectricCharge
			amount = 0.5
		}
	}	
	!MODULE[ModuleEngineConfigs]
	{
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = KTDU-80 (Soyuz TMA)
		origMass = 1.37
		modded = false
		CONFIG
		{
			name = KTDU-80 (Soyuz TMA)
			minThrust = 11.8
			maxThrust = 11.8
			heatProduction = 100
			PROPELLANT
			{
				name = UDMH
				ratio = 0.357
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.643
			}
			atmosphereCurve
			{
				key = 0 202
				key = 1 112
			}
			MassMult = 1.0
		}
	}
	@MODULE[ModuleRCS]
	{
		@name = ModuleRCSFX
		@thrusterPower = 0.27
		!resourceName = DELETE
		%resourceFlowMode = STACK_PRIORITY_SEARCH
		PROPELLANT
			{
				name = UDMH
				ratio = 0.357
			}
		PROPELLANT
			{
				name = NTO
				ratio = 0.643
			}
		@atmosphereCurve
		{
			@key,0 = 0 282
			@key,1 = 1 150
		}
	}
	MODULE
	{
    name = ModuleFuelTanks
    volume = 815
    type = ServiceModule
    basemass = -1
    TANK
    {
      name = ElectricCharge
      amount = Full
      maxAmount = 90000
    }
    TANK
    {
      name = NTO
      amount = Full
      maxAmount = 466.175004342078
    }
    TANK
    {
      name = UDMH
      amount = Full
      maxAmount = 258.824995657921
    }
	}
	!RESOURCE[Monopropellant]
	{	}
}

//LOK SM
@PART[Tantares_Engine_B]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%node_stack_bottom = 0.0, -1.826, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  1.826, 0.0, 0.0, 1.0, 0.0, 2
		
	@title = Soyuz 7K-LOK Service Module
	@mass = 2.4 // 1.413
	
	%category = Engine
	
	!RESOURCE[MonoPropellant]
	{ }
	!RESOURCE[ElectricCharge]
	{ }
	!RESOURCE[Oxygen]
	{ }
	!RESOURCE[CO2]
	{ }
	!RESOURCE[LiquidFuel]
	{ }
	!RESOURCE[Oxidizer]
	{ }
	
	MODULE
	{
		name = ModuleFuelTanks
		basemass = -1
		volume = 4499.5
		type = ServiceModule
		TANK
		{
			name = ElectricCharge
			amount = 259200
			maxAmount = 259200
		}
		TANK
		{
			name = LqdHydrogen
			amount = Full
			maxAmount = 1195
		}
		TANK
		{
			name = LqdOxygen
			amount = Full
			maxAmount = 473.5
		}
		TANK
		{
			name = Water
			amount = 0.0
			maxAmount = 600
		}
		TANK
		{
			name = UDMH
			amount = Full
			maxAmount = 688
		}
		TANK
		{
			name = NTO
			amount = Full
			maxAmount = 1283
		}
	}
	
	@MODULE[ModuleEngines*]
	{
		@minThrust = 4.98373953
		@maxThrust = 33.2249302
		@PROPELLANT[LiquidFuel]
		{
			@name = UDMH
			@ratio = 0.349
			@DrawGauge = True
		}
		@PROPELLANT[Oxidizer]
		{
			@name = NTO
			@ratio = 0.651
		}
		@atmosphereCurve
		{
			@key,0 = 0 314
			@key,1 = 1 250
		}
		%ullage = True
		!IGNITOR_RESOURCE,* {}
		IGNITOR_RESOURCE
		{
			name = UDMH
			amount = 0.500
		}
		IGNITOR_RESOURCE
		{
			name = NTO
			amount = 0.500
		}
	}
	
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = S5.51
		CONFIG
		{
			name = S5.51
			maxThrust = 33.2249302
			minThrust = 4.98373953
			heatProduction = 100
			PROPELLANT
			{
				name = UDMH
				ratio = 0.349
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.651
			}
			atmosphereCurve
			{
				key = 0 314
				key = 1 250
			}
		}
	}
	
	@MODULE[ModuleRCS]
	{
		@name = ModuleRCSFX
		@thrusterPower = 8.1787461
		!resourceName = DELETE
		%resourceFlowMode = NO_FLOW
		PROPELLANT
		{
			name = UDMH
			ratio = 0.349
			DrawGauge = True
			%resourceFlowMode = NO_FLOW
		}
		PROPELLANT
		{
			name = NTO
			ratio = 0.651
			%resourceFlowMode = NO_FLOW
		}
		@atmosphereCurve
		{
			@key,0 = 0 296
			@key,1 = 1 82.08
		}
	}
	
	!MODULE[LifeSupportRegeneratorModule]
	{}
	@MODULE[ModuleGenerator]
	{
	efficiency = 1
		INPUT_RESOURCE
		{
		   name = LqdHydrogen
		   rate = 0.0007779060
		}
		INPUT_RESOURCE
		{
		   name = LqdOxygen
		   rate = 0.0003864304
		}
		OUTPUT_RESOURCE
		{
		   name = Water
		   rate = 0.000496032
		}
		OUTPUT_RESOURCE
		{
		   name = ElectricCharge
		   rate = 1.5
		}
	}
}

//Tantares Parachute
@PART[Tantares_Parachute_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.25
	%node_stack_bottom = 0.0, -0.066, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  0.066, 0.0, 0.0, 1.0, 0.0, 2
		
	%title = Soyuz Parachute System
	%description = Be sure to install it correctly! Top node decouples everything above it!
	
	!MODULE[TweakScale]
	{
	}
	%maxTemp = 2273.15
	MODULE
	{
		name = ModuleConnectedLivingSpace
		passable = true
	}
}

//Tantares Decoupler
@PART[Tantares_Decoupler_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.25
	%node_stack_bottom = 0.0, -0.165, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  0.165, 0.0, 0.0, 1.0, 0.0, 2
			
	%title = Soyuz Separation system
	%description = The part that stays between PAO and Reentry Capsule
	
	
	!MODULE[TweakScale]
	{
	}
}

//Tantares Docking Ports
@PART[Tantares_Port_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.2
	%node_stack_bottom = 0.0, -0.0935, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  0.0935, 0.0, 0.0, 1.0, 0.0, 2
	
	%title = SSVP Docking Probe
	%description = Allows to be docked with the SSVP and SSVP-M8000 drogue cone.
	
	
	!MODULE[TweakScale]
	{
	}
	MODULE
	{
		name = ModuleConnectedLivingSpace
		passable = true
	}
	@MODULE[ModuleDockingNode]
	{
		@nodeType = SSVP
		%acquireForce = 0.5 // 2
		%acquireMinFwdDot = 0.8 // 0.7
		%acquireminRollDot = -3.40282347E+38
		%acquireRange = 0.25 // 0.5
		%acquireTorque = 0.5 // 2.0
		%captureMaxRvel = 0.1 // 0.3
		%captureMinFwdDot = 0.998
		%captureMinRollDot = -3.40282347E+38
		%captureRange = 0.05 // 0.06
		%minDistanceToReEngage = 0.25 // 1.0
		%undockEjectionForce = 0.1 // 10
	}
}

@PART[Tantares_Port_B]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.2
	%node_stack_bottom = 0.0, -0.1265, 0.0, 0.0, -1.0, 0.0, 2
	%node_stack_top    = 0.0,  0.1265, 0.0, 0.0, 1.0, 0.0, 2
	
	%title = SSVP Docking Cone
	%description = Allows to be docked with the SSVP and SSVP-M8000 probe.
	
	MODULE
	{
		name = ModuleConnectedLivingSpace
		passable = true
	}
	!MODULE[TweakScale]
	{
	}
	@MODULE[ModuleDockingNode]
	{
		@nodeType = SSVP
		%acquireForce = 0.5 // 2
		%acquireMinFwdDot = 0.8 // 0.7
		%acquireminRollDot = -3.40282347E+38
		%acquireRange = 0.25 // 0.5
		%acquireTorque = 0.5 // 2.0
		%captureMaxRvel = 0.1 // 0.3
		%captureMinFwdDot = 0.998
		%captureMinRollDot = -3.40282347E+38
		%captureRange = 0.05 // 0.06
		%minDistanceToReEngage = 0.25 // 1.0
		%undockEjectionForce = 0.1 // 10
	}
}

//Tantares Solar Panels
@PART[Tantares_Solar_A]:NEEDS[RealismOverhaul]
{
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.0406 // Level 2 @ 0.0008t/m^2 + 0.005t/m^2
	
	%title = PPTS Solar Panels
	%description = Same as Soyuz, but non-static. 3.5m^2
		
	!MODULE[TweakScale]
	{
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = 0.7385	// Level 2 @ 0.211kW/m^2
	}
}

@PART[Tantares_Solar_B]:NEEDS[RealismOverhaul]
{
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.0406 // Level 2 @ 0.0008t/m^2 + 0.005t/m^2
	
	%title = Soyuz Solar Panels
	%description = Static large panels. 3.5m^2
	
	!MODULE[TweakScale]
	{
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = 0.7385	// Level 2 @ 0.211kW/m^2
	}
}

@PART[Tantares_Solar_C]:NEEDS[RealismOverhaul]
{
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	%mass = 0.0203 // Level 2 @ 0.0008t/m^2 + 0.005t/m^2
	
	%title = Shenzhou Solar Panels
	%description = Half-sized Soyuz panels, they are intended to be placed on the Orbital Module 1.75m^2
	
	!MODULE[TweakScale]
	{
	}
	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = 0.36925 // Level 2 @ 0.211kW/m^2
	}
}

//Tantares Antenna
@PART[Tantares_Antenna_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	
	%title = Kurs Docking Antenna
	%description = Advanced rendez-vous and docking mechanism, successor of Igla system.
	
	!MODULE[TweakScale]
	{
	}
  !MODULE[ModuleDataTransmitter]
  {}
  %MODULE[ModuleRTAntennaPassive]
  {
    %OmniRange = 1500000

    %EnergyCost = 0.01
    %DeployFxModules = 1

    %TRANSMITTER
    {
      %PacketInterval = 0.4
      %PacketSize = 2
      %PacketResourceCost = 1.0
    }
  }
  %MODULE[ModuleSPU]
  {}
}

@PART[Vega_Antenna_C]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	
	%title = Igla Docking Antenna
	%description = Basic rendez-vous and docking mechanism, used since the Soviet Lunar program.
	
	!MODULE[TweakScale]
	{
	}
  !MODULE[ModuleDataTransmitter]
  {}
  %MODULE[ModuleRTAntennaPassive]
  {
    %OmniRange = 1500000

    %EnergyCost = 0.01
    %DeployFxModules = 1

    %TRANSMITTER
    {
      %PacketInterval = 0.4
      %PacketSize = 2
      %PacketResourceCost = 1.0
    }
  }
  %MODULE[ModuleSPU]
  {}
}

//Tantares RCS
@PART[Tantares_RCS_A]:NEEDS[RealismOverhaul]
{	
	%RSSROConfig = True
	@MODEL
	{
		%scale = 1.76, 1.76, 1.76
	}
	%rescaleFactor = 1.0
	%scale = 1.0
	
	%title = Soyuz RCS thrusters
	%description = Required for advanced maneuvering.
	
	!MODULE[TweakScale]
	{
	}
	@MODULE[ModuleRCS]
	{
		@name = ModuleRCSFX
		@thrusterPower = 0.275
		!resourceName = DELETE
		%resourceFlowMode = STACK_PRIORITY_SEARCH
		PROPELLANT
		{
			ratio = 1.0
			name = Hydrazine
		}
		@atmosphereCurve
		{
			@key,0 = 0 254
			@key,1 = 1 82.08
		}
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleRCSFX
		thrustRating = thrusterPower
		techLevel = 2
		origTechLevel = 2
		engineType = L
		origMass = 0.01
		configuration = UDMH+NTO
		modded = false
		CONFIG
		{
			name = UDMH+NTO
			thrusterPower = 0.442
			PROPELLANT
			{
				name = UDMH
				ratio = 0.413
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.587
			}
			IspSL = 0.95
			IspV = 0.943
		}
		CONFIG
		{
			name = HTP
			thrusterPower = 0.255
			PROPELLANT
			{
				ratio = 1.0
				name = HTP
			}
			IspSL = 0.177
			IspV = 0.465
		}
		CONFIG
		{
			name = Hydrazine
			thrusterPower = 0.275
			PROPELLANT
			{
				ratio = 1.0
				name = Hydrazine
			}
			IspSL = 0.274
			IspV = 0.72
		}
		CONFIG
		{
			name = NitrousOxide
			thrusterPower = 0.118
			PROPELLANT
			{
				ratio = 1.0
				name = NitrousOxide
			}
			IspSL = 0.2
			IspV = 0.525
		}
		CONFIG
		{
			name = Helium
			thrusterPower = 0.006
			PROPELLANT
			{
				ratio = 1.0
				name = Helium
			}
			IspSL = 0.203
			IspV = 0.453
		}
		CONFIG
		{
			name = Nitrogen
			thrusterPower = 0.019
			PROPELLANT
			{
				ratio = 1.0
				name = Nitrogen
			}
			IspSL = 0.1001462
			IspV = 0.195
		}
		CONFIG
		{
			name = MMH+NTO
			thrusterPower = 0.445
			PROPELLANT
			{
				name = MMH
				ratio = 0.437
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.563
			}
			IspSL = 0.953
			IspV = 0.952
		}
		CONFIG
		{
			name = Aerozine50+NTO
			thrusterPower = 0.455
			PROPELLANT
			{
				name = Aerozine50
				ratio = 0.502
				DrawGauge = True
			}
			PROPELLANT
			{
				name = NTO
				ratio = 0.498
			}
			IspSL = 0.963
			IspV = 0.955
		}
	}
	EFFECTSdisabled
	{
		running
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 0.2
				pitch = 0.0 0.2
				pitch = 1.0 1.0
				loop = true
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 0.1
				pitch = 2.0
				loop = false
			}
		}
	}
}
