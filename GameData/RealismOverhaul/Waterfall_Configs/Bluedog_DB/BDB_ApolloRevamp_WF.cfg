//@PART[bluedog_Apollo_CrewPod_5crew]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
//{
//    !EFFECTS {}
//	
//	ROWaterfall
//    {
//        template = rowaterfall-rcs-cold-gas-1
//        audio = rcs-jet-1
//        transform = rcsTransform
//        position = 0,-0.05,0
//        rotation = 0, 0, 180
//        scale = 0.7, 1.5, 0.7
//    }
//}

//@PART[bluedog_Apollo_RCS_3Way|bluedog_Apollo_RCS_Quad|bluedog_Apollo_RCS_Sideways]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
//{
//    !EFFECTS {}
//	
//	ROWaterfall
//    {
//        template = rowaterfall-rcs-hypergolic-1
//        audio = rcs-jet-1
//        transform = rcsTransform
//        position = 0,-0.005,0
//        rotation = 5, 0, 180
//        scale = 1.6, 1.6, 1.6
//    }
//}

@PART[bluedog_Apollo_RCS_Quad,bluedog_Apollo_RCS_Sideways,bluedog_Apollo_RCS_3Way]:NEEDS[Waterfall]
{
	// Removes the stock effect block, and replace it with one that has no particles
	!EFFECTS {}
	EFFECTS
	{
		rcs
		{
			AUDIO_MULTI
			{
				channel = Ship
				transformName = rcsTransform
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.1 0.0
				volume = 0.5 0.025
				volume = 1.0 0.2
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		// This is a custom name
		moduleID = Apollo_RCSQuad
		// This links the effects to a given ModuleEngines

		// List out all controllers we want available
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = rcs
			linkedTo = rcs
			thrusterTransformName = rcsTransform
		}

		TEMPLATE
		{
			// This is the name of the template to use
			templateName = BDB_RCS_big_1
			// This field allows you to override the parentTransform name in the EFFECTS contained in the template
			overrideParentTransform = rcsFX
			position = 0,-0.002,0
			rotation = 5, 0, 180
			scale = 1.7, 2, 1.7
		}
	}

}


@PART[bluedog_Apollo_CrewPod|bluedog_Apollo_CrewPod_5crew]:NEEDS[Waterfall]
{
	// Removes the stock effect block, and replace it with one that has no particles
	!EFFECTS {}
	EFFECTS
	{
		rcs
		{
			AUDIO_MULTI
			{
				channel = Ship
				transformName = rcsTransform
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 0.1 0.0
				volume = 0.5 0.025
				volume = 1.0 0.2
				pitch = 0.0 0.75
				pitch = 1.0 1.5
				loop = true
			}
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		// This is a custom name
		moduleID = Apollo
		// This links the effects to a given ModuleEngines

		// List out all controllers we want available
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = rcs
			linkedTo = rcs
			thrusterTransformName = rcsTransform
		}

		TEMPLATE
		{
			// This is the name of the template to use
			templateName = BDB_RCS_small_1
			// This field allows you to override the parentTransform name in the EFFECTS contained in the template
			overrideParentTransform = rcsTransform
			position = 0,-0.02,0
			rotation = 0, 0, 180
			scale = 0.5, 0.8, 0.5
		}
	}

}

@PART[bluedog_Saturn_Engine_J2A2]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        template = waterfall-hydrolox-upper-1
        audio = pump-fed-medium-1
        position = 0,0,0.07
        rotation = 0, 0, 0
        scale = 2.2, 2.2, 2.5
        glow = ro-hydrolox-blue
    }
}

@PART[bluedog_LM_Ascent_Engine]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        template = waterfall-hypergolic-aerozine50-upper-1
        audio = pressure-fed-1
        position = 0,0,0.01
        rotation = 0, 0, 0
        scale = 0.67, 0.67, 0.67
        glow = ro-hypergolic-az50
    }
}

@PART[bluedog_LM_Descent_Engine]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        template = waterfall-hypergolic-aerozine50-upper-1
        audio = pressure-fed-1
        position = 0,0,0.08
        rotation = 0, 0, 0
        scale = 1.2, 1.2, 1.2
        glow = ro-hypergolic-az50      
    }
}

@PART[bluedog_Saturn_Engine_J2A2|bluedog_LM_Ascent_Engine|bluedog_LM_Descent_Engine]:AFTER[zROWaterfall_99_Finalize]
{
    @EFFECTS
    {
        @running
        {
            |_ = running_engine
        }
    }
}