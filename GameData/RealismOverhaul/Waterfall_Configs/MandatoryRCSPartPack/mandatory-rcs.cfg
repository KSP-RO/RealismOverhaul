// N.B.: These blocks are nasty because they manipulate the `MODEL`'s scale directly instead of
// using `rescaleFactor`.

@PART[RCS_025T_*]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        template = waterfall-rcs-jet-1
        audio = rcs-jet-1
        transform = RCSthruster
        position = 0,-0.001,0
        rotation = 0, 0, 180
        scale = 0.67, 0.67, 0.67
    }
}

@PART[RCS_025T_*_tenth]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    !ROWaterfall {}
    ROWaterfall
    {
        template = waterfall-rcs-jet-1
        audio = rcs-jet-1
        transform = RCSthruster
        position = 0,-0.003,0
        rotation = 0, 0, 180
        scale = 0.4, 0.4, 0.4
    }
}

@PART[RV105_*]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    ROWaterfall
    {
        template = waterfall-rcs-jet-1
        audio = rcs-jet-1
        transform = RCSthruster
        position = 0,-0.003,0
        rotation = 0, 0, 180
        scale = 1.1, 1.1, 1.1
    }
}


@PART[RV105_*_half]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    !ROWaterfall {}
    ROWaterfall
    {
        template = waterfall-rcs-jet-1
        audio = rcs-jet-1
        transform = RCSthruster
        position = 0,-0.002,0
        rotation = 0, 0, 180
        scale = 0.8, 0.8, 0.8
    }
}


// These require manual handling because they have messed up transform names.
@PART[RV105_1xdown]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    !ROWaterfall {}
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = #$/name$
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = rcs
            linkedTo = rcs
            thrusterTransformName = RCSthruster // Why is the effect transform different!!
        }
        TEMPLATE
        {
            templateName = waterfall-rcs-jet-1
            overrideParentTransform = RCSjet
            position = 0,-0.003,0
            rotation = 0, 0, 180
            scale = 1.1, 1.1, 1.1
        }
    }
}
@PART[RV105_1xdown_half]:BEFORE[ROWaterfall]:NEEDS[Waterfall]
{
    !ROWaterfall {}
    MODULE
    {
        name = ModuleWaterfallFX
        moduleID = #$/name$
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = rcs
            linkedTo = rcs
            thrusterTransformName = RCSthruster // Why is the effect transform different!!
        }
        TEMPLATE
        {
            templateName = waterfall-rcs-jet-1
            overrideParentTransform = RCSjet
            position = 0,-0.002,0
            rotation = 0, 0, 180
            scale = 0.8, 0.8, 0.8
        }
    }
}
// Manually remove stock effect.
@PART[RV105_1xdown*]:FOR[zzzROWaterfall]:NEEDS[Waterfall]
{
    @EFFECTS
    {
        @running
        {
            !MODEL_MULTI_PARTICLE {}
        }
    }
}
